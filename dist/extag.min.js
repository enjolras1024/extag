!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Extag=e()}(this,function(){"use strict";var e=/^\s*[$_A-Z][$_A-Z0-9]*(\s*\.\s*[$_A-Z0-9]+)*\s*$/i,n=/\s*\.\s*/;function s(t,e){for(var n=-1,i=t.length,s=e;++n<i;)if(null==(s=s[t[n]]))return s;return s}var g={test:function(t){return e.test(t)},parse:function(t){if(g.test(t))return t.trim().split(n)},search:function(t,e,n){var i;if("string"==typeof t&&(t=g.parse(t)),t)return e&&(i=s(t,e)),null!=i||n||("undefined"!=typeof window?i=s(t,window):"undefined"!=typeof global&&(i=s(t,global))),i}},h=0,o=3,i=0,l=4,c=2,f=1,r=16,a=32,u=11,p=256,d=Object.freeze({}),v="view-engine",_="hook-engine",m=Object.freeze({}),x=Object.freeze([]),y={DATA:"@",TEXT:"#",EVENT:"+",FRAGMENT:"<>",MODIFIER:"::",CONVERTER:"|=",ASSIGN:"!",TWO_WAY:"@",ANY_WAY:"^",ONE_TIME:"?"},b=/\s+/,w=/\s/g,A=/^[A-Z]/,$=/^this\./,E=/^(this\.)?[\w$_]+$/,k=Array.prototype.slice,C=Object.defineProperty,O=Object.prototype.hasOwnProperty,T=Object.getOwnPropertyDescriptor,N=function(t){var e,n,i,s=arguments.length;for(i=1;i<s;++i)if((e=arguments[i])instanceof Object)for(n in e)O.call(e,n)&&(t[n]=e[n]);return t};function D(t,e){return null!=e&&(t=t.slice(0)).push(e),t}function t(t){return"function"==typeof t&&/native code/.test(t.toString())}function S(t,e){var n,i,s;for(n=0,i=e.length;n<i;++n)for(var r in s=e[n])O.call(s,r)&&C(t,r,T(s,r))}function I(t){var e,n,i,s,r;if(O.call(t,"extends")){if("function"!=typeof(n=t.extends))throw new TypeError("superClass must be a function")}else n=Object;if(O.call(t,"constructor")){if("function"!=typeof(e=t.constructor))throw new TypeError("subClass must be a function")}else e=function(){n.apply(this,arguments)};return e.prototype=Object.create(n.prototype),r=[e.prototype],i=t.mixins,Array.isArray(i)&&r.push.apply(r,i),r.push(t),S(e.prototype,r),C(e.prototype,"constructor",{value:e,enumerable:!1,writable:!0,configurable:!0}),r=[e,n],(s=t.statics)&&(i=s.mixins,Array.isArray(i)&&r.push.apply(r,i),r.push(s)),S(e,r),delete e.prototype.statics,delete e.prototype.entend,delete e.prototype.mixins,delete e.mixins,e}var M=/&[\w#]{2,6};/;function P(t){return M.test(t)?t.replace(/&nbsp;/g,String.fromCharCode(160)).replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"):t}function W(t,e){var n=t instanceof Error?t:new Error(t);throw e&&N(n,e),n}function Y(t){return t&&"object"==typeof t&&t.__extag_node__===d}function j(){}var z=[function(t){this.emit(t.type,t,i)},function(t){this.emit(t.type,t,f)},function(t){this.emit(t.type,t,c)},function(t){this.emit(t.type,t,f|c)}];function V(t,e,n){var i=t.constructor;"function"==typeof i.removeEventListener&&(2===arguments.length?i.removeEventListener(t,e):i.removeEventListener(t,e,n))}function G(t){var e=i;return t&&(t.capture&&(e|=f),t.passive&&(e|=c),t.once&&(e|=l)),e}function R(t){var e={};return t&f&&(e.capture=!0),t&c&&(e.passive=!0),t&l&&(e.once=!0),e}function U(t,e){return(t&f)==(e&f)}function F(t,e,n,i){var s=t._actions;if("function"==typeof n){s||C(t,"_actions",{value:s={},writable:!1,enumerable:!1,configurable:!0});var r=s[e];r||(r=s[e]={type:e,head:null,tail:null});var a=G(i);if(n.__extag_handler__)for(var o=r.head;o;){if(o.func===n&&U(a,o.flag))return;o=o.next}var l,c,f,h,u={func:n,flag:a};n.__extag_handler__=!0,r.head?r.tail.next=u:r.head=u,r.tail=u,"listeners"in r&&!r.listeners||(c=r,f=u,"function"==typeof(h=(l=t).constructor).addEventListener?h.addEventListener(l,c,f):c.listeners=null)}}function L(t,e,n,i){var s=t._actions;if(s){var r=s[e];if(r){if(2===arguments.length)return r.listeners&&V(t,r),void(s[e]=null);for(var a=G(i),o=r.head,l=null;o;){if(n===o.func&&U(a,o.flag)){if(r.listeners)r.listeners[o.flag&(f|c)]&&V(t,r,o);o.next||(r.tail=l),l?l.next=o.next:r.head=o.next;break}o=(l=o).next}}}}function Q(t,e,n){(e=k.call(e,0))[0]=n+" "+e[0],t.apply(console,e)}I({constructor:j,statics:{opts2flag:G,flag2opts:R,getEventListener:function(t,e){return z[e].bind(t)}},on:function(t,e,n){if("object"==typeof t){for(t in n=t)if(O.call(n,t)){var i=n[t];Array.isArray(i)?F(this,t,i[0],i[1]):F(this,t,i)}}else F(this,t,e,n)},off:function(t,e,n){var i=this._actions;if(i){var s=arguments.length,r=typeof t;if(0===s)for(t in i)L(this,t);else if("string"===r)1===s?L(this,t):L(this,t,e,n);else if("object"===r)for(t in n=t)if(O.call(n,t)){var a=n[t];Array.isArray(a)?L(this,t,a[0],a[1]):null==a?L(this,t):L(this,t,a)}}},emit:function(t){var e=this._actions;if(e){var n=e[t];if(n&&n.head){var i,s,r=n.listeners?arguments[2]:0;for(i=n.head;i;)U(r,i.flag)&&(i.func.apply(null,k.call(arguments,1)),i.flag&l&&(s=s||[]).push(i)),i=i.next;if(s)for(var a=0;a<s.length;++a)i=s[a],this.off(t,i.func,i.flag?R(i.flag):null)}}}});var X={info:function(){Q(console.log,arguments,"[EXTAG INFO]")},warn:function(){Q(console.warn,arguments,"[EXTAG WARN]")},error:function(){Q(console.error,arguments,"[EXTAG ERROR]")},debug:function(){Q(console.log,arguments,"[EXTAG DEBUG]")}};function q(){1<arguments.length?(this.ctor=arguments[0],this.args=arguments[1]):this.gen=arguments[0]}I({constructor:q,statics:{anew:function(t){return new q(t,k.call(arguments,1))},inst:function(t){return new q(t)}},gen:function(){var t=this.ctor,e=this.args;if(!e)return new t;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);default:throw new Error("`anew` arguments length must not exceed 6.")}}});var H={},Z={configurable:!0,enumerable:!0},B={},J={};function K(e){return function(t){return t[e]}}function tt(t,e){var n,i;Z.get=(n=e,O.call(B,n)||(B[n]=function(){return this.get(n)}),B[n]),Z.set=(i=e,O.call(J,i)||(J[i]=function(t){this.set(i,t)}),J[i]),C(t,e,Z)}function et(){throw new Error("Accessor is a partial class for mixins and can not be instantiated")}function nt(t){if(t instanceof Object){var e=t.constructor;return e.fullname||e.name}return typeof t}function it(t,e,n,i){var s,r,a,o=et.getAttrDesc(t,e);if(o&&(o.type||o.test))return(a=o.type)&&(s=function(t,e,n,i){var s,r,a,o,l,c,f=typeof i;if("string"===f&&typeof n!==i?(f=i,s=!0):"function"!==f||n instanceof i||(f=i.fullname||i.name,s=!0),s)return r=t.constructor,a=r.fullname||r.name,o=e,l=f,c=nt(n),"`"+o+"` of type `"+(a||"<<anonymous>>")+"` should be `"+l+(c?"`, not `"+c:"")+"`";if(Array.isArray(i)){for(var h=0,u=i.length;h<u&&!("string"==(f=typeof i[h])&&typeof n===i[h]||"function"===f&&n instanceof i[h]);++h);if(h===u)return function(t,e,n,i){for(var s=[],r=0,a=n.length;r<a;++r)s.push("`"+(n[r].name||n[r])+"`");return"`"+e+"` of type `"+(t||"<<anonymous>>")+"` should be "+s.join(" or ")+(i?", not `"+i:"")+"`"}((r=t.constructor).fullname||r.name,e,i,nt(n))}}(t,e,n,a)),s||((r=o.test)&&(s="function"==typeof r?r.call(t,n,e):function(t,e,n,i){if(!i.test(n))return n+" does not match the pattern "+i.toString()+" of the property `"+e+"` in "+t.toString()}(t,e,n,r)),s||void 0)}I({constructor:et,statics:{getAttrDesc:function(t,e){return t.__extag_descriptors__?t.__extag_descriptors__[e]:null},defineGetterSetter:tt,getAttributeDefaultValue:function(t){return"object"!=typeof t.value?t.value:null!=t.value?t.value instanceof q?t.value.gen&&t.value.gen():t.value:void 0},getAttributeDefaultValues:function(t){var e={},n=t.__extag_descriptors__;if(n)for(var i in n)if(O.call(n,i)){var s=n[i],r=typeof s.value;if("undefined"===r)continue;"object"!==r?e[i]=s.value:null!=s.value&&(s.value instanceof q?e[i]=s.value.gen&&s.value.gen():e[i]=s.value)}return e},applyAttributeDescriptors:function(t,e){if(!O.call(t,"__extag_descriptors__")){if(Array.isArray(e)){var n,i,s=e;for(e={},n=0,i=s.length;n<i;++n)e[s[n]]=H}var r,a,o=N({},t.__extag_descriptors__);for(r in e)if(O.call(e,r)){if(r in t)continue;a=e[r],o[r]="object"!=typeof a?{value:a}:a instanceof q?{value:a}:a?(a.get&&!a.set||a.set&&!a.get&&(a.get=K(r)),a):H,tt(t,r)}C(t,"__extag_descriptors__",{value:o,configurable:!0,enumerable:!1,writable:!1})}}},get:function(t){throw new Error("Method `get` must be implemented by sub-class")},set:function(t,e){throw new Error("Method `set` must be implemented by sub-class")},assign:function(t){for(var e in t)O.call(t,e)&&this.set(e,t[e])}});var st={validate0:function(t,e){var n,i=t.__extag_descriptors__;for(n in i)!i[n].required||e&&O.call(e,n)||X.warn("Attribute Validation:","required `"+n+"` for component "+(t.constructor.fullname||t.constructor.name))},validate:function(t,e,n,i){return!it(t,e,n)},troubleShoot:it};function rt(){throw new Error("DirtyMarker is a partial class for mixins and can not be instantiated")}I({constructor:rt,statics:{check:function(t,e,n,i){var s=t._dirty;s||(s={},t._dirty=s),e in s?s[e]===n&&delete s[e]:s[e]=i},clean:function(t,e){t._dirty&&(e?delete t._dirty[e]:t._dirty=null)}},hasDirty:function(t){var e=this._dirty;return!!e&&(null==t||O.call(e,t))}});var at=function(t,e,i){if(t){var n=t.resolve();return function(t){"function"==typeof t&&n.then(t)}}if(e){var s=[],r=0,a=document.createTextNode("");return new e(function(){for(var t;t=s.pop();)t();r=r?0:1}).observe(a,{characterData:!0}),function(t){"function"==typeof t&&(s.unshift(t),a.data=r)}}return i?function(t){if("function"==typeof t){var e=!1,n=function(){e||(e=!0,t())};i(n),setTimeout(n)}}:setTimeout}("undefined"!=typeof Promise&&t(Promise)?Promise:null,"undefined"!=typeof MutationObserver&&t(MutationObserver)?MutationObserver:null,"undefined"!=typeof requestAnimationFrame&&t(requestAnimationFrame)?requestAnimationFrame:null),ot=[],lt=[],ct=[],ft=0,ht=0,ut=!1;function pt(){try{var t;for(0,ft=0;ft<ot.length;)ot[ft].update(),++ft;for(ot.length=0,ft=-1,ht=0;ht<lt.length;)lt[ht].digest(),++ht;for(lt.length=0,ut=!(ht=-1),t=ct.length-1;0<=t;--t)ct[t]();ct.length=0}catch(t){throw ht=ft=-1,ot.length=0,lt.length=0,ct.length=0,ut=!1,t}}function gt(t,e,n,i){for(var s,r;e<=n;)if((r=i[s=e+n>>1].$meta.guid)<t)e=s+1;else{if(!(t<r))return e;n=s-1}return-e-1}var dt,vt={setImmediate:at,insertUpdateQueue:function(t){var e,n=ot.length,i=t.$meta.guid;if(0<n&&i>ot[n-1].$meta.guid)e=n;else{var s=gt(i,ft+1,ot.length-1,ot);if(!(s<0))return;e=-s-1}e===n?ot.push(t):ot.splice(e,0,t),ut||(ut=!0,at(pt))},insertDigestQueue:function(t){var e,n=lt.length,i=t.$meta.guid;if(0<n&&i>lt[n-1].$meta.guid)e=n;else{var s=gt(i,ht+1,lt.length-1,lt);if(!(s<0))return;e=-s-1}e===n?lt.push(t):lt.splice(e,0,t),ut||(ut=!0,at(pt))},pushCallbackQueue:function(t){ct.push(t)}},_t=[],mt=function(t){(dt=t).depsCountNew=0,dt.depsCountOld=0,dt.executeTimes=dt.executeTimes?dt.executeTimes+1:1,_t.push(t)},xt=function(){if(null!=dt){if(dt.depsCountOld<dt.depsCount){var t,e,n=dt.deps;for(t=n.length-1;0<=t;--t)(e=n[t]).times!==dt.executeTimes&&(e.src.off("changed",dt.invalidate),n.splice(t,1))}dt.depsCount=dt.depsCountOld+dt.depsCountNew,_t.pop(),_t.length&&(dt=_t[_t.length-1])}},yt=function(t,e){if(null!=dt){var n=dt.keys;n?n.indexOf(e)<0&&n.push(e):dt.keys=[e];var i,s,r=dt.deps;if(r){for(i=0;i<r.length;++i)if((s=r[i]).src===t)return void(s.times<dt.executeTimes&&(s.times=dt.executeTimes,dt.depsCountOld++))}else r=dt.deps=[];dt.depsCountNew++,t.on("changed",dt.invalidate),r.push({src:t,times:dt.executeTimes})}},bt=function(t){var e=t.deps;if(e){for(var n=0;n<e.length;++n)e[n].src.off("changed",t.invalidate);t.deps=null,t.keys=null}};function wt(t){wt.initialize(this,t)}I({constructor:wt,mixins:[et.prototype,j.prototype],statics:{create:function(t){return new wt(t)},initialize:function(t,e){var n,i=t.constructor;i!==wt&&i.attributes?(et.applyAttributeDescriptors(i.prototype,i.attributes),n=et.getAttributeDefaultValues(t),C(t,"_props",{value:n,writable:!1,enumerable:!1,configurable:!0})):C(t,"_props",{value:{},writable:!1,enumerable:!1,configurable:!0}),e&&function(t,e){var n,i;for(n in e)O.call(e,n)&&(et.getAttrDesc(t,n)?t.set(n,e[n]):(i=T(e,n)).get||i.set?C(t,n,i):(et.defineGetterSetter(t,n),t.set(n,i.value)))}(t,e)}},get:function(t){yt(this,t);var e=et.getAttrDesc(this,t);return e&&e.get?e.get.call(this,this._props):this._props[t]},set:function(t,e){var n,i=et.getAttrDesc(this,t),s=this._props;i&&i.get?i.set&&(n=i.get.call(this,s),i.set.call(this,e,s),n!==(e=i.get.call(this,s))&&this.emit("changed",t,e)):(n=s[t])!==e&&(s[t]=e,this.emit("changed",t,e))}});var At={invalidate:function(){}};function $t(t){this._owner=t||At,this._props={}}I({constructor:$t,mixins:[et.prototype,rt.prototype],get:function(t){return this._props[t]},set:function(t,e){var n=this._props,i=n[t];e!==i&&(n[t]=e,this._owner.invalidate(1),rt.check(this,t,e,i))},reset:function(t){var e,n,i=this._props;if(i)for(n in i)O.call(i,n)&&(t&&O.call(t,n)||rt.check(this,n,null,i[n]));if(t){for(n in t)O.call(t,n)&&(e=t[n])!==i[n]&&rt.check(this,n,e,i[n]);this._props=t}else this._props={}}});var Et={},kt={get:function(t){return Et[t]},set:function(t,e){Et[t]=e}},Ct=0,Ot=null;function Tt(){W("Shell is a base class and can not be instantiated")}function Nt(){W("Parent is a base class and can not be instantiated!")}function Dt(t){for(var e=t._parent;e&&e.$meta.type===h;)e=e._parent;return e}function St(t,e){var n,i,s=t._children,r=s.length;for(e=e||[],n=0;n<r;++n)(i=s[n]).$meta.type===h?St(i,e):e.push(i);return e}I({constructor:Tt,mixins:[j.prototype,et.prototype,rt.prototype],invalidate:function(t){0==(this.$flag&r)&&(this.$flag|=r,vt.insertUpdateQueue(this)),t&&0==(this.$flag&t)&&(this.$flag|=t)},update:function(){W("The method `update` must be implemented by sub-class")},digest:function(){W("The method `digest` must be implemented by sub-class")},attach:function(t){0===this.$meta.type&&W("Fragment and component using <x:frag> as root tag, can not attach a skin.");var e=Tt.getViewEngine(this);if(e.attachShell(t,this),this.$skin=t,this._actions){var n,i,s=this._actions;for(n in s)if(O.call(s,n)&&e.mayDispatchEvent(t,n)&&(i=s[n]))for(var r=i.head;r;)Tt.addEventListener(this,i,r),r=r.next}0==(this.$flag&a)&&(this.$flag|=a,vt.insertDigestQueue(this))},detach:function(){this.$owner&&(this.$owner=null),this.constructor.destroy(this);var t=this.$skin;t&&(Tt.getViewEngine(this).detachShell(t,this),this.$skin=null)},toString:function(){var t=this.$meta,e=this.constructor;return(e.fullname||e.name)+"<"+t.tag+">("+t.guid+")"},get:function(t){return this._props[t]},set:function(t,e){var n=this._props,i=n[t];i!==e&&(n[t]=e,this.invalidate(1),rt.check(this,t,e,i))},cmd:function(t){this._commands||(this._commands=[]),this._commands.push({name:t,args:k.call(arguments,1)}),this.invalidate(8)},statics:{initialize:function(t,e,n,i){e===o||O.call(t,"_props")||(t._props={}),t.$flag=0,t.$meta={guid:Ct++,type:e,tag:n,ns:i||""}},destroy:function(t){if(!(512&t.$flag)){var e;t.off(),rt.clean(t);var n=t._bindings;if(n){for(e=n.length-1;0<=e;--e)n[e].destroy();n.length=0}var i,s=t._children;if(s){for(e=s.length-1;0<=e;--e)(i=s[e]).constructor.destroy(i),i._parent=null;t._children.length=0}t.$flag|=512}},getViewEngine:function(t){var e=t.$meta.ns;return null==Ot&&(Ot=kt.get(v)),e&&!Ot.hasNameSpace(e)?kt.get(e+":"+v):Ot},addEventListener:function(t,e,n){var i=t.$skin,s=Tt.getViewEngine(t);if(i&&s)if(s.mayDispatchEvent(i,e.type)){var r=n.flag&(f|c);e.listeners=e.listeners||[];var a=e.listeners[r];if(a)return void a.count++;a=j.getEventListener(t,n.flag),s.addEventListener(i,e.type,a,r&&j.flag2opts(r)),(e.listeners[r]=a).count=1}else e.listeners=null},removeEventListener:function(t,e,n){var i,s,r,a=t.$skin,o=e.listeners,l=Tt.getViewEngine(t);if(a&&o&&l&&l.mayDispatchEvent(a,e.type))if(2===arguments.length)for(i=0;i<o.length;++i)(r=o[i])&&(r.count=0,o[i]=null,l.removeEventListener(a,e.type,r,j.flag2opts(i)));else{if(!(r=o[s=n.flag&(f|c)]))return;r.count--,r.count<1&&(l.removeEventListener(a,e.type,r,j.flag2opts(s)),o[s]=null)}}}}),C(Tt.prototype,"style",{get:function(){return this._style||(this._style=new $t(this)),this._style}});var It=[],Mt=!1;function Pt(t){It.push(t),Mt||(Mt=!0,vt.pushCallbackQueue(Wt))}function Wt(){for(var t=0;t<It.length;++t){var e=It[t];e._parent||e.detach()}It.length=0,Mt=!1}function Yt(t){Yt.initialize(this,t)}function jt(t,e,n){this.scope=t,this.produce=e,this.consume=n,this.execute=this.execute.bind(this),this.invalidate=this.invalidate.bind(this),this.flag=1,this.execute(),this.scope.on("updating",this.execute)}I({constructor:Nt,statics:{findParent:Dt,flattenChildren:St},getParent:function(t){return t?Dt(this):this._parent},getChildren:function(t){return t?St(this):this._children?this._children.slice(0):[]},setChildren:function(t){var e,n=this._children,i=t?t.length:0,s=n?n.length:0;if(s===i){for(e=0;e<i&&n[e]===t[e];++e);if(e===i)return}if(s){for(e=0;e<s;++e)n[e]._parent=null,Pt(n[e]);n.length=0}if(i)for(e=0;e<i;++e)this.insertChild(t[e],null);else s&&this.invalidate(2)},insertChild:function(t,e){null==t&&W("The new child to be inserted into this parent must not be null!");var n,i,s,r=this._children;if(r||(r=[],this._children=r),s=r.length,null!=e){for(n=0;n<s&&(r[n]!==e||this!==e._parent);++n);if(n===s&&W("The child before which the new child is to be inserted is not a child of this parent!"),e===t)return}else n=s;if(t._parent)if(t._parent===this){for(i=0;i<s;++i)if(r[i]===t){if(i===n)return;r.splice(i,1),n=i<n?n-1:n,s=r.length;break}}else t._parent.removeChild(t);n<s?r.splice(n,0,t):r.push(t),(t._parent=this).invalidate(2)},appendChild:function(t){this.insertChild(t,null)},removeChild:function(t){null==t&&W("The new child to be removed from this parent must not be null!");var e=0,n=0,i=this._children;if(i)for(e=0,n=i.length;e<n&&(i[e]!==t||this!==t._parent);++e);e===n&&W("The child to be removed is not a child of this parent!"),e<n-1?i.splice(e,1):i.pop(),t._parent=null,Pt(t),this.invalidate(2)},replaceChild:function(t,e){null==t&&W("The new child to be inserted into this parent must not be null!");var n=0,i=0,s=0,r=this._children;if(r)for(n=0,s=r.length;n<s&&(r[n]!==e||this!==e._parent);++n);if(n===s&&W("The child to be replaced is not a child of this parent!"),t!==e){if(t._parent)if(t._parent===this){for(i=0;i<s;++i)if(r[i]===t){r.splice(i,1),n=i<n?n-1:n,s=r.length;break}}else t._parent.removeChild(t);Pt(e),e._parent=null,t._parent=this,r[n]=t,this.invalidate(2)}}}),I({constructor:Yt,extends:Tt,statics:{initialize:function(t,e){Tt.initialize(t,o,"",""),t.set("content",e||"")}},get:function(t){if("content"===t)return this._content},set:function(t,e){"content"===t&&e!==this._content&&(this._dirty=!0,this._content=e,this.invalidate(1))},update:function(){if(0==(this.$flag&r))return!1;0==(this.$flag&a)&&(this.$flag|=a,vt.insertDigestQueue(this))},digest:function(){if(0==(this.$flag&a))return!1;this.$skin&&this.$flag&u&&(Tt.getViewEngine(this).renderShell(this.$skin,this),this.$flag&=~u,this._dirty=!1);this.$skin&&!1&this.$flag&&(this.$flag|=p),this.$flag&=-49},getParent:Nt.prototype.getParent,toString:function(){var t=this._content;return'"'+((t=null==t?"":t.toString()).length<24?t:t.slice(0,21)+"...")+'"('+this.$meta.guid+")"}}),I({constructor:jt,statics:{record:function(t,e){var n=t._bindings;n?n.push(e):t._bindings=[e]},remove:function(t,e){var n=t._bindings;n&&n.length&&n.splice(n.lastIndexOf(e),1)},create:function(t,e,n){return new jt(t,e,n)}},destroy:function(){this.scope.off("updating",this.execute),bt(this)},execute:function(){if(0!==this.flag){mt(this);var t=this.produce.call(this.scope);xt(),this.consume.call(this.scope,t),this.flag=0}},invalidate:function(t){0<=this.keys.indexOf(t)&&(this.scope.invalidate(),this.flag=1)}});var zt={driveComponent:null,driveChildren:null,driveContent:null,transferProps:null,createContent:null,parseHTMX:null,parseJSX:null};function Vt(t,e,n){var i,s;function r(){i=!0}for(var a=null,o=e,l=[e];e;){if(i||(e.emit("throwed",{targets:l.slice(0),target:o,phase:n,error:t,stop:r}),i&&(a=e)),!(s=e.__extag_scopes__)||!s[0]){if(e.emit("error",{targets:l.slice(0),target:o,solver:a,phase:n,error:t,stop:r}),!i)throw X.error("Unsolved error in phase `"+n+"` from ",o),t;break}e=s[0],l.push(e)}}function Gt(t,e){Gt.initialize(this,t,e)}function Rt(t,e,n){Rt.initialize(this,t,e,n)}function Ut(t,e){Ut.initialize(this,t,e||x)}function Ft(){Gt.apply(this,arguments)}I({constructor:Gt,extends:Tt,mixins:[Nt.prototype],statics:{__extag_component_class__:!0,destroy:function(t){512&t.$flag||(t.emit("destroying"),Tt.destroy(t))},initialize:function(e,t,n){var i=e.constructor,s=i.prototype,r=i.attributes,a=i.__extag_template__;e.__extag_scopes__=n,et.applyAttributeDescriptors(s,r);var o,l=et.getAttributeDefaultValues(e);if(e._props=l,!a)try{if(i.template||("function"==typeof s.render?i.template="<x:frag>@{{this.render(this._props) ^}}</x:frag>":i.template="<x:frag></x:frag>"),"string"==typeof i.template)a=zt.parseHTMX(i.template,s);else{if("function"!=typeof i.template)throw new TypeError("The static template must be string or function");a=zt.parseJSX(i.template,s)}a&&(i.__extag_template__=a)}catch(t){Vt(t,e,"parsing")}if(Tt.initialize(e,"x:frag"!==a.tag?1:h,a.tag,a.ns||""),n&&n[0]&&n[0].context?(o=e.setup(n[0].context),null==e.context&&(e.context=n[0].context)):o=e.setup(),null!=o){if("object"!=typeof o)throw new TypeError("setup() should return object, not "+typeof o);for(var c in o){var f=T(o,c);f.get||f.set?C(e,c,f):e[c]=f.value}}t&&zt.driveContent(e,n,t),e.invalidate()}},get:function(t){var e=et.getAttrDesc(this,t);return e?(yt(this,t),e.get?e.get.call(this,this._props):this._props[t]):this._props[t]},set:function(t,e){var n,i=et.getAttrDesc(this,t),s=this._props;i?i.get?i.set&&(n=i.get.call(this,s),i.set.call(this,e,s),n!==(e=i.get.call(this,s))&&(this.invalidate(),this.emit("changed",t,e))):(n=s[t])!==e&&(s[t]=e,this.invalidate(),this.emit("changed",t,e)):(n=s[t])!==e&&(s[t]=e,this.invalidate(1),rt.check(this,t,e,n))},bind:function(t,e){return jt.create(this,t,e)},setup:function(t){t&&(this.context=t)},update:function(){if(0!=(this.$flag&r)){try{this.emit("updating")}catch(t){Vt(t,this,"updating")}if(0==(128&this.$flag)){try{var t=this.constructor.__extag_template__;zt.driveComponent(this,t)}catch(t){Vt(t,this,"starting")}this.$flag|=128}var e=this.$meta.type;if(0!==e&&1&this.$flag&&zt.transferProps(this),this._contents&&(this._contents.length?this._contents.length=0:this._contents=null),0==(this.$flag&a)){if(0===e&&this._parent&&2&this.$flag){var n=this.getParent(!0);n.$flag|=2,0==(n.$flag&a)&&(n.$flag|=a,vt.insertDigestQueue(n))}this.$flag|=a,vt.insertDigestQueue(this)}}},digest:function(){if(0!=(this.$flag&a)){if(this.$skin&&0!==this.$meta.type&&this.$flag&u)Tt.getViewEngine(this).renderShell(this.$skin,this),rt.clean(this),this._style&&rt.clean(this._style),this.$style&&rt.clean(this.$style),this.$props&&rt.clean(this.$props),this._commands&&(this._commands=null),this.$flag&=~u;this.$flag&=-49;var t=this._actions;if(0==(this.$flag&p)){if(0===this.$meta.type){var e=Nt.findParent(!0);e&&e.$skin&&(this.$flag|=p)}else this.$skin&&(this.$flag|=p);t&&t.mounted&&this.$flag&p&&vt.pushCallbackQueue(function(){try{this.emit("mounted")}catch(t){Vt(t,this,"mounted")}}.bind(this))}t&&t.updated&&vt.pushCallbackQueue(function(){try{this.emit("updated")}catch(t){Vt(t,this,"updated")}}.bind(this))}},accept:function(t,e){null==t?t=x:Array.isArray(t)||(t=[t]),(this._contents||t.length)&&(this._contents=t.slice(0),this._contents.scopes=e||[this],this.emit("contents",this._contents),this.invalidate(4))},addNamedPart:function(t,e){this[t]=e}}),I({constructor:Rt,extends:Gt,statics:{initialize:function(t,e,n,i){Gt.initialize(t,e,n,i),n[0].on("contents",t.onScopeContents.bind(t)),t.on("updating",t.onUpdating.bind(t)),t.scopes=n,t.collect()},template:"<x:frag></x:frag>"},collect:function(){var t,e,n,i,s,r,a=this.scopes;if(a[0]._contents){if(r=[],s=a[0]._contents,r.scopes=s.scopes,s&&0<s.length)for(e=this.get("name")||"",i=0,n=s.length;i<n;++i)null!=(t=s[i])&&e===(t.slot||"")&&r.push(t);this._collection=r,this.invalidate()}},onUpdating:function(){if(this._collection||this._contents){var t=this.scopes,e=this._contents,n=this._collection;n&&n.length?(t=n.scopes,zt.driveChildren(this,t,n,!!t)):e&&e.length?(t=e.scopes,n=e.slice(0),zt.driveChildren(this,t,n,!!t)):this.setChildren([]),this._collection=null,this._contents&&(this._contents.length?this._contents.length=0:this._contents=null)}else this.setChildren([])},onScopeContents:function(){this.collect()}}),I({constructor:Ut,extends:Tt,mixins:[Nt.prototype],statics:{__extag_fragment_class__:!0,initialize:function(t,e,n){Tt.initialize(t,0,"x:frag",""),t.__extag_scopes_=n,e&&zt.driveContent(t,n,e)}},accept:function(t,e){null==t?t=x:Array.isArray(t)||(t=[t]),zt.driveChildren(this,e||x,t,!1)},update:function(){if(0!=(this.$flag&r)&&0==(this.$flag&a)){if(this._parent&&2&this.$flag){var t=this.getParent(!0);t&&(t.$flag|=2,0==(t.$flag&a)&&(t.$flag|=a,vt.insertDigestQueue(t)))}this.$flag|=a,vt.insertDigestQueue(this)}},digest:function(){if(0==(this.$flag&a))return!1;this.$flag&=-49,rt.clean(this)}});var Lt={};function Qt(t,e){Qt.initialize(this,t,e||x)}I({constructor:Ft,extends:Gt,setup:function(){var e=this;e.on("contents",function(t){e.fragment||(e.fragment=new Ut),e.fragment.accept(t,t.scopes)}),e.on("updating",function(){var t=e.getPool();t.target?t.target.append(e):t.portals.push(e)},{once:!0}),e.on("destroying",function(){var t=e.getPool();t.target&&t.target.remove(e),e.fragment&&e.fragment.setChildren([])})},getPool:function(){var t=this.get("target"),e=Lt[t];return e||(e=Lt[t]={portals:[]}),e}}),Ft.Target=I({extends:Gt,statics:{fullname:"Portal.Target"},setup:function(){var i=this;i.on("updating",function(){var t=i.get("name"),e=Lt[t];if(e)if(!e.target&&e.portals.length){for(var n=0;n<e.portals.length;++n)e.portals[n].fragment&&i.append(e.portals[n]);e.portals.length=0}else W('A portal target with the same name="'+t+'" already exists');else Lt[t]={target:i,portals:[]}},{once:!0}),i.on("destroying",function(){var t=i.get("name");delete Lt[t]})},append:function(t){t.fragment||(t.fragment=new Ut),this.appendChild(t.fragment)},remove:function(t){t.fragment&&this.removeChild(t.fragment)}}),I({constructor:Qt,extends:Tt,mixins:[Nt.prototype],statics:{__extag_element_class__:!0,initialize:function(t,e,n){Tt.initialize(t,1,e.tag,e.ns),t.__extag_scopes__=n,e&&zt.driveContent(t,n,e)}},accept:function(t,e){null==t?t=x:Array.isArray(t)||(t=[t]),zt.driveChildren(this,e||x,t,!1)},update:function(){if(0==(this.$flag&r))return!1;zt.transferProps(this),0==(this.$flag&a)&&(this.$flag|=a,vt.insertDigestQueue(this))},digest:function(){if(0==(this.$flag&a))return!1;this.$skin&&this.$flag&u&&(Tt.getViewEngine(this).renderShell(this.$skin,this),rt.clean(this),this._style&&rt.clean(this._style),this._commands&&(this._commands=null),this.$flag&=~u);this.$skin&&!1&this.$flag&&(this.$flag|=p),this.$flag&=-49}});var Xt,qt={ASSIGN:-1,ONE_TIME:0,ONE_WAY:1,TWO_WAY:2,ANY_WAY:3};function Ht(t,e){return t.converters&&t.converters.length?function(t,e,n){for(var i=0;i<t.length;++i)n=Xt(t[i],D(e,n));return n}(t.converters,e,Xt(t.evaluator,e)):Xt(t.evaluator,e)}function Zt(t){this.pattern=t}function Bt(t){this.pattern=t}function Jt(t){return{once:0<=t.indexOf("once"),capture:0<=t.indexOf("capture"),passive:0<=t.indexOf("passive")}}function Kt(t,e){"object"==typeof e&&e&&t&&t.length&&(0<=t.indexOf("stop")&&e.stopPropagation&&e.stopPropagation(),0<=t.indexOf("prev")&&e.preventDefault&&e.preventDefault())}function te(t,e){this.binding=t,this.pattern=e}Xt=function(t,e){return t.apply(e[0],e)},I({constructor:Zt,statics:{MODES:qt,create:function(t){return new Zt(t)}},connect:function(t,e,n){this.flag=0,this.scopes=n,this.target=e,this.targetProp=t;var i=this.pattern;i.mode!==qt.ASSIGN?(this.execute=this.execute.bind(this),this.invalidate=this.invalidate.bind(this),i.mode===qt.TWO_WAY&&(this.backward=this.backward.bind(this),et.getAttrDesc(this.target,this.targetProp)&&this.target.on("changed",this.backward)),this.flag=1,this.execute(),n[0].on("updating",this.execute),jt.record(e,this)):this.target.set(this.targetProp,Ht(i,n))},replace:function(t){if(1<t.length&&t.length===this.scopes.length){for(var e,n=t.length-1;0<=n;--n)if(t[n]!==this.scopes[n]){e=!0;break}e&&(this.scopes=t,this.flag=1,this.execute())}},destroy:function(){var t=this.scopes;this.pattern.mode===qt.TWO_WAY&&et.getAttrDesc(this.target,this.targetProp)&&this.target.off("changed",this.backward),t[0].off("updating",this.execute),bt(this)},execute:function(){var t=this.pattern;if(0!==this.flag||t.mode===qt.ANY_WAY){mt(this);var e=Ht(t,this.scopes);xt(),this.target.set(this.targetProp,e),this.flag=0,t.mode===qt.ONE_TIME&&this.destroy()}},backward:function(t){if(t===this.targetProp){var e=this.target[this.targetProp],n=this.pattern.evaluator.path,i=n.from,s=n.length,r=this.scopes;2===s?(0<=i?r[i]:r[0].constructor.resources).set(n[1],e):2<s&&(0<=i?g.search(n.slice(1,s-1),r[i],!0):g.search(n.slice(1,s-1),r[0].constructor.resources,!0)).set(n[s-1],e)}},invalidate:function(t){this.keys&&0<=this.keys.indexOf(t)&&(this.scopes[0].invalidate(),this.flag=1)}}),I({constructor:Bt,statics:{create:function(t){return new Bt(t)}},connect:function(t,e,n){this.type=t,this.target=e;var i=this.pattern,s=i.handler,r=i.evaluator,a=i.modifiers;if(s){var o=n[0][s];if(!o)return;a&&a.length?"bind"===a[0]&&1===a.length?this.handler=o.bind(n[0]):(this.handler=function(t){Kt(a,t),0<=a.indexOf("bind")?o.apply(n[0],arguments):o.apply(null,arguments)},this.options=Jt(a)):this.handler=o}else n.length<=1?a&&a.length?(this.handler=function(t){Kt(a,t),r.apply(n[0],D(n,t))},this.options=Jt(a)):this.handler=function(t){r.apply(n[0],D(n,t))}:(this.scopes=n,a&&a.length?(this.handler=function(t){Kt(a,t),r.apply(n[0],D(n,t))}.bind(this),this.options=Jt(a)):this.handler=function(t){r.apply(n[0],D(n,t))}.bind(this));this.handler&&(this.options?e.on(t,this.handler,this.options):e.on(t,this.handler),jt.record(e,this))},replace:function(t){if(this.scopes&&1<t.length&&this.scopes.length===t.length)for(var e=1;e<t.length;++e)this.scopes[e]=t[e]},destroy:function(){var t=this.handler;t&&(this.options?this.target.off(this.type,t,this.options):this.target.off(this.type,t))}}),I({constructor:te,connect:function(t,e,n){this.binding.create(this.pattern).connect(t,e,n)}});var ee=Zt.MODES;function ne(t){this.pattern=t}function ie(t,e){ie.initialize(this,t,e)}function se(t,e){if(!Y(t))return new Yt(t);var n,i,s,r=t.useExpr;return t.xif||t.xfor||t.xtype?s=new ie(t,e):r&&t.type===te?"frag"===(i=t.expr).pattern.target?(s=new Ut(null,e),i.connect("accept",s,e)):(s=new Yt(""),i.connect("content",s,e)):(s=(n=t.type)&&n!==Qt?new n(t,e):new Qt(t,e),t.name&&(s.$owner=e[0],e[0].addNamedPart(t.name,s))),s}function re(t,e,n,i){var s,r,a=t._events;if(a)for(s in a)"function"==typeof(r=a[s])?t.off(s,r):Array.isArray(r)&&t.off(s,r[0],r[1]);if(n)for(s in n)r=n[s],i&&r instanceof te?r.connect(s,t,e):"function"==typeof r?t.on(s,r):Array.isArray(r)&&t.on(s,r[0],r[1]);i||(t._events=n)}function ae(t,e,n,i){var s,r,a,o=t._props;if(o)if(t instanceof Gt)for(s in o)n&&s in n||((r=et.getAttrDesc(t,s))?t.set(s,et.getAttributeDefaultValue(r)):t.set(s,null));else for(s in o)n&&s in n||t.set(s,null);if(n)for(s in n)a=n[s],i&&a instanceof te?a.connect(s,t,e):t.set(s,a)}function oe(t,e){var n=t.$meta;return n.type===o&&e.__extag_node__!==d||t.__extag_key__===e.xkey&&(e.type?t.constructor===e.type:n.tag===e.tag&&n.ns===e.ns)}function le(t,e,n){Y(e)?(ae(t,n,e.attrs),re(t,n,e.events),fe(t,n,e.contents,e.useExpr,t instanceof Gt)):t.set("content",e)}function ce(t,e,n){var i=n._children||x,s=t||x;s.length&&(s=function t(e,n,i){var s,r,a=e.length;if(!n)for(s=0;s<a;++s)if(Array.isArray(e[s])){n=[];break}if(n)for(s=0;s<a;++s)r=e[s],Array.isArray(r)?t(r,n,i):(n.push(r),i&&Y(r)&&!r.ns&&(r.ns=i));else for(s=0;s<a;++s)r=e[s],i&&Y(r)&&!r.ns&&(r.ns=i);return n||e}(s,null,n.$meta.ns));for(var r,a,o,l,c=new Array(s.length),f=0,h=i.length-1,u=0,p=s.length-1,g=i[f],d=i[h],v=s[u],_=s[p];f<=h&&u<=p;)if(null==g)g=i[++f];else if(null==d)d=i[--h];else if(oe(g,v))le(c[u]=g,v,e),g=i[++f],v=s[++u];else if(oe(d,_))le(c[p]=d,_,e),d=i[--h],_=s[--p];else if(oe(g,_))le(c[p]=g,_,e),g=i[++f],_=s[--p];else if(oe(d,v))le(c[u]=d,v,e),d=i[--h],v=s[++u];else{if(!a)for(a={},l=f;l<=h;++l)(o=i[l].__extag_key__)&&(a[o]=l);null!=(l=(o=v.xkey)&&a[o])&&oe(i[l]||m,v)?c[u]=i[l]:((r=se(v,e)).__extag_key__=o,c[u]=r),v=s[++u]}if(h<f)for(;u<=p;)(r=se(v,e)).__extag_key__=v.xkey,c[u]=r,v=s[++u];return c}function fe(t,e,n,i,s){var r;if(n||(n=x),s)t.accept(n,e);else{if(i){if(1===n.length){var a=n[0];if(a instanceof te&&"frag"===a.pattern.target)return void(t instanceof Gt?a.connect(function(t,e){fe(this,e,t,!1)},t,e):a.connect("accept",t,e))}r=function(t,e){var n,i,s,r=[];if(t&&t.length)for(n=0,i=t.length;n<i;++n)(s=se(t[n],e))&&r.push(s);return r}(n,e)}else r=ce(n,e,t);t.setChildren(r)}}I({constructor:ne,statics:{create:function(t){return new ne(t)}},connect:function(t,e,n){this.scopes=n,this.target=e,this.property=t,this.flag=1;var i,s,r,a=this.pattern;for(i=0,s=a.length;i<s;++i)(r=a[i])instanceof te&&(null!=this.mode&&this.mode!==r.pattern.mode&&W("all embedded expressions must have same data-binding mode for TextBinding"),this.mode=r.pattern.mode);null!=this.mode&&this.mode!==ee.ASSIGN?(this.invalidate=this.invalidate.bind(this),this.execute=this.execute.bind(this),this.execute(),n[0].on("updating",this.execute),jt.record(e,this)):this.execute()},replace:function(t){1<t.length&&t.length===this.scopes.length&&(this.scopes=t,this.flag=1,this.execute())},destroy:function(){this.scopes[0].off("updating",this.execute),bt(this)},execute:function(){if(0!==this.flag||this.mode===ee.ANY_WAY){mt(this);var t,e,n,i=[],s=this.pattern;for(t=0,e=s.length;t<e;++t)(n=s[t])instanceof te&&(n=Ht(n.pattern,this.scopes)),i.push(n);xt(),this.target.set(this.property,i.join("")),this.flag=0,this.mode===ee.ONE_TIME&&this.destroy()}},invalidate:function(t){this.keys&&0<=this.keys.indexOf(t)&&(this.scopes[0].invalidate(),this.flag=1)}}),I({constructor:ie,extends:Gt,statics:{initialize:function(t,e,n){if(Gt.initialize(t),t.mode=0,e){t.scopes=n;var i=N({},e);delete(t.template=i).xtype,delete i.xkey,delete i.xfor,delete i.xif,t.set("condition",!0),e.xif&&(t.mode=1,i.xif.connect("condition",t,n)),e.xfor&&(t.mode=2,t.varaibles=e.xfor[0],e.xfor[1].connect("iterable",t,n),e.xkey&&(t.keyExpr=e.xkey)),e.xtype&&(t.mode=t.mode||1,t.xtype=!0,e.xtype.connect("component",t,n)),t.refresh(),n[0].on("updating",function(){t.refresh()})}},template:"<x:frag></x:frag>"},refresh:function(){if(this.mode&&(this.hasDirty("condintion")||this.hasDirty("component")||this.hasDirty("iterable")||this.hasDirty("xtype"))){var t=this.get("condition"),e=this.get("component"),n=this.template,i=this.scopes,s=[];if(t){if(this.xtype){if(!e||!e.__extag_component_class__)return void this.setChildren(s);n=N({},n,{type:e})}if(1===this.mode)return(a=zt.createContent(n,i,!0))&&s.push(a),void this.setChildren(s);var r,a,o,l,c,f,h,u={},p=this.get("iterable")||[],g=this._children||[],d=this.varaibles,v=this.keyExpr;for(f=0,c=g.length;f<c;++f)"__extag_key__"in g[f]&&(u[l=g[f].__extag_key__]=f);for(f=0,c=p.length;f<c;++f){a=l=null,o=p[f];var _,m={};m[d[0]]=o,d[1]&&(m[d[1]]=f),h=i.concat([m]),v&&null!=(r=u[l=Ht(v.pattern,h)])&&(a=g[r]),a?(_=(h=a.__extag_scopes__)[h.length-1]).assign(m):(_=new wt(m),h[h.length-1]=_,(a=zt.createContent(n,h)).__extag_key__=l,a.__extag_scopes__=h),s.push(a)}this.setChildren(s)}else this.setChildren(s)}}});var he=Zt.MODES;function ue(t){this.pattern=t}function pe(t,e,n){ue.create(n).connect("class",t,e)}function ge(t){var e=typeof t;if("object"===e)return t;if("string"===e){var n,i,s,r,a,o={},l=t.split(";");for(s=0;s<l.length;++s)0<(i=(n=l[s]).indexOf(":"))&&(r=n.slice(0,i).trim(),a=n.slice(i+1).trim(),r&&(o[r]=a));return o}}I({constructor:ue,statics:{create:function(t){return new ue(t)}},connect:function(t,e,n){this.scopes=n,this.target=e,this.property=t,this.flag=1;var i,s,r=this.pattern;for(i in r)(s=r[i])instanceof te&&(null!=this.mode&&this.mode!==s.pattern.mode&&W("all embedded expressions must have same data-binding mode for ClassBinding"),this.mode=s.pattern.mode);null!=this.mode&&this.mode!==he.ASSIGN?(this.invalidate=this.invalidate.bind(this),this.execute=this.execute.bind(this),this.execute(),n[0].on("updating",this.execute),jt.record(e,this)):this.execute()},replace:function(t){1<t.length&&t.length===this.scopes.length&&(this.scopes=t,this.flag=1,this.execute())},destroy:function(){this.scopes[0].off("updating",this.execute),bt(this)},execute:function(){if(0!==this.flag||this.mode===he.ANY_WAY){mt(this);var t,e,n={},i=this.pattern;for(t in i)(e=i[t])instanceof te&&(e=Ht(e.pattern,this.scopes)),n[t]=e;xt(),this.target.set(this.property,n),this.flag=0,this.mode===he.ONE_TIME&&this.destroy()}},invalidate:function(t){this.keys&&0<=this.keys.indexOf(t)&&(this.scopes[0].invalidate(),this.flag=1)}}),zt.createContent=se,zt.driveChildren=fe,zt.driveContent=function(t,e,n){var i=n.useExpr;n.events&&re(t,e,n.events,i),n.attrs&&ae(t,e,n.attrs,i),i&&(n.style&&ae(t.style,e,n.style,i),n.classes&&pe(t,e,n.classes)),n.contents&&fe(t,e,n.contents,i,t instanceof Gt)},zt.driveComponent=function(t,e){var n=[t],i=e.useExpr;e.events&&re(t,n,e.events,i),e.attrs&&(t.$props=new $t(t),ae(t.$props,n,e.attrs,i)),i&&(e.style&&(t.$style=new $t(t),ae(t.$style,n,e.style,i)),e.classes&&(t.$props=t.$props||new $t(t),pe(t.$props,n,e.classes))),e.contents&&fe(t,n,e.contents,i)},zt.transferProps=function(t){var e;if(t.$meta.type!==o&&(t.hasDirty("style")&&(rt.clean(t,"style"),e=ge(t.get("style")),t.style.reset(e)),t.$props&&t.constructor.__extag_component_class__)){var n,i,s,r=t.$props;if(r.hasDirty("style")){var a=((s=(n=t)[i="$style"])||(s=new $t(n),n[i]=s),s);rt.clean(r,"style"),e=ge(e=r.get("style")),a.reset(e)}}};var de=/[\w).+\-_$\]]/,ve="abstract arguments boolean break byte case catch char class const continue debugger default delete do double else enum eval export extends false final finally float for function goto if implements import in instanceof int interface let long native new null package private protected public return short static super switch synchronized this throw throws transient true try typeof undefined var void volatile while with yield isNaN isFinite parseFloat parseInt Array Date Infinity Math NaN Number Object String Boolean RegExp JSON",_e={};function me(t,e){for(var n,i=t.length;e<i;){if(!(32===(n=t.charCodeAt(e))||9<=n&&n<=13))return 44!==n&&123!==n;--e}}function xe(t,e){for(var n="$"+e;0<=t.indexOf(n);)n="$"+n;return n}function ye(t,e){for(var n=e.length-1;0<=n;--n)if("string"==typeof e[n]){if(t===e[n])return n}else if(0<=e[n].indexOf(t))return n;return-1}function be(t,e){for(var n,i,s,r=t.length;e<r;)if(32===(n=t.charCodeAt(e))||9<=n&&n<=13)s=!0,++e;else{if(46===n)i&&W("Unexpected token '.'.",{code:1001,expr:t}),i=!(s=!1);else{if(!(we(n)||48<=n&&n<=57)){i&&W("Unexpected token '"+t[e]+"'.",{code:1001,expr:t});break}if(s&&!i){--e;break}i=s=!1}++e}return e}function we(t){return 97<=t&&t<=122||65<=t&&t<=90||95===t||36===t}function Ae(t,e,n){for(var i=e.length;n<i;){if(e.charCodeAt(n)===t&&92!==e.charCodeAt(n-1))return n;++n}return i}function $e(t,e){for(var n;0<=--e&&(32===(n=t.charCodeAt(e))||9<=n&&n<=13););return!n||!de.test(String.fromCharCode(n))}function Ee(t,e,n,i){try{t.push(e.join("\n"));var s=Function.apply(null,t);return n&&(s.path=n),s}catch(t){W(t,{code:1001,expr:i,desc:"Illegal expression `"+i+"`."})}}!function(){for(var t=ve.split(/\s+/),e=0,n=t.length;e<n;++e)_e[t[e]]=!0}();var ke={regexStarts:$e,gotoEnding:Ae,parse:function(t,e,n,i){var s,r,a=[],o=[];for(s=0;s<n.length;++s)"$"===n[s][0]?o.push(n[s]):o.push(xe(t,s));var l=o.slice(0),c=e.constructor.resources,f=g.parse(t);if(f&&f.length&&(!O.call(_e,f[0])||"this"===f[0]))return f.from=ye(f[0],n),f.from<0?c&&O.call(c,f[0])?a.push("var "+f[0]+" = this.constructor.resources."+f[0]+";"):(f.unshift("this"),f.from=0):"string"!=typeof n[f.from]&&f.unshift(o[f.from]),a.push("return "+f.join(".")),Ee(o,a,f,i);var h,u=0,p=function(t){for(var e,n,i,s=[],r=t.length,a=0;a<r;)if(n=e,32===(e=t.charCodeAt(a))||9<=e&&e<=13)++a;else{switch(e){case 39:case 34:(a=Ae(e,t,a+1))===r&&W("Unclosed "+String.fromCharCode(e)+" .",{code:1001,expr:t});break;case 47:$e(t,a)&&(a=Ae(e,t,a+1))===r&&W("Unclosed "+String.fromCharCode(e)+" .",{code:1001,expr:t});break;default:if(46===n){a=be(t,a+1);continue}if(we(e)){i=be(t,a+1),58!==t.charCodeAt(i)?s.push(a,i):me(t,a-1)&&s.push(a,i),a=i;continue}}++a}return s}(t);for(r=0;r<p.length;r+=2)p[r+1]<0||(h=t.slice(p[r]+u,p[r+1]+u),f=g.parse(h.replace(b,"")),O.call(_e,f[0])||((s=ye(f[0],n))<0?c&&O.call(c,f[0])?(a.push("var "+f[0]+" = this.constructor.resources."+f[0]+";"),l.push(f[0])):(t=t.slice(0,p[r]+u)+"this."+h+t.slice(p[r+1]+u),u+=5):"string"!=typeof n[s]&&(t=t.slice(0,p[r]+u)+o[s]+"."+h+t.slice(p[r+1]+u),u+=o[s].length+1)));return a.push("return "+t),Ee(o,a,null,i)}},Ce=Zt.MODES,Oe={parse:function(t,e,n){var i,s,r,a,o,l,c=-1,f=t.length;if(t[0]===y.TWO_WAY?(c=Ce.TWO_WAY,t=t.slice(1,f)):t[f-1]===y.ANY_WAY?(c=Ce.ANY_WAY,t=t.slice(0,f-1)):t[f-1]===y.ASSIGN?(c=Ce.ASSIGN,t=t.slice(0,f-1)):t[f-1]===y.ONE_TIME?(c=Ce.ONE_TIME,t=t.slice(0,f-1)):c=Ce.ONE_WAY,c===Ce.TWO_WAY)g.test(t.trim())||W("Invalid two-way binding expression!",{code:1001,expr:arguments[0],desc:"`"+arguments[0]+"` is not a valid two-way binding expression. Must be a property name or path."}),a=ke.parse(t,e,n,arguments[0]);else if(t.indexOf(y.CONVERTER)<0)a=ke.parse(t,e,n,arguments[0]);else if(o=t.split(y.CONVERTER),a=ke.parse(o[0],e,n,arguments[0]),1<o.length)for(i=1;i<o.length;++i){(l=o[i].trim())||W("Converter must not be empty!",{code:1001,expr:arguments[0],desc:"Empty converter in the expression `"+arguments[0]+"` is not allowed."});for(var h="$value";0<=t.indexOf(h);)h="$"+h;var u=l.indexOf("(");l=0<u?l.slice(0,u+1)+h+","+l.slice(u+1):l+"("+h+")",r=ke.parse(l,e,n.concat([h]),arguments[0]),(s=s||[]).push(r)}var p={mode:c,evaluator:a};return s&&s.length&&(p.converters=s),p}},Te={parse:function(t,e,n){var i=t.indexOf(y.MODIFIER)<0?[t]:t.split(y.MODIFIER);i[0]=i[0].trim();var s={};if(E.test(i[0])?s.handler=i[0].replace($,""):((n=n.slice(0)).push("$event"),s.evaluator=ke.parse(i[0],e,n)),1<i.length){for(var r=[],a=1;a<i.length;++a)r.push(i[a].trim());s.modifiers=r}return s}},Ne={tryParse:function(t){return"false"!==t&&("true"===t||(isNaN(t)?void 0:Number(t)))}},De=Zt.MODES;function Se(t){this.pattern=t}I({constructor:Se,statics:{create:function(t){return new Se(t)}},connect:function(t,e,n){this.flag=0,this.scopes=n,this.target=e,this.method="function"==typeof t?t:e[t];var i=this.pattern;i.mode!==De.ASSIGN?(this.execute=this.execute.bind(this),this.invalidate=this.invalidate.bind(this),this.flag=1,this.execute(),n[0].on("updating",this.execute),jt.record(e,this)):this.target.set(this.targetProp,Ht(i,n))},destroy:function(){this.scopes[0].off("updating",this.execute),bt(this)},execute:function(){var t=this.pattern;if(0!==this.flag||t.mode===De.ANY_WAY){mt(this);var e=Ht(t,this.scopes);xt(),this.method.call(this.target,e,this.scopes),this.flag=0,t.mode===De.ONE_TIME&&this.destroy()}},invalidate:function(t){this.keys&&0<=this.keys.indexOf(t)&&(this.scopes[0].invalidate(),this.flag=1)}});var Ie=Zt.MODES;function Me(t){t!==y.DATA&&t!==y.TEXT&&W(t+" is not allowed in expr() for data binding")}function Pe(t,e){var n,i,s,r=t.attrs;if(t.xif&&(Me((s=t.xif.args)[0]),t.xif=je(s,t,e)),t.xfor&&(Array.isArray(t.xfor[0])||(t.xfor[0]=t.xfor[0].replace(b,"").split(",")),Me((s=t.xfor[1].args)[0]),t.xfor[1]=je(s,t,e),t.identifiers=t.identifiers.concat([t.xfor[0]])),t.xkey&&(Me((s=t.xkey.args)[0]),t.xkey=je(s,t,e)),r)for(i in r)(n=r[i])&&"object"==typeof n&&(n.__extag_expr__===te?(Me((s=n.args)[0]),r[i]=je(s,t,e)):"style"===i&&(t[i]=Ye(n,t,e),delete r[i]));if(null==t.type&&null==t.xtype)switch(t.tag){case"x:slot":t.type=Rt;break;case"x:frag":t.type=Ut}t.events&&function(t,e){var n,i,s,r,a=t.events;for(n in a)(r=a[n])&&"object"==typeof r&&r.__extag_expr__===te&&((s=r.args)[0]!==y.EVENT&&W(s[0]+" is not allowed in expr() for event binding"),(i=je(s,t,e))&&(a[n]=i))}(t,e)}function We(t,e,n){var i=typeof t;return"string"===i?ke.parse(t,e,n):"function"===i?t:void W("evaluator must be string or function")}function Ye(t,e,n){var i,s;for(i in t)(s=t[i])&&"object"==typeof s&&s.__extag_expr__===te&&(t[i]=je(s.args,e,n));return t}function je(t,e,n){t.length<2&&W("Unexpected arguments for expr()");var i,s,r,a=t[0],o=t[1],l=typeof o;if(a===y.DATA||a===y.FRAGMENT){if(a===y.FRAGMENT&&(i="frag"),2===t.length&&"string"===l)return i||o[0]!==y.TWO_WAY?null!=(r=Ne.tryParse(o.trim()))?r:new te("frag"===((s=Oe.parse(o,n,e.identifiers)).target=i)?Se:Zt,s):(g.test(o.slice(1))||W("Invalid two-way binding expression!",{code:1001,expr:arguments[0],desc:"`"+arguments[0]+"` is not a valid two-way binding expression. Must be a property name or path."}),new te(Zt,s={mode:Ie.TWO_WAY,evaluator:We(o.slice(1),n,e.identifiers)}));switch(t[t.length-1]){case y.ASSIGN:a=Ie.ASSIGN,t=t.slice(0,-1);break;case y.ANY_WAY:a=Ie.ANY_WAY,t=t.slice(0,-1);break;case y.ONE_TIME:a=Ie.ONE_TIME,t=t.slice(0,-1);break;default:a=Ie.ONE_WAY}return new te("frag"===i?Se:Zt,s={mode:a,target:i,evaluator:We(o,n,e.identifiers),converters:t.length<=2?null:function(t,e,n){for(var i,s=[],r=0;r<t.length;++r)i=We(t[r],e,n),s.push(i);return s}(t.slice(2),n,e.identifiers)})}if(a===y.EVENT)return"string"===l&&2===t.length?s=Te.parse(o,n,e.identifiers):"function"===l?s={evaluator:We(o,n,e.identifiers),modifiers:2<t.length?t.slice(2):null}:W("Unexpected arguments for expr()"),new te(Bt,s);if(a===y.TEXT){s=[];for(var c=1;c<t.length;++c)(o=t[c])&&"object"==typeof o&&o.__extag_expr__&&(o=je(o.args,e,n)),s.push(o);return new te(ne,s)}W('The first argument of expr() should be one of "@", "+", "#", "{}"')}var ze={xns:!0,xif:!0,xfor:!0,xkey:!0,xname:!0,xslot:!0,xtype:!0,events:!0};function Ve(t,e,n){var i={__extag_node__:d},s=typeof t;if("string"===s){var r=t.indexOf(":");if(r<0)i.ns="",i.tag=t;else{if("x"===t.slice(0,r))switch(t){case"x:slot":i.tag=t,i.type=Rt;break;case"x:frag":i.tag=t,i.type=Ut}i.type||(i.ns=t.slice(0,r),i.tag=t.slice(r+1))}}else if("function"===s)if(t.__extag_component_class__||t===Ut)i.type=t;else{var a=kt.get(_);a&&(i.type=a.getHookableComponentClass(t)),"function"==typeof i.type&&i.type.__extag_component_class__||W("component class is not found.")}else W("The first argument must be string, function, component class or constructor.");if(null!=e){e.xns&&(i.ns=e.xns),e.xif&&(i.xif=e.xif),e.xfor&&(i.xfor=e.xfor),e.xkey&&(i.xkey=e.xkey),e.xname&&(i.name=e.xname),e.xslot&&(i.slot=e.xslot),e.xtype&&(e.xtype instanceof te?i.xtype=e.xtype:i.type=e.xtype),e.events&&(i.events=e.events);var o,l={};for(o in e)!ze[o]&&O.call(e,o)&&(l[o]=e[o]);i.attrs=l}return n&&(n=3<arguments.length||Array.isArray(n)?function t(e,n){var i,s=e.length;if(!n)for(i=0;i<s;++i)if(Array.isArray(e[i])){n=[];break}if(n)for(i=0;i<s;++i){var r=e[i];Array.isArray(r)?t(r,n):n.push(r)}return n||e}(n=k.call(arguments,2)):[n],i.contents=n),i}function Ge(){return{args:k.call(arguments,0),__extag_expr__:te}}var Re={node:Ve,expr:Ge,parse:function(t,e){var n=t(Ve,Ge);return n.__extag_node__!==d&&W("template root must be a tag node"),n.useExpr=!0,n.identifiers=["this"],Pe(n,e),function t(e,n){var i,s,r=e.contents;if(r&&r.length)for(i=r.length-1;0<=i;--i)if("object"==typeof(s=r[i])){if(s.__extag_node__===d){s.useExpr=!0,s.identifiers=e.identifiers,Pe(s,n),t(s,n);continue}if(s.__extag_expr__===te){var a=s.args[0];a!==y.DATA&&a!==y.FRAGMENT&&W(a+" is not allowed in expr() for text or fragment binding"),r[i]={__extag_node__:d,useExpr:!0,type:te,expr:je(s.args,e,n)}}}}(n,e),n.type&&(n.type===Ut?n.type=null:W("component can not be used as root tag of another component template.")),(n.xif||n.xfor||n.xkey)&&W("`xif`, `xfor`, `xkey` can not be used on root tag of component template."),n}};zt.parseJSX=Re.parse;var Ue=/\s*\n\s*/g,Fe=new RegExp(y.DATA+"\\"+"{}"[0]+"(\\s|.)*?\\"+"{}"[1]),Le={like:function(t){return Fe.test(t)},parse:function(t,e,n){for(var i,s,r,a,o,l,c=[],f=0,h=t.length,u=0,p=0;u<h;){switch(r=s,s=t.charCodeAt(u)){case 125:a&&0===--p&&(f<i&&(l=(l=t.slice(f,i)).replace(Ue," "))&&(l=P(l),c.push(l)),123===t.charCodeAt(i+2)&&125===t.charCodeAt(u-1)?(o=Oe.parse(t.slice(i+3,u-1),e,n)).target="frag":(o=Oe.parse(t.slice(i+2,u),e,n)).target="text",c.push(new te("frag"===o.target?Se:Zt,o)),f=i=u+1,a=!1);break;case 123:a?(64===r&&W("Unclosed @{ .",{code:1001,expr:t}),++p):64===r&&(i=u-1,a=!0,p=1);break;case 39:case 34:a&&(u=ke.gotoEnding(s,t,u+1))===h&&W("Unclosed "+String.fromCharCode(s)+" .",{code:1001,expr:t});break;case 47:a&&ke.regexStarts(t,u)&&(u=ke.gotoEnding(s,t,u+1))===h&&W("Unclosed "+String.fromCharCode(s)+" .",{code:1001,expr:t})}++u}return a&&W("Unclosed @{ .",{code:1001,expr:t}),0<f&&f<h&&(l=(l=t.slice(f,h)).replace(Ue," "))&&(l=P(l),c.push(l)),c.length?c:null}},Qe=/;/g,Xe=/^[a-z0-9\-_]+$/i,qe={parse:function(t,e,n,i){var s,r,a,o,l,c,f,h,u={},p=t.split(Qe);for(c=0,l=p.length;c<l;++c)if((h=(r=p[c].trim()).indexOf(":"))<0){if(r=r.trim())for(o=r.split(b),f=0;f<o.length;++f)u[o[f]]=!0}else{a=r.slice(0,h).trim(),t=r.slice(h+1).trim(),a&&Xe.test(a)||W("Illegal "+(i?"x:style":"x:class")+" expression.",{code:1001,expr:a||arguments[0]});try{if(!Le.like(t)){u[a]=i?t:Ne.tryParse(t);continue}s=Le.parse(t,e,n)}catch(t){throw 1001===t.code&&(t.expr="@{0}".replace("0",t.expr)),t}s?1===s.length?u[a]=s[0]:i?u[a]=new te(ne,s):W("Illegal x:class expression.",{code:1001,expr:t}):u[a]=i?t:Ne.tryParse(t)}return u}},He=/^\(.+\)$/,Ze=/\s+of\s+/,Be=/,/,Je=/^[\w\$\_]+$/,Ke=/[a-zA-Z]/,tn=/[\s/>]/,en=/[\s\/]+/,nn=/^x:/,sn={html:"http://www.w3.org/1999/xhtml",math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};var rn={"!":!0,br:!0,hr:!0,area:!0,base:!0,img:!0,input:!0,link:!0,meta:!0,basefont:!0,param:!0,col:!0,frame:!0,embed:!0,keygen:!0,source:!0,command:!0,track:!0,wbr:!0},an={"x:ns":!0,"x:if":!0,"x:for":!0,"x:key":!0,"x:name":!0,"x:slot":!0,"x:type":!0,"x:class":!0,"x:style":!0};function on(t,e){var n=t[e];return null==n&&(t[e]=n={}),n}function ln(t,e){var n=g.search(t,e.constructor.resources);if("function"==typeof n){if(n.__extag_component_class__)return n;var i=kt.get(_);if(i&&"function"==typeof(n=i.getHookableComponentClass(n))&&n.__extag_component_class__)return n}}function cn(t,e,n,i,s){var r;if("x:class"===t)n.classes=qe.parse(e,i,s,!1);else if("x:style"===t)n.style=qe.parse(e,i,s,!0);else if("x:type"===t){var a=ln(e,i);a?n.type=a:(r=Oe.parse(e,i,s),n.xtype=new te(Zt,r))}else if("x:name"===t)n.name=e;else if("x:slot"===t)n.slot=e;else if("x:key"===t)r=Oe.parse(e,i,s),n.xkey=new te(Zt,r);else if("x:for"===t){var o=e.trim().split(Ze);2!==o.length&&W('Illegal x:for="'+e+'".',{code:1001,expr:e}),r=o[1].trim(),o[0]=o[0].trim(),o=He.test(o[0])?o[0].slice(1,-1).split(Be):[o[0]];for(var l=0;l<o.length;++l)o[l]=o[l].trim(),Je.test(o[l])||W('Illegal x:for="'+e+'".',{code:1001,expr:e});(r=r&&Oe.parse(r,i,s))?n.xfor=[o,new te(Zt,r)]:W('Illegal x:for="'+e+'".',{code:1001,expr:e}),n.identifiers=s.slice(0),n.identifiers.push(o)}else"x:if"===t?(r=Oe.parse(e,i,s))?n.xif=new te(Zt,r):W('Illegal x:if="'+e+'".',{code:1001,expr:e}):"x:ns"===t&&(n.ns=e)}function fn(t,e,n,i,s){var r,a,o,l=t[t.length-1];if(null!=e)if(l===y.EVENT)a=on(n,"events"),o=t.slice(0,-1),r=Te.parse(e,i,s),a[o]=new te(Bt,r);else switch(a=on(n,"attrs"),l){case y.DATA:o=t.slice(0,-1),r=Ne.tryParse(e.trim()),a[o]=null!=r?r:new te(Zt,r=Oe.parse(e,i,s));break;case y.TEXT:o=t.slice(0,-1);try{r=Le.parse(e,i,s)}catch(t){throw t}r?1===r.length?a[o]=r[0]:a[o]=new te(ne,r):a[o]=e;break;default:a[t]=e}else(a=on(n,"attrs"))[t]=!0}function hn(t,e,n){for(var i=e.length,s=n;s<i;){if(t.test(e[s]))return s;s+=1}return-1}function un(t,e,n,i){for(var s,r,a,o,l=e,c=e,f=e,h=t.length;l<h;){if(s=t[l],r){if(!w.test(s)){if(f=0<(f='"'===s||"'"===s?(c=l+1,t.indexOf(s,c)):hn(tn,t,c=l))?f:h,n)try{120===(o=r).charCodeAt(0)&&o in an?cn(r,t.slice(c,f),n,i,n.identifiers):fn(r,t.slice(c,f),n,i,n.identifiers)}catch(t){throw t}if(">"===t[f])return f;r=null,c=f=l=f+1;continue}}else{if(">"===s){if(c<(f=l))for(a=t.slice(c,f).trim().split(en);0<a.length;)(r=a.shift())&&n&&fn(r,null,n,i,n.identifiers);return f}if("="===s){if(c<(f=l)){for(a=t.slice(c,f).trim().split(en);1<a.length;)(r=a.shift())&&n&&fn(r,null,n,i,n.identifiers);r=a.shift()}c=f=l=f+1;continue}}l+=1}}var pn=/^\s*\n\s*/,gn=/\s*\n\s*$/;function dn(t,e){return{__extag_node__:d,useExpr:!0,type:te,expr:e instanceof te?e:new te(t,e)}}function vn(t,e,n,i,s,r){var a,o=i.contents||[],l=t.slice(e,n);if(l=l.replace(pn,"").replace(gn,"")){if(Le.like(l)){try{a=Le.parse(l,s,r)}catch(t){throw t}if(a)if(1===a.length&&a[0]instanceof te)u=a[0],o.push(dn(a[0].binding,a[0]));else{for(var c=-1,f=0,h=a.length;f<h;++f){var u=a[f];u instanceof te&&"frag"===u.pattern.target?(c<f&&(1<f-c?o.push(dn(ne,a.slice(c,f))):a[c]instanceof te?o.push(dn(a[c].binding,a[c])):o.push(a[c])),o.push(dn(u.binding,u)),c=-1):c<0&&(c=f)}0<=c&&c<f&&(1<f-c?o.push(dn(ne,a.slice(c,f))):a[c]instanceof te?o.push(dn(a[c].binding,a[c])):o.push(a[c]))}else o.push(P(l))}else o.push(P(l));i.contents=o}}var _n=function(t,e){var n=e.constructor,i=function(t,e){var n,i,s,r,a,o,l=0,c=0,f=[],h=0,u=(t=t.trim()).length;for(r={tag:"<>",contents:[],identifiers:["this"]},f.push(r);h<u;){if("<"===t[h]){if(n=t[h+1],Ke.test(n)){if(l<h&&vn(t,l,h,r,e,r.identifiers),c=hn(tn,t,l=h+1),s=t.slice(l,c),(i={}).tag=s,i.useExpr=!0,i.__extag_node__=d,i.identifiers=r.identifiers,">"!==t[c]&&(c=un(t,l=c+=1,i,e,i.identifiers)),i.ns||(i.attrs&&i.attrs.xmlns?i.ns=(o=i.attrs.xmlns)&&o!==sn.html?o===sn.svg?"svg":o===sn.math?"math":o===sn.xlink?"xlink":null:"":r.ns&&(i.ns=r.ns)),null==i.type&&null==i.xtype)if(nn.test(s))switch(s){case"x:slot":i.type=Rt;break;case"x:frag":i.type=Ut}else if(A.test(s)){var p=ln(s,e);p&&(i.type=p)}r&&(r.contents=r.contents||[],r.contents.push(i)),"/"===t[c-1]||(a=s,O.call(rn,a))||(f.push(i),r=i),l=c=h=c+1;continue}if("/"===n&&Ke.test(t[h+2])){if(l<h&&vn(t,l,h,r,e,r.identifiers),c=hn(tn,t,l=h+2),(s=t.slice(l,c))!==r.tag&&W("Unclosed tag "+r.tag),">"!==t[c]&&(c=un(t,l=c+=1)),!(1<f.length))return f[0];f.pop(),0<f.length&&(r=f[f.length-1]),l=c=h=c+1;continue}if("!"===n&&"\x3c!--"===t.slice(h,h+4)){l<h&&vn(t,l,h,r,e,r.identifiers),l=h+4,l=c=h=(c=0<(c=t.indexOf("--\x3e",l))?c:t.length)+3;continue}}h+=1}return l<u&&vn(t,l,u,r,e,r.identifiers),f}(t,e)[0].contents,s=i[0];return 1!==i.length&&W("The template of component "+(n.fullname||n.name)+" must have only one root tag."),"!"!==s.tag&&"#"!==s.tag||W("Component template root tag must be a DOM element, instead of: "+t.slice(0,t.indexOf(">"))),"x:slot"!==s.tag&&"x:view"!==s.tag||W(s.tag+" can not be used as root tag of component template: "+t.slice(0,t.indexOf(">"))),s.type&&s.type.__extag_component_class__&&W("component can not be used as root tag of another component template: "+t.slice(0,t.indexOf(">"))),(s.xif||s.xfor||s.xkey)&&W("`x:if`, `x:for`, `x:key` can not be used on root tag of component template: "+t.slice(0,t.indexOf(">"))),s};return zt.parseHTMX=_n,"undefined"!=typeof ExtagDOM&&kt.set("view-engine",ExtagDOM),{anew:q.anew,inst:q.inst,node:Re.node,expr:Re.expr,conf:function(t,e){if(1===arguments.length)return kt.get(t);kt.set(t,e)},defineClass:I,setImmediate:vt.setImmediate,Validator:st,Watcher:j,Model:wt,Cache:$t,Text:Yt,Slot:Rt,Portal:Ft,Element:Qt,Fragment:Ut,Component:Gt,version:"0.5.3"}});
