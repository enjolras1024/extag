!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Extag=e()}(this,function(){"use strict";var e=/^\s*[$_A-Z][$_A-Z0-9]*(\s*\.\s*[$_A-Z0-9]+)*\s*$/i,n=/\s*\.\s*/;function s(t,e){for(var n=-1,i=t.length,s=e;++n<i;)if(null==(s=s[t[n]]))return s;return s}var g={test:function(t){return e.test(t)},parse:function(t){if(g.test(t))return t.trim().split(n)},search:function(t,e,n){var i;if("string"==typeof t&&(t=g.parse(t)),t)return e&&(i=s(t,e)),null!=i||n||("undefined"!=typeof window?i=s(t,window):"undefined"!=typeof global&&(i=s(t,global))),i}},u=0,o=3,i=0,c=4,l=2,f=1,h=16,p=32,r=11,a=256,d=Object.freeze({}),v="view-engine",_="hook-engine",m=Object.freeze({}),x=Object.freeze([]),y={DATA:"@",TEXT:"#",EVENT:"+",FRAGMENT:"<>",MODIFIER:"::",CONVERTER:"|=",ASSIGN:"!",TWO_WAY:"@",ANY_WAY:"^",ONE_TIME:"?"},b=/\s+/,w=/\s/g,A=/^[A-Z]/,$=/^this\./,k=/^(this\.)?[\w$_]+$/,E=Array.prototype.slice,C=Object.defineProperty,O=Object.prototype.hasOwnProperty,T=Object.getOwnPropertyDescriptor,N=function(t){var e,n,i,s=arguments.length;for(i=1;i<s;++i)if((e=arguments[i])instanceof Object)for(n in e)O.call(e,n)&&(t[n]=e[n]);return t};function S(t,e){return null!=e&&(t=t.slice(0)).push(e),t}function t(t){return"function"==typeof t&&/native code/.test(t.toString())}function D(t,e){var n,i,s;for(n=0,i=e.length;n<i;++n)for(var r in s=e[n])O.call(s,r)&&C(t,r,T(s,r))}function I(t){var e,n,i,s,r;return O.call(t,"extends")?"function"!=typeof(n=t.extends)&&W("superClass must be a function"):n=Object,O.call(t,"constructor")?"function"!=typeof(e=t.constructor)&&W("subClass must be a function"):e=function(){n.apply(this,arguments)},e.prototype=Object.create(n.prototype),r=[e.prototype],i=t.mixins,Array.isArray(i)&&r.push.apply(r,i),r.push(t),D(e.prototype,r),C(e.prototype,"constructor",{value:e,enumerable:!1,writable:!0,configurable:!0}),r=[e,n],(s=t.statics)&&(i=s.mixins,Array.isArray(i)&&r.push.apply(r,i),r.push(s)),D(e,r),delete e.prototype.statics,delete e.prototype.entend,delete e.prototype.mixins,delete e.mixins,e}var M=/&[\w#]{2,6};/;function P(t){return M.test(t)?t.replace(/&nbsp;/g,String.fromCharCode(160)).replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"):t}function W(t,e){var n=t instanceof Error?t:new Error(t);throw e&&N(n,e),n}function Y(t){return t&&"object"==typeof t&&t.__extag_node__===d}function j(){}var z=[function(t){this.emit(t.type,t,i)},function(t){this.emit(t.type,t,f)},function(t){this.emit(t.type,t,l)},function(t){this.emit(t.type,t,f|l)}];function V(t,e,n){var i=t.constructor;"function"==typeof i.removeEventListener&&(2===arguments.length?i.removeEventListener(t,e):i.removeEventListener(t,e,n))}function G(t){var e=i;return t&&(t.capture&&(e|=f),t.passive&&(e|=l),t.once&&(e|=c)),e}function R(t){var e={};return t&f&&(e.capture=!0),t&l&&(e.passive=!0),t&c&&(e.once=!0),e}function U(t,e){return(t&f)==(e&f)}function F(t,e,n,i){var s=t._actions;if("function"==typeof n){s||C(t,"_actions",{value:s={},writable:!1,enumerable:!1,configurable:!0});var r=s[e];r||(r=s[e]={type:e,head:null,tail:null});var a=G(i);if(n.__extag_handler__)for(var o=r.head;o;){if(o.func===n&&U(a,o.flag))return;o=o.next}var c,l,f,h,u={func:n,flag:a};n.__extag_handler__=!0,r.head?r.tail.next=u:r.head=u,r.tail=u,"listeners"in r&&!r.listeners||(l=r,f=u,"function"==typeof(h=(c=t).constructor).addEventListener?h.addEventListener(c,l,f):l.listeners=null)}}function L(t,e,n,i){var s=t._actions;if(s){var r=s[e];if(r){if(2===arguments.length)return r.listeners&&V(t,r),void(s[e]=null);for(var a=G(i),o=r.head,c=null;o;){if(n===o.func&&U(a,o.flag)){if(r.listeners)r.listeners[o.flag&(f|l)]&&V(t,r,o);o.next||(r.tail=c),c?c.next=o.next:r.head=o.next;break}o=(c=o).next}}}}function X(t,e,n){(e=E.call(e,0)).unshift(n),t.apply(console,e)}I({constructor:j,statics:{opts2flag:G,flag2opts:R,getEventListener:function(t,e){return z[e].bind(t)}},on:function(t,e,n){if("object"==typeof t){for(t in n=t)if(O.call(n,t)){var i=n[t];Array.isArray(i)?F(this,t,i[0],i[1]):F(this,t,i)}}else F(this,t,e,n)},off:function(t,e,n){var i=this._actions;if(i){var s=arguments.length,r=typeof t;if(0===s)for(t in i)L(this,t);else if("string"===r)1===s?L(this,t):L(this,t,e,n);else if("object"===r)for(t in n=t)if(O.call(n,t)){var a=n[t];Array.isArray(a)?L(this,t,a[0],a[1]):null==a?L(this,t):L(this,t,a)}}},emit:function(t){var e=this._actions;if(e){var n=e[t];if(n&&n.head){var i,s,r=n.listeners?arguments[2]:0;for(i=n.head;i;)U(r,i.flag)&&(i.func.apply(null,E.call(arguments,1)),i.flag&c&&(s=s||[]).push(i)),i=i.next;if(s)for(var a=0;a<s.length;++a)i=s[a],this.off(t,i.func,i.flag?R(i.flag):null)}}}});var Q={info:function(){X(console.log,arguments,"[EXTAG INFO]")},warn:function(){X(console.warn,arguments,"[EXTAG WARN]")},error:function(){X(console.error,arguments,"[EXTAG ERROR]")},debug:function(){X(console.log,arguments,"[EXTAG DEBUG]")}};function q(){1<arguments.length?(this.ctor=arguments[0],this.args=arguments[1]):this.gen=arguments[0]}I({constructor:q,statics:{anew:function(t){return new q(t,E.call(arguments,1))},inst:function(t){return new q(t)}},gen:function(){var t=this.ctor,e=this.args;if(!e)return new t;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);default:W("`anew` arguments length must not exceed 6.")}}});var H={},Z={configurable:!0,enumerable:!0},B={},J={};function K(e){return function(t){return t[e]}}function tt(t,e){var n,i;Z.get=(n=e,O.call(B,n)||(B[n]=function(){return this.get(n)}),B[n]),Z.set=(i=e,O.call(J,i)||(J[i]=function(t){this.set(i,t)}),J[i]),C(t,e,Z)}function et(){W("Accessor is a partial class for mixins and can not be instantiated")}function nt(t){if(t instanceof Object){var e=t.constructor;return e.fullname||e.name}return typeof t}function it(t,e,n,i){var s,r,a,o=et.getAttrDesc(t,e);if(o&&(o.type||o.test))return(a=o.type)&&(s=function(t,e,n,i){var s,r,a,o,c,l,f=typeof i;if("string"===f&&typeof n!==i?(f=i,s=!0):"function"!==f||n instanceof i||(f=i.fullname||i.name,s=!0),s)return r=t.constructor,a=r.fullname||r.name,o=e,c=f,l=nt(n),"`"+o+"` of type `"+(a||"<<anonymous>>")+"` should be `"+c+(l?"`, not `"+l:"")+"`";if(Array.isArray(i)){for(var h=0,u=i.length;h<u&&!("string"==(f=typeof i[h])&&typeof n===i[h]||"function"===f&&n instanceof i[h]);++h);if(h===u)return function(t,e,n,i){for(var s=[],r=0,a=n.length;r<a;++r)s.push("`"+(n[r].name||n[r])+"`");return"`"+e+"` of type `"+(t||"<<anonymous>>")+"` should be "+s.join(" or ")+(i?", not `"+i:"")+"`"}((r=t.constructor).fullname||r.name,e,i,nt(n))}}(t,e,n,a)),s||((r=o.test)&&(s="function"==typeof r?r.call(t,n,e):function(t,e,n,i){if(!i.test(n))return n+" does not match the pattern "+i.toString()+" of the property `"+e+"` in "+t.toString()}(t,e,n,r)),s||void 0)}I({constructor:et,statics:{getAttrDesc:function(t,e){return t.__extag_descriptors__?t.__extag_descriptors__[e]:null},defineGetterSetter:tt,getAttributeDefaultValue:function(t){return"object"!=typeof t.value?t.value:null!=t.value?t.value instanceof q?t.value.gen&&t.value.gen():t.value:void 0},getAttributeDefaultValues:function(t){var e={},n=t.__extag_descriptors__;if(n)for(var i in n)if(O.call(n,i)){var s=n[i],r=typeof s.value;if("undefined"===r)continue;"object"!==r?e[i]=s.value:null!=s.value&&(s.value instanceof q?e[i]=s.value.gen&&s.value.gen():e[i]=s.value)}return e},applyAttributeDescriptors:function(t,e){if(!O.call(t,"__extag_descriptors__")){if(Array.isArray(e)){var n,i,s=e;for(e={},n=0,i=s.length;n<i;++n)e[s[n]]=H}var r,a,o=N({},t.__extag_descriptors__);for(r in e)if(O.call(e,r)){if(r in t)continue;a=e[r],o[r]="object"!=typeof a?{value:a}:a instanceof q?{value:a}:a?(a.get&&!a.set||a.set&&!a.get&&(a.get=K(r)),a):H,tt(t,r)}C(t,"__extag_descriptors__",{value:o,configurable:!0,enumerable:!1,writable:!1})}}},get:function(t){W("Method `get` must be implemented by sub-class")},set:function(t,e){W("Method `set` must be implemented by sub-class")},assign:function(t){for(var e in t)O.call(t,e)&&this.set(e,t[e])}});var st={validate0:function(t,e){var n,i=t.__extag_descriptors__;for(n in i)!i[n].required||e&&O.call(e,n)||Q.warn("Attribute Validation:","required `"+n+"` for component "+(t.constructor.fullname||t.constructor.name))},validate:function(t,e,n,i){return!it(t,e,n)},troubleShoot:it};function rt(){W("DirtyMarker is a partial class for mixins and can not be instantiated")}function at(t,e,n){var i,s;function r(){i=!0}e.$flag&=~(h|p);for(var a=e,o=[e];e&&(!e.constructor.__extag_component_class__||(e.emit("throwed",{targets:o.slice(0),target:a,phase:n,error:t,stop:r}),!i));){if(!(s=e.__extag_scopes__)||!s[0]){Q.error("Unsolved error in phase `"+n+"` from ",a),Q.error(t);break}e=s[0],o.push(e)}}I({constructor:rt,statics:{check:function(t,e,n,i){var s=t._dirty;s||(s={},t._dirty=s),e in s?s[e]===n&&delete s[e]:s[e]=i},clean:function(t,e){t._dirty&&(e?delete t._dirty[e]:t._dirty=null)}},hasDirty:function(t){var e=this._dirty;return!!e&&(null==t||O.call(e,t))}});var ot=function(t,e,i){if(t){var n=t.resolve();return function(t){"function"==typeof t&&n.then(t)}}if(e){var s=[],r=0,a=document.createTextNode("");return new e(function(){for(var t;t=s.pop();)t();r=r?0:1}).observe(a,{characterData:!0}),function(t){"function"==typeof t&&(s.unshift(t),a.data=r)}}return i?function(t){if("function"==typeof t){var e=!1,n=function(){e||(e=!0,t())};i(n),setTimeout(n)}}:setTimeout}("undefined"!=typeof Promise&&t(Promise)?Promise:null,"undefined"!=typeof MutationObserver&&t(MutationObserver)?MutationObserver:null,"undefined"!=typeof requestAnimationFrame&&t(requestAnimationFrame)?requestAnimationFrame:null),ct=[],lt=[],ft=[],ht=0,ut=0,pt=!1;function gt(){try{var e,t;for(0,ht=0;ht<ct.length;){e=ct[ht++];try{e.update()}catch(t){vt(function(){at(t,e,"updating")})}}for(ct.length=0,ht=-1,ut=0;ut<lt.length;){e=lt[ut++];try{e.digest()}catch(t){vt(function(){at(t,e,"digesting")})}}for(lt.length=0,pt=!(ut=-1),t=ft.length-1;0<=t;--t)try{(0,ft[t])()}catch(t){Q.error("callback failed",t)}ft.length=0}catch(t){throw ut=ht=-1,ct.length=0,lt.length=0,ft.length=0,pt=!1,t}}function dt(t,e,n,i){for(var s,r;e<=n;)if((r=i[s=e+n>>1].$meta.guid)<t)e=s+1;else{if(!(t<r))return e;n=s-1}return-e-1}function vt(t){ft.push(t)}var _t,mt={setImmediate:ot,insertUpdateQueue:function(t){var e,n=ct.length,i=t.$meta.guid;if(0<n&&i>ct[n-1].$meta.guid)e=n;else{var s=dt(i,ht+1,ct.length-1,ct);if(!(s<0))return;e=-s-1}e===n?ct.push(t):ct.splice(e,0,t),pt||(pt=!0,ot(gt))},insertDigestQueue:function(t){var e,n=lt.length,i=t.$meta.guid;if(0<n&&i>lt[n-1].$meta.guid)e=n;else{var s=dt(i,ut+1,lt.length-1,lt);if(!(s<0))return;e=-s-1}e===n?lt.push(t):lt.splice(e,0,t),pt||(pt=!0,ot(gt))},pushCallbackStack:vt},xt=[],yt=function(t){(_t=t).depsCountNew=0,_t.depsCountOld=0,_t.executeTimes=_t.executeTimes?_t.executeTimes+1:1,xt.push(t)},bt=function(){if(null!=_t){if(_t.depsCountOld<_t.depsCount){var t,e,n=_t.deps;for(t=n.length-1;0<=t;--t)(e=n[t]).times!==_t.executeTimes&&(e.src.off("changed",_t.invalidate),n.splice(t,1))}_t.depsCount=_t.depsCountOld+_t.depsCountNew,xt.pop(),xt.length&&(_t=xt[xt.length-1])}},wt=function(t,e){if(null!=_t){var n=_t.keys;n?n.indexOf(e)<0&&n.push(e):_t.keys=[e];var i,s,r=_t.deps;if(r){for(i=0;i<r.length;++i)if((s=r[i]).src===t)return void(s.times<_t.executeTimes&&(s.times=_t.executeTimes,_t.depsCountOld++))}else r=_t.deps=[];_t.depsCountNew++,t.on("changed",_t.invalidate),r.push({src:t,times:_t.executeTimes})}},At=function(t){var e=t.deps;if(e){for(var n=0;n<e.length;++n)e[n].src.off("changed",t.invalidate);t.deps=null,t.keys=null}};function $t(t){$t.initialize(this,t)}I({constructor:$t,mixins:[et.prototype,j.prototype],statics:{create:function(t){return new $t(t)},initialize:function(t,e){var n,i=t.constructor;i!==$t&&i.attributes?(et.applyAttributeDescriptors(i.prototype,i.attributes),n=et.getAttributeDefaultValues(t),C(t,"_props",{value:n,writable:!1,enumerable:!1,configurable:!0})):C(t,"_props",{value:{},writable:!1,enumerable:!1,configurable:!0}),e&&function(t,e){var n,i;for(n in e)O.call(e,n)&&(et.getAttrDesc(t,n)?t.set(n,e[n]):(i=T(e,n)).get||i.set?C(t,n,i):(et.defineGetterSetter(t,n),t.set(n,i.value)))}(t,e)}},keys:function(){return Object.keys(this._props||m)},get:function(t){wt(this,t);var e=et.getAttrDesc(this,t);return e&&e.get?e.get.call(this,this._props):this._props[t]},set:function(t,e){var n,i=et.getAttrDesc(this,t),s=this._props;i&&i.get?i.set&&(n=i.get.call(this,s),i.set.call(this,e,s),n!==(e=i.get.call(this,s))&&this.emit("changed",t,e)):(n=s[t])!==e&&(s[t]=e,this.emit("changed",t,e))}});var kt={invalidate:function(){}};function Et(t){this._owner=t||kt,this._props={}}I({constructor:Et,mixins:[et.prototype,rt.prototype],get:function(t){return this._props[t]},set:function(t,e){var n=this._props,i=n[t];e!==i&&(n[t]=e,this._owner.invalidate(1),rt.check(this,t,e,i))},reset:function(t){var e,n,i=this._props;if(i)for(n in i)O.call(i,n)&&(t&&O.call(t,n)||rt.check(this,n,null,i[n]));if(t){for(n in t)O.call(t,n)&&(e=t[n])!==i[n]&&rt.check(this,n,e,i[n]);this._props=t}else this._props={}}});var Ct={},Ot={get:function(t){return Ct[t]},set:function(t,e){Ct[t]=e}},Tt=0,Nt=null;function St(){W("Shell is a base class and can not be instantiated")}function Dt(){W("Parent is a base class and can not be instantiated!")}function It(t){for(var e=t._parent;e&&e.$meta.type===u;)e=e._parent;return e}function Mt(t,e){var n,i,s=t._children,r=s.length;for(e=e||[],n=0;n<r;++n)(i=s[n]).$meta.type===u?Mt(i,e):e.push(i);return e}I({constructor:St,mixins:[j.prototype,et.prototype,rt.prototype],invalidate:function(t){0==(this.$flag&h)&&(this.$flag|=h,mt.insertUpdateQueue(this)),t&&0==(this.$flag&t)&&(this.$flag|=t)},update:function(){W("The method `update` must be implemented by sub-class")},digest:function(){W("The method `digest` must be implemented by sub-class")},attach:function(t){0===this.$meta.type&&W("Fragment and component using <x:frag> as root tag, can not attach a skin.");var e=St.getViewEngine(this);if(e.attachShell(t,this),this.$skin=t,this._actions){var n,i,s=this._actions;for(n in s)if(O.call(s,n)&&e.mayDispatchEvent(t,n)&&(i=s[n]))for(var r=i.head;r;)St.addEventListener(this,i,r),r=r.next}0==(this.$flag&p)&&(this.$flag|=p,mt.insertDigestQueue(this))},detach:function(){this.constructor.destroy(this);var t=this.$skin;t&&(St.getViewEngine(this).detachShell(t,this),this.$skin=null)},toString:function(){var t=this.$meta,e=this.constructor;return(e.fullname||e.name)+"<"+t.tag+">("+t.guid+")"},get:function(t){return this._props[t]},set:function(t,e){var n=this._props,i=n[t];i!==e&&(n[t]=e,this.invalidate(1),rt.check(this,t,e,i))},cmd:function(t){this._commands||(this._commands=[]),this._commands.push({name:t,args:E.call(arguments,1)}),this.invalidate(8)},statics:{initialize:function(t,e,n,i){e===o||O.call(t,"_props")||(t._props={}),t.$flag=0,t.$meta={guid:Tt++,type:e,tag:n,ns:i||""}},destroy:function(t){if(!(512&t.$flag)){var e;t.off(),rt.clean(t);var n=t._bindings;if(n){for(e=n.length-1;0<=e;--e)n[e].destroy();n.length=0}var i,s=t._children;if(s){for(e=s.length-1;0<=e;--e)(i=s[e]).constructor.destroy(i),i._parent=null;t._children.length=0}t.$flag|=512}},getViewEngine:function(t){var e=t.$meta.ns;return null==Nt&&(Nt=Ot.get(v)),e&&!Nt.hasNameSpace(e)?Ot.get(e+":"+v):Nt},addEventListener:function(t,e,n){var i=t.$skin,s=St.getViewEngine(t);if(i&&s)if(s.mayDispatchEvent(i,e.type)){var r=n.flag&(f|l);e.listeners=e.listeners||[];var a=e.listeners[r];if(a)return void a.count++;a=j.getEventListener(t,n.flag),s.addEventListener(i,e.type,a,r&&j.flag2opts(r)),(e.listeners[r]=a).count=1}else e.listeners=null},removeEventListener:function(t,e,n){var i,s,r,a=t.$skin,o=e.listeners,c=St.getViewEngine(t);if(a&&o&&c&&c.mayDispatchEvent(a,e.type))if(2===arguments.length)for(i=0;i<o.length;++i)(r=o[i])&&(r.count=0,o[i]=null,c.removeEventListener(a,e.type,r,j.flag2opts(i)));else{if(!(r=o[s=n.flag&(f|l)]))return;r.count--,r.count<1&&(c.removeEventListener(a,e.type,r,j.flag2opts(s)),o[s]=null)}}}}),C(St.prototype,"style",{get:function(){return this._style||(this._style=new Et(this)),this._style}});var Pt=[],Wt=!1;function Yt(t){Pt.push(t),Wt||(Wt=!0,mt.pushCallbackStack(jt))}function jt(){for(var t=0;t<Pt.length;++t){var e=Pt[t];e._parent||e.detach()}Pt.length=0,Wt=!1}function zt(t){zt.initialize(this,t)}function Vt(t,e,n){this.scope=t,this.produce=e,this.consume=n,this.execute=this.execute.bind(this),this.invalidate=this.invalidate.bind(this),this.flag=1,this.execute(),this.scope.on("updating",this.execute)}I({constructor:Dt,statics:{findParent:It,flattenChildren:Mt},getParent:function(t){return t?It(this):this._parent},getChildren:function(t){return t?Mt(this):this._children?this._children.slice(0):[]},setChildren:function(t){var e,n=this._children,i=t?t.length:0,s=n?n.length:0;if(s===i){for(e=0;e<i&&n[e]===t[e];++e);if(e===i)return}if(s){for(e=0;e<s;++e)n[e]._parent=null,Yt(n[e]);n.length=0}if(i)for(e=0;e<i;++e)this.insertChild(t[e],null);else s&&this.invalidate(2)},insertChild:function(t,e){null==t&&W("The new child to be inserted into this parent must not be null!");var n,i,s,r=this._children;if(r||(r=[],this._children=r),s=r.length,null!=e){for(n=0;n<s&&(r[n]!==e||this!==e._parent);++n);if(n===s&&W("The child before which the new child is to be inserted is not a child of this parent!"),e===t)return}else n=s;if(t._parent)if(t._parent===this){for(i=0;i<s;++i)if(r[i]===t){if(i===n)return;r.splice(i,1),n=i<n?n-1:n,s=r.length;break}}else t._parent.removeChild(t);n<s?r.splice(n,0,t):r.push(t),(t._parent=this).invalidate(2)},appendChild:function(t){this.insertChild(t,null)},removeChild:function(t){null==t&&W("The new child to be removed from this parent must not be null!");var e=0,n=0,i=this._children;if(i)for(e=0,n=i.length;e<n&&(i[e]!==t||this!==t._parent);++e);e===n&&W("The child to be removed is not a child of this parent!"),e<n-1?i.splice(e,1):i.pop(),t._parent=null,Yt(t),this.invalidate(2)},replaceChild:function(t,e){null==t&&W("The new child to be inserted into this parent must not be null!");var n=0,i=0,s=0,r=this._children;if(r)for(n=0,s=r.length;n<s&&(r[n]!==e||this!==e._parent);++n);if(n===s&&W("The child to be replaced is not a child of this parent!"),t!==e){if(t._parent)if(t._parent===this){for(i=0;i<s;++i)if(r[i]===t){r.splice(i,1),n=i<n?n-1:n,s=r.length;break}}else t._parent.removeChild(t);Yt(e),e._parent=null,t._parent=this,r[n]=t,this.invalidate(2)}}}),I({constructor:zt,extends:St,statics:{initialize:function(t,e){St.initialize(t,o,"",""),t.set("content",null!=e?e:"")}},get:function(t){if("content"===t)return this._content},set:function(t,e){"content"===t&&e!==this._content&&(this._dirty=!0,this._content=e,this.invalidate(1))},update:function(){if(0==(this.$flag&h))return!1;0==(this.$flag&p)&&(this.$flag|=p,mt.insertDigestQueue(this))},digest:function(){if(0==(this.$flag&p))return!1;this.$skin&&this.$flag&r&&(St.getViewEngine(this).renderShell(this.$skin,this),this.$flag&=~r,this._dirty=!1);this.$skin&&!1&this.$flag&&(this.$flag|=a),this.$flag&=~(h|p)},getParent:Dt.prototype.getParent,toString:function(){var t=this._content;return'"'+((t=null==t?"":t.toString()).length<24?t:t.slice(0,21)+"...")+'"('+this.$meta.guid+")"}}),I({constructor:Vt,statics:{record:function(t,e){var n=t._bindings;n?n.push(e):t._bindings=[e]},remove:function(t,e){var n=t._bindings;n&&n.length&&n.splice(n.lastIndexOf(e),1)},create:function(t,e,n){return new Vt(t,e,n)}},destroy:function(){this.scope.off("updating",this.execute),At(this)},execute:function(){if(0!==this.flag){yt(this);var t=this.produce.call(this.scope);bt(),this.consume.call(this.scope,t),this.flag=0}},invalidate:function(t){0<=this.keys.indexOf(t)&&(this.scope.invalidate(),this.flag=1)}});var Gt={driveComponent:null,driveChildren:null,driveContent:null,transferProps:null,createContent:null,parseHTMX:null,parseJSX:null};function Rt(t,e){Rt.initialize(this,t,e)}function Ut(t,e,n){Ut.initialize(this,t,e,n)}function Ft(t,e){Ft.initialize(this,t,e||x)}function Lt(){Rt.apply(this,arguments)}I({constructor:Rt,extends:St,mixins:[Dt.prototype],statics:{__extag_component_class__:!0,destroy:function(t){512&t.$flag||(t.emit("destroying"),St.destroy(t))},initialize:function(e,t,n){var i=e.constructor,s=i.prototype,r=i.attributes,a=i.__extag_template__;if(e.__extag_scopes__=n,et.applyAttributeDescriptors(s,r),e._props=et.getAttributeDefaultValues(e),!a)try{i.template||("function"==typeof s.render?i.template="<x:frag>@{{this.render(this._props) ^}}</x:frag>":i.template="<x:frag></x:frag>"),"string"==typeof i.template?a=Gt.parseHTMX(i.template,s):"function"==typeof i.template?a=Gt.parseJSX(i.template,s):W("The static template must be string or function"),a&&(i.__extag_template__=a)}catch(t){at(t,e,"parsing")}St.initialize(e,"x:frag"!==a.tag?1:u,a.tag,a.ns||"");var o=n&&n[0]&&n[0].context,c=e.setup(o),l=e._actions;if(null!=c)for(var f in"object"!=typeof c&&W("setup() should return object, instead of "+typeof c),c){var h=T(c,f);h.get||h.set?C(e,f,h):e[f]=h.value}o&&null==e.context&&(e.context=o),t&&Gt.driveContent(e,n,t,!0),l&&l.created&&e.emit("created"),e.invalidate()}},get:function(t){var e=et.getAttrDesc(this,t);return e?(wt(this,t),e.get?e.get.call(this,this._props):this._props[t]):this._props[t]},set:function(t,e){var n,i=et.getAttrDesc(this,t),s=this._props;i?i.get?i.set&&(n=i.get.call(this,s),i.set.call(this,e,s),n!==(e=i.get.call(this,s))&&(this.invalidate(),this.emit("changed",t,e))):(n=s[t])!==e&&(s[t]=e,this.invalidate(),this.emit("changed",t,e)):(n=s[t])!==e&&(s[t]=e,this.invalidate(1),rt.check(this,t,e,n))},bind:function(t,e){return Vt.create(this,t,e)},setup:function(t){t&&(this.context=t)},update:function(){if(0!=(this.$flag&h)){if(this.emit("updating"),0==(128&this.$flag)){var t=this.constructor.__extag_template__;Gt.driveComponent(this,t,!0),this.$flag|=128,this._actions&&this._actions.started&&this.emit("started")}var e=this.$meta.type;if(0!==e&&0!=(1&this.$flag)&&Gt.transferProps(this),this._contents&&(this._contents.length?this._contents.length=0:this._contents=null),0==(this.$flag&p)){if(0===e&&this._parent&&2&this.$flag){var n=this.getParent(!0);n.$flag|=2,0==(n.$flag&p)&&(n.$flag|=p,mt.insertDigestQueue(n))}this.$flag|=p,mt.insertDigestQueue(this)}}},digest:function(){if(0!=(this.$flag&p)){if(this.$skin&&0!==this.$meta.type&&this.$flag&r)St.getViewEngine(this).renderShell(this.$skin,this),rt.clean(this),this._style&&rt.clean(this._style),this.$style&&rt.clean(this.$style),this.$props&&rt.clean(this.$props),this._commands&&(this._commands=null),this.$flag&=~r;this.$flag&=~(h|p);var t=this._actions;if(0==(this.$flag&a)){if(0===this.$meta.type){var e=Dt.findParent(!0);e&&e.$skin&&(this.$flag|=a)}else this.$skin&&(this.$flag|=a);t&&t.mounted&&this.$flag&a&&mt.pushCallbackStack(function(){this.emit("mounted")}.bind(this))}t&&t.updated&&mt.pushCallbackStack(function(){this.emit("updated")}.bind(this))}},accept:function(t,e){null==t?t=x:Array.isArray(t)||(t=[t]),(this._contents||t.length)&&(this._contents=t.slice(0),this._contents.scopes=e||x,this.emit("contents",this._contents),this.invalidate(4))},addNamedPart:function(t,e){this[t]=e}}),I({constructor:Ut,extends:Rt,statics:{initialize:function(t,e,n,i){Rt.initialize(t,e,n,i),n[0].on("contents",t.onScopeContents.bind(t)),t.on("updating",t.onUpdating.bind(t)),t.scopes=n,t.collect()},template:"<x:frag></x:frag>"},collect:function(){var t,e,n,i,s,r,a=this.scopes;if(a[0]._contents){if(r=[],s=a[0]._contents,r.scopes=s.scopes,s&&0<s.length)for(e=this.get("name")||"",i=0,n=s.length;i<n;++i)null!=(t=s[i])&&e===(t.slot||"")&&r.push(t);this._collection=r,this.invalidate()}},onUpdating:function(){if(this._collection||this._contents){var t=this.scopes,e=this._contents,n=this._collection;n&&n.length?(t=n.scopes,Gt.driveChildren(this,t,n,!!t)):e&&e.length?(t=e.scopes,n=e.slice(0),Gt.driveChildren(this,t,n,!!t)):this.setChildren([]),this._collection=null,this._contents&&(this._contents.length?this._contents.length=0:this._contents=null)}else this.setChildren([])},onScopeContents:function(){this.collect()}}),I({constructor:Ft,extends:St,mixins:[Dt.prototype],statics:{__extag_fragment_class__:!0,initialize:function(t,e,n){St.initialize(t,0,"x:frag",""),t.__extag_scopes_=n,e&&Gt.driveContent(t,n,e,!0)}},accept:function(t,e){null==t?t=x:Array.isArray(t)||(t=[t]),Gt.driveChildren(this,e||x,t,!1)},update:function(){if(0!=(this.$flag&h)&&0==(this.$flag&p)){if(this._parent&&2&this.$flag){var t=this.getParent(!0);t&&(t.$flag|=2,0==(t.$flag&p)&&(t.$flag|=p,mt.insertDigestQueue(t)))}this.$flag|=p,mt.insertDigestQueue(this)}},digest:function(){if(0==(this.$flag&p))return!1;this.$flag&=~(h|p),rt.clean(this)}});var Xt={};function Qt(t,e){Qt.initialize(this,t,e||x)}I({constructor:Lt,extends:Rt,setup:function(){var e=this;e.on("contents",function(t){e.fragment||(e.fragment=new Ft),e.fragment.accept(t,t.scopes)}),e.on("updating",function(){var t=e.getPool();t.target?t.target.append(e):t.portals.push(e)},{once:!0}),e.on("destroying",function(){var t=e.getPool();t.target&&t.target.remove(e),e.fragment&&e.fragment.setChildren([])})},getPool:function(){var t=this.get("target"),e=Xt[t];return e||(e=Xt[t]={portals:[]}),e}}),Lt.Target=I({extends:Rt,statics:{fullname:"Portal.Target"},setup:function(){var i=this;i.on("updating",function(){var t=i.get("name"),e=Xt[t];if(e)if(!e.target&&e.portals.length){for(var n=0;n<e.portals.length;++n)e.portals[n].fragment&&i.append(e.portals[n]);e.portals.length=0}else W('A portal target with the same name="'+t+'" already exists');else Xt[t]={target:i,portals:[]}},{once:!0}),i.on("destroying",function(){var t=i.get("name");delete Xt[t]})},append:function(t){t.fragment||(t.fragment=new Ft),this.appendChild(t.fragment)},remove:function(t){t.fragment&&this.removeChild(t.fragment)}}),I({constructor:Qt,extends:St,mixins:[Dt.prototype],statics:{__extag_element_class__:!0,initialize:function(t,e,n){St.initialize(t,1,e.tag,e.ns),t.__extag_scopes__=n,e&&Gt.driveContent(t,n,e,!0)}},accept:function(t,e){null==t?t=x:Array.isArray(t)||(t=[t]),Gt.driveChildren(this,e||x,t,!1)},update:function(){if(0==(this.$flag&h))return!1;0!=(1&this.$flag)&&Gt.transferProps(this),0==(this.$flag&p)&&(this.$flag|=p,mt.insertDigestQueue(this))},digest:function(){if(0==(this.$flag&p))return!1;this.$skin&&this.$flag&r&&(St.getViewEngine(this).renderShell(this.$skin,this),rt.clean(this),this._style&&rt.clean(this._style),this._commands&&(this._commands=null),this.$flag&=~r);this.$skin&&!1&this.$flag&&(this.$flag|=a),this.$flag&=~(h|p)}});var qt,Ht={ASSIGN:-1,ONE_TIME:0,ONE_WAY:1,TWO_WAY:2,ANY_WAY:3};function Zt(t,e){return t.converters&&t.converters.length?function(t,e,n){for(var i=0;i<t.length;++i)n=qt(t[i],S(e,n));return n}(t.converters,e,qt(t.evaluator,e)):qt(t.evaluator,e)}function Bt(t){this.pattern=t}function Jt(t){this.pattern=t}function Kt(t){return{once:0<=t.indexOf("once"),capture:0<=t.indexOf("capture"),passive:0<=t.indexOf("passive")}}function te(t,e){"object"==typeof e&&e&&t&&t.length&&(0<=t.indexOf("stop")&&e.stopPropagation&&e.stopPropagation(),0<=t.indexOf("prev")&&e.preventDefault&&e.preventDefault())}function ee(t,e){this.binding=t,this.pattern=e}qt=function(t,e){return t.apply(e[0],e)},I({constructor:Bt,statics:{MODES:Ht,create:function(t){return new Bt(t)}},connect:function(t,e,n){this.flag=0,this.scopes=n,this.target=e,this.targetProp=t;var i=this.pattern;i.mode!==Ht.ASSIGN?(this.execute=this.execute.bind(this),this.invalidate=this.invalidate.bind(this),i.mode===Ht.TWO_WAY&&(this.backward=this.backward.bind(this),et.getAttrDesc(this.target,this.targetProp)&&this.target.on("changed",this.backward)),this.flag=1,this.execute(),(this.deps&&this.deps.length||i.mode===Ht.ANY_WAY)&&(n[0].on("updating",this.execute),Vt.record(e,this))):this.target.set(this.targetProp,Zt(i,n))},replace:function(t){if(1<t.length&&t.length===this.scopes.length){for(var e,n=t.length-1;0<=n;--n)if(t[n]!==this.scopes[n]){e=!0;break}e&&(this.scopes=t,this.flag=1,this.execute())}},destroy:function(){var t=this.scopes;this.pattern.mode===Ht.TWO_WAY&&et.getAttrDesc(this.target,this.targetProp)&&this.target.off("changed",this.backward),t[0].off("updating",this.execute),At(this)},execute:function(){var t=this.pattern;if(0!==this.flag||t.mode===Ht.ANY_WAY){yt(this);var e=Zt(t,this.scopes);bt(),this.target.set(this.targetProp,e),this.flag=0,t.mode===Ht.ONE_TIME&&this.destroy()}},backward:function(t){if(t===this.targetProp){var e=this.target[this.targetProp],n=this.pattern.evaluator.path,i=n.from,s=n.length,r=this.scopes;2===s?(0<=i?r[i]:r[0].constructor.resources).set(n[1],e):2<s&&(0<=i?g.search(n.slice(1,s-1),r[i],!0):g.search(n.slice(1,s-1),r[0].constructor.resources,!0)).set(n[s-1],e)}},invalidate:function(t){this.keys&&0<=this.keys.indexOf(t)&&(this.scopes[0].invalidate(),this.flag=1)}}),I({constructor:Jt,statics:{create:function(t){return new Jt(t)}},connect:function(t,e,n){this.type=t,this.target=e;var i=this.pattern,s=i.handler,r=i.evaluator,a=i.modifiers;if(s){var o=n[0][s];if(!o)return;a&&a.length?"bind"===a[0]&&1===a.length?this.handler=o.bind(n[0]):(this.handler=function(t){te(a,t),0<=a.indexOf("bind")?o.apply(n[0],arguments):o.apply(null,arguments)},this.options=Kt(a)):this.handler=o}else n.length<=1?a&&a.length?(this.handler=function(t){te(a,t),r.apply(n[0],S(n,t))},this.options=Kt(a)):this.handler=function(t){r.apply(n[0],S(n,t))}:(this.scopes=n,a&&a.length?(this.handler=function(t){te(a,t),r.apply(n[0],S(n,t))}.bind(this),this.options=Kt(a)):this.handler=function(t){r.apply(n[0],S(n,t))}.bind(this));this.handler&&(this.options?e.on(t,this.handler,this.options):e.on(t,this.handler),Vt.record(e,this))},replace:function(t){if(this.scopes&&1<t.length&&this.scopes.length===t.length)for(var e=1;e<t.length;++e)this.scopes[e]=t[e]},destroy:function(){var t=this.handler;t&&(this.options?this.target.off(this.type,t,this.options):this.target.off(this.type,t))}}),I({constructor:ee,connect:function(t,e,n){this.binding.create(this.pattern).connect(t,e,n)}});var ne=Bt.MODES;function ie(t){this.pattern=t}function se(t,e){se.initialize(this,t,e)}function re(t,e){if(!Y(t))return new zt(t);var n,i,s,r=t.useExpr;return t.xif||t.xfor||t.xtype?s=new se(t,e):r&&t.type===ee?"frag"===(i=t.expr).pattern.target?(s=new Ft(null,e),i.connect("accept",s,e)):(s=new zt(""),i.connect("content",s,e)):(s=(n=t.type)?new n(t,e):new Qt(t,e),t.name&&e[0].addNamedPart(t.name,s)),s}function ae(t,e,n,i){var s,r,a=t._events;if(a)for(s in a)"function"==typeof(r=a[s])?t.off(s,r):Array.isArray(r)&&t.off(s,r[0],r[1]);if(n)for(s in n)r=n[s],i&&r instanceof ee?r.connect(s,t,e):"function"==typeof r?t.on(s,r):Array.isArray(r)&&t.on(s,r[0],r[1]);i||(t._events=n)}function oe(t,e,n,i,s){var r,a,o,c=t._props;if(c&&!s)if(t instanceof Rt)for(r in c)n&&r in n||((a=et.getAttrDesc(t,r))?t.set(r,et.getAttributeDefaultValue(a)):t.set(r,null));else for(r in c)n&&r in n||t.set(r,null);if(n)for(r in n)o=n[r],i&&o instanceof ee?o.connect(r,t,e):t.set(r,o)}function ce(t,e){var n=t.$meta;return n.type===o&&e.__extag_node__!==d||t.__extag_key__===e.xkey&&(e.type?t.constructor===e.type:n.tag===e.tag&&n.ns===e.ns)}function le(t,e,n){Y(e)?(oe(t,n,e.attrs),ae(t,n,e.events),fe(t,n,e.contents,e.useExpr,t instanceof Rt)):t.set("content",e)}function fe(t,e,n,i,s){var r;if(n?n.length&&(n=function t(e,n,i){var s,r,a=e.length;if(!n)for(s=0;s<a;++s)if(Array.isArray(e[s])){n=[];break}if(n)for(s=0;s<a;++s)r=e[s],Array.isArray(r)?t(r,n,i):(n.push(r),i&&Y(r)&&!r.ns&&(r.ns=i));else for(s=0;s<a;++s)r=e[s],i&&Y(r)&&!r.ns&&(r.ns=i);return n||e}(n,null,t.$meta.ns)):n=x,s)t.accept(n,e);else{if(i){if(1===n.length&&Y(n[0])&&n[0].type===ee){var a=n[0].expr;if(a instanceof ee&&"frag"===a.pattern.target)return void(t instanceof Rt?a.connect(function(t,e){Ft.prototype.accept.call(this,t,e)},t,e):a.connect("accept",t,e))}r=function(t,e,n){var i,s,r,a=[];if(t&&t.length)for(i=0,s=t.length;i<s;++i)(r=re(t[i],e))&&a.push(r);return a}(n,e)}else r=function(t,e,n){for(var i,s,r,a,o=n._children||x,c=t||x,l=new Array(c.length),f=0,h=o.length-1,u=0,p=c.length-1,g=o[f],d=o[h],v=c[u],_=c[p];f<=h&&u<=p;)if(null==g)g=o[++f];else if(null==d)d=o[--h];else if(ce(g,v))le(l[u]=g,v,e),g=o[++f],v=c[++u];else if(ce(d,_))le(l[p]=d,_,e),d=o[--h],_=c[--p];else if(ce(g,_))le(l[p]=g,_,e),g=o[++f],_=c[--p];else if(ce(d,v))le(l[u]=d,v,e),d=o[--h],v=c[++u];else{if(!s)for(s={},a=f;a<=h;++a)(r=o[a].__extag_key__)&&(s[r]=a);null!=(a=(r=v.xkey)&&s[r])&&ce(o[a]||m,v)?l[u]=o[a]:((i=re(v,e)).__extag_key__=r,l[u]=i),v=c[++u]}if(h<f)for(;u<=p;)(i=re(v,e)).__extag_key__=v.xkey,l[u]=i,v=c[++u];return l}(n,e,t);t.setChildren(r)}}I({constructor:ie,statics:{create:function(t){return new ie(t)}},connect:function(t,e,n){this.scopes=n,this.target=e,this.property=t,this.flag=1;var i,s,r,a=this.pattern;for(i=0,s=a.length;i<s;++i)(r=a[i])instanceof ee&&(null!=this.mode&&this.mode!==r.pattern.mode&&W("all embedded expressions must have same data-binding mode for TextBinding"),this.mode=r.pattern.mode);null!=this.mode&&this.mode!==ne.ASSIGN?(this.invalidate=this.invalidate.bind(this),this.execute=this.execute.bind(this),this.execute(),n[0].on("updating",this.execute),Vt.record(e,this)):this.execute()},replace:function(t){1<t.length&&t.length===this.scopes.length&&(this.scopes=t,this.flag=1,this.execute())},destroy:function(){this.scopes[0].off("updating",this.execute),At(this)},execute:function(){if(0!==this.flag||this.mode===ne.ANY_WAY){yt(this);var t,e,n,i=[],s=this.pattern;for(t=0,e=s.length;t<e;++t)(n=s[t])instanceof ee&&(n=Zt(n.pattern,this.scopes)),i.push(n);bt(),this.target.set(this.property,i.join("")),this.flag=0,this.mode===ne.ONE_TIME&&this.destroy()}},invalidate:function(t){this.keys&&0<=this.keys.indexOf(t)&&(this.scopes[0].invalidate(),this.flag=1)}}),I({constructor:se,extends:Rt,statics:{initialize:function(t,e,n){if(Rt.initialize(t),t.mode=0,e){t.scopes=n;var i=N({},e);delete(t.template=i).xtype,delete i.xkey,delete i.xfor,delete i.xif,t.set("condition",!0),e.xif&&(t.mode=1,i.xif.connect("condition",t,n)),e.xfor&&(t.mode=2,t.varaibles=e.xfor[0],e.xfor[1].connect("iterable",t,n),e.xkey&&(t.keyExpr=e.xkey)),e.xtype&&(t.mode=t.mode||1,t.xtype=!0,e.xtype.connect("component",t,n)),t.refresh(),n[0].on("updating",function(){t.refresh()})}},template:"<x:frag></x:frag>"},refresh:function(){if(this.mode&&(this.hasDirty("condintion")||this.hasDirty("component")||this.hasDirty("iterable")||this.hasDirty("xtype"))){var t=this.get("condition"),e=this.get("component"),n=this.template,i=this.scopes,s=[];if(t){if(this.xtype){if(!e||!e.__extag_component_class__)return void this.setChildren(s);n=N({},n,{type:e})}if(1===this.mode)return(a=Gt.createContent(n,i,!0))&&s.push(a),void this.setChildren(s);var r,a,o,c,l,f,h,u={},p=this.get("iterable")||[],g=this._children||[],d=this.varaibles,v=this.keyExpr;for(f=0,l=g.length;f<l;++f)"__extag_key__"in g[f]&&(u[c=g[f].__extag_key__]=f);for(f=0,l=p.length;f<l;++f){a=c=null,o=p[f];var _,m={};m[d[0]]=o,d[1]&&(m[d[1]]=f),h=i.concat([m]),v&&null!=(r=u[c=Zt(v.pattern,h)])&&(a=g[r]),a?(_=(h=a.__extag_scopes__)[h.length-1]).assign(m):(_=new $t(m),h[h.length-1]=_,(a=Gt.createContent(n,h)).__extag_key__=c,a.__extag_scopes__=h),s.push(a)}this.setChildren(s)}else this.setChildren(s)}}});var he=Bt.MODES;function ue(t){this.pattern=t}function pe(t,e,n){ue.create(n).connect("class",t,e)}function ge(t){var e=typeof t;if("object"===e)return t;if("string"===e){var n,i,s,r,a,o={},c=t.split(";");for(s=0;s<c.length;++s)0<(i=(n=c[s]).indexOf(":"))&&(r=n.slice(0,i).trim(),a=n.slice(i+1).trim(),r&&(o[r]=a));return o}}I({constructor:ue,statics:{create:function(t){return new ue(t)}},connect:function(t,e,n){this.scopes=n,this.target=e,this.property=t,this.flag=1;var i,s,r=this.pattern;for(i in r)(s=r[i])instanceof ee&&(null!=this.mode&&this.mode!==s.pattern.mode&&W("all embedded expressions must have same data-binding mode for ClassBinding"),this.mode=s.pattern.mode);null!=this.mode&&this.mode!==he.ASSIGN?(this.invalidate=this.invalidate.bind(this),this.execute=this.execute.bind(this),this.execute(),n[0].on("updating",this.execute),Vt.record(e,this)):this.execute()},replace:function(t){1<t.length&&t.length===this.scopes.length&&(this.scopes=t,this.flag=1,this.execute())},destroy:function(){this.scopes[0].off("updating",this.execute),At(this)},execute:function(){if(0!==this.flag||this.mode===he.ANY_WAY){yt(this);var t,e,n={},i=this.pattern;for(t in i)(e=i[t])instanceof ee&&(e=Zt(e.pattern,this.scopes)),n[t]=e;bt(),this.target.set(this.property,n),this.flag=0,this.mode===he.ONE_TIME&&this.destroy()}},invalidate:function(t){this.keys&&0<=this.keys.indexOf(t)&&(this.scopes[0].invalidate(),this.flag=1)}}),Gt.createContent=re,Gt.driveChildren=fe,Gt.driveContent=function(t,e,n,i){var s=n.useExpr;n.events&&ae(t,e,n.events,s),n.attrs&&oe(t,e,n.attrs,s,i),s&&(n.style&&oe(t.style,e,n.style,s,i),n.classes&&pe(t,e,n.classes)),n.contents&&fe(t,e,n.contents,s,t instanceof Rt)},Gt.driveComponent=function(t,e,n){var i=[t],s=e.useExpr;e.events&&ae(t,i,e.events,s),e.attrs&&(t.$props=new Et(t),oe(t.$props,i,e.attrs,s,n)),s&&(e.style&&(t.$style=new Et(t),oe(t.$style,i,e.style,s,n)),e.classes&&(t.$props=t.$props||new Et(t),pe(t.$props,i,e.classes))),e.contents&&fe(t,i,e.contents,s)},Gt.transferProps=function(t){var e;if(t.$meta.type!==o&&(t.hasDirty("style")&&(rt.clean(t,"style"),e=ge(t.get("style")),t.style.reset(e)),t.$props&&t.constructor.__extag_component_class__)){var n,i,s,r=t.$props;if(r.hasDirty("style")){var a=((s=(n=t)[i="$style"])||(s=new Et(n),n[i]=s),s);rt.clean(r,"style"),e=ge(e=r.get("style")),a.reset(e)}}};var de=/[\w).+\-_$\]]/,ve="abstract arguments boolean break byte case catch char class const continue debugger default delete do double else enum eval export extends false final finally float for function goto if implements import in instanceof int interface let long native new null package private protected public return short static super switch synchronized this throw throws transient true try typeof undefined var void volatile while with yield isNaN isFinite parseFloat parseInt Array Date Infinity Math NaN Number Object String Boolean RegExp JSON",_e={};function me(t,e){for(var n,i=t.length;e<i;){if(!(32===(n=t.charCodeAt(e))||9<=n&&n<=13))return 44!==n&&123!==n;--e}}function xe(t,e){for(var n="$"+e;0<=t.indexOf(n);)n="$"+n;return n}function ye(t,e){for(var n=e.length-1;0<=n;--n)if("string"==typeof e[n]){if(t===e[n])return n}else if(0<=e[n].indexOf(t))return n;return-1}function be(t,e){for(var n,i,s,r=t.length;e<r;)if(32===(n=t.charCodeAt(e))||9<=n&&n<=13)s=!0,++e;else{if(46===n)i&&W("Unexpected token '.'.",{code:1001,expr:t}),i=!(s=!1);else{if(!(we(n)||48<=n&&n<=57)){i&&W("Unexpected token '"+t[e]+"'.",{code:1001,expr:t});break}if(s&&!i){--e;break}i=s=!1}++e}return e}function we(t){return 97<=t&&t<=122||65<=t&&t<=90||95===t||36===t}function Ae(t,e,n){for(var i=e.length;n<i;){if(e.charCodeAt(n)===t&&92!==e.charCodeAt(n-1))return n;++n}return i}function $e(t,e){for(var n;0<=--e&&(32===(n=t.charCodeAt(e))||9<=n&&n<=13););return!n||!de.test(String.fromCharCode(n))}function ke(t,e,n,i){try{t.push(e.join("\n"));var s=Function.apply(null,t);return n&&(s.path=n),s}catch(t){W(t,{code:1001,expr:i,desc:"Illegal expression `"+i+"`."})}}!function(){for(var t=ve.split(/\s+/),e=0,n=t.length;e<n;++e)_e[t[e]]=!0}();var Ee={regexStarts:$e,gotoEnding:Ae,parse:function(t,e,n,i){var s,r,a=[],o=[];for(s=0;s<n.length;++s)"$"===n[s][0]?o.push(n[s]):o.push(xe(t,s));var c=o.slice(0),l=e.constructor.resources,f=g.parse(t);if(f&&f.length&&(!O.call(_e,f[0])||"this"===f[0]))return f.from=ye(f[0],n),f.from<0?l&&O.call(l,f[0])?a.push("var "+f[0]+" = this.constructor.resources."+f[0]+";"):(f.unshift("this"),f.from=0):"string"!=typeof n[f.from]&&f.unshift(o[f.from]),a.push("return "+f.join(".")),ke(o,a,f,i);var h,u=0,p=function(t){for(var e,n,i,s=[],r=t.length,a=0;a<r;)if(n=e,32===(e=t.charCodeAt(a))||9<=e&&e<=13)++a;else{switch(e){case 39:case 34:(a=Ae(e,t,a+1))===r&&W("Unclosed "+String.fromCharCode(e)+" .",{code:1001,expr:t});break;case 47:$e(t,a)&&(a=Ae(e,t,a+1))===r&&W("Unclosed "+String.fromCharCode(e)+" .",{code:1001,expr:t});break;default:if(46===n){a=be(t,a+1);continue}if(we(e)){i=be(t,a+1),58!==t.charCodeAt(i)?s.push(a,i):me(t,a-1)&&s.push(a,i),a=i;continue}}++a}return s}(t);for(r=0;r<p.length;r+=2)p[r+1]<0||(h=t.slice(p[r]+u,p[r+1]+u),f=g.parse(h.replace(b,"")),O.call(_e,f[0])||((s=ye(f[0],n))<0?l&&O.call(l,f[0])?(a.push("var "+f[0]+" = this.constructor.resources."+f[0]+";"),c.push(f[0])):(t=t.slice(0,p[r]+u)+"this."+h+t.slice(p[r+1]+u),u+=5):"string"!=typeof n[s]&&(t=t.slice(0,p[r]+u)+o[s]+"."+h+t.slice(p[r+1]+u),u+=o[s].length+1)));return a.push("return "+t),ke(o,a,null,i)}},Ce=Bt.MODES,Oe={parse:function(t,e,n){var i,s,r,a,o,c,l=-1,f=t.length;if(t[0]===y.TWO_WAY?(l=Ce.TWO_WAY,t=t.slice(1,f)):t[f-1]===y.ANY_WAY?(l=Ce.ANY_WAY,t=t.slice(0,f-1)):t[f-1]===y.ASSIGN?(l=Ce.ASSIGN,t=t.slice(0,f-1)):t[f-1]===y.ONE_TIME?(l=Ce.ONE_TIME,t=t.slice(0,f-1)):l=Ce.ONE_WAY,l===Ce.TWO_WAY)g.test(t.trim())||W("Invalid two-way binding expression!",{code:1001,expr:arguments[0],desc:"`"+arguments[0]+"` is not a valid two-way binding expression. Must be a property name or path."}),a=Ee.parse(t,e,n,arguments[0]);else if(t.indexOf(y.CONVERTER)<0)a=Ee.parse(t,e,n,arguments[0]);else if(o=t.split(y.CONVERTER),a=Ee.parse(o[0],e,n,arguments[0]),1<o.length)for(i=1;i<o.length;++i){(c=o[i].trim())||W("Converter must not be empty!",{code:1001,expr:arguments[0],desc:"Empty converter in the expression `"+arguments[0]+"` is not allowed."});for(var h="$value";0<=t.indexOf(h);)h="$"+h;var u=c.indexOf("(");c=0<u?c.slice(0,u+1)+h+","+c.slice(u+1):c+"("+h+")",r=Ee.parse(c,e,n.concat([h]),arguments[0]),(s=s||[]).push(r)}var p={mode:l,evaluator:a};return s&&s.length&&(p.converters=s),p}},Te={parse:function(t,e,n){var i=t.indexOf(y.MODIFIER)<0?[t]:t.split(y.MODIFIER);i[0]=i[0].trim();var s={};if(k.test(i[0])?s.handler=i[0].replace($,""):((n=n.slice(0)).push("$event"),s.evaluator=Ee.parse(i[0],e,n)),1<i.length){for(var r=[],a=1;a<i.length;++a)r.push(i[a].trim());s.modifiers=r}return s}},Ne={tryParse:function(t){return"false"!==t&&("true"===t||(isNaN(t)?void 0:Number(t)))}},Se=Bt.MODES;function De(t){this.pattern=t}I({constructor:De,statics:{create:function(t){return new De(t)}},connect:function(t,e,n){this.flag=0,this.scopes=n,this.target=e,this.method="function"==typeof t?t:e[t];var i=this.pattern;i.mode!==Se.ASSIGN?(this.execute=this.execute.bind(this),this.invalidate=this.invalidate.bind(this),this.flag=1,this.execute(),n[0].on("updating",this.execute),Vt.record(e,this)):this.target.set(this.targetProp,Zt(i,n))},destroy:function(){this.scopes[0].off("updating",this.execute),At(this)},execute:function(){var t=this.pattern;if(0!==this.flag||t.mode===Se.ANY_WAY){yt(this);var e=Zt(t,this.scopes);bt(),this.method.call(this.target,e,this.scopes),this.flag=0,t.mode===Se.ONE_TIME&&this.destroy()}},invalidate:function(t){this.keys&&0<=this.keys.indexOf(t)&&(this.scopes[0].invalidate(),this.flag=1)}});var Ie=Bt.MODES;function Me(t){t!==y.DATA&&t!==y.TEXT&&W(t+" is not allowed in expr() for data binding")}function Pe(t,e){var n,i,s,r=t.attrs;if(t.xif&&(Me((s=t.xif.args)[0]),t.xif=je(s,t,e)),t.xfor&&(Array.isArray(t.xfor[0])||(t.xfor[0]=t.xfor[0].replace(b,"").split(",")),Me((s=t.xfor[1].args)[0]),t.xfor[1]=je(s,t,e),t.identifiers=t.identifiers.concat([t.xfor[0]])),t.xkey&&(Me((s=t.xkey.args)[0]),t.xkey=je(s,t,e)),r)for(i in r)(n=r[i])&&"object"==typeof n&&(n.__extag_expr__===ee?(Me((s=n.args)[0]),r[i]=je(s,t,e)):"style"===i&&(t[i]=Ye(n,t,e),delete r[i]));if(null==t.type&&null==t.xtype)switch(t.tag){case"x:slot":t.type=Ut;break;case"x:frag":t.type=Ft}t.events&&function(t,e){var n,i,s,r,a=t.events;for(n in a)(r=a[n])&&"object"==typeof r&&r.__extag_expr__===ee&&((s=r.args)[0]!==y.EVENT&&W(s[0]+" is not allowed in expr() for event binding"),(i=je(s,t,e))&&(a[n]=i))}(t,e)}function We(t,e,n){var i=typeof t;return"string"===i?Ee.parse(t,e,n):"function"===i?t:void W("evaluator must be string or function")}function Ye(t,e,n){var i,s;for(i in t)(s=t[i])&&"object"==typeof s&&s.__extag_expr__===ee&&(t[i]=je(s.args,e,n));return t}function je(t,e,n){t.length<2&&W("Unexpected arguments for expr()");var i,s,r,a=t[0],o=t[1],c=typeof o;if(a===y.DATA||a===y.FRAGMENT){if(a===y.FRAGMENT&&(i="frag"),2===t.length&&"string"===c)return i||o[0]!==y.TWO_WAY?null!=(r=Ne.tryParse(o.trim()))?r:new ee("frag"===((s=Oe.parse(o,n,e.identifiers)).target=i)?De:Bt,s):(g.test(o.slice(1))||W("Invalid two-way binding expression!",{code:1001,expr:arguments[0],desc:"`"+arguments[0]+"` is not a valid two-way binding expression. Must be a property name or path."}),new ee(Bt,s={mode:Ie.TWO_WAY,evaluator:We(o.slice(1),n,e.identifiers)}));switch(t[t.length-1]){case y.ASSIGN:a=Ie.ASSIGN,t=t.slice(0,-1);break;case y.ANY_WAY:a=Ie.ANY_WAY,t=t.slice(0,-1);break;case y.ONE_TIME:a=Ie.ONE_TIME,t=t.slice(0,-1);break;default:a=Ie.ONE_WAY}return new ee("frag"===i?De:Bt,s={mode:a,target:i,evaluator:We(o,n,e.identifiers),converters:t.length<=2?null:function(t,e,n){for(var i,s=[],r=0;r<t.length;++r)i=We(t[r],e,n),s.push(i);return s}(t.slice(2),n,e.identifiers)})}if(a===y.EVENT)return"string"===c&&2===t.length?s=Te.parse(o,n,e.identifiers):"function"===c?s={evaluator:We(o,n,e.identifiers),modifiers:2<t.length?t.slice(2):null}:W("Unexpected arguments for expr()"),new ee(Jt,s);if(a===y.TEXT){s=[];for(var l=1;l<t.length;++l)(o=t[l])&&"object"==typeof o&&o.__extag_expr__&&(o=je(o.args,e,n)),s.push(o);return new ee(ie,s)}W('The first argument of expr() should be one of "@", "+", "#", "{}"')}function ze(t,e){var n,i,s=t.contents;if(s&&s.length)for(n=(s=t.contents=function t(e,n){var i,s=e.length;if(!n)for(i=0;i<s;++i)if(Array.isArray(e[i])){n=[];break}if(n)for(i=0;i<s;++i){var r=e[i];Array.isArray(r)?t(r,n):n.push(r)}return n||e}(s)).length-1;0<=n;--n)if("object"===typeof(i=s[n])){if(i.__extag_node__===d){t.ns&&!i.ns&&(i.ns=t.ns),i.useExpr=!0,i.identifiers=t.identifiers,Pe(i,e),ze(i,e);continue}if(i.__extag_expr__===ee){var r=i.args[0];r!==y.DATA&&r!==y.FRAGMENT&&W(r+" is not allowed in expr() for text or fragment binding"),s[n]={__extag_node__:d,useExpr:!0,type:ee,expr:je(i.args,t,e)}}}}var Ve={xns:!0,xif:!0,xfor:!0,xkey:!0,xname:!0,xslot:!0,xtype:!0,events:!0};function Ge(t,e,n){var i={__extag_node__:d},s=typeof t;if("string"===s){var r=t.indexOf(":");if(r<0)i.ns="",i.tag=t;else{if("x"===t.slice(0,r))switch(t){case"x:slot":i.tag=t,i.type=Ut;break;case"x:frag":i.tag=t,i.type=Ft}i.type||(i.ns=t.slice(0,r),i.tag=t.slice(r+1))}}else if("function"===s)if(t.__extag_component_class__||t===Ft)i.type=t;else{var a=Ot.get(_);a&&(i.type=a.getHookableComponentClass(t)),"function"==typeof i.type&&i.type.__extag_component_class__||W("component class is not found.")}else W("The first argument must be string, function, component class or constructor.");if(e&&"object"==typeof e){e.xns&&(i.ns=e.xns),e.xif&&(i.xif=e.xif),e.xfor&&(i.xfor=e.xfor),e.xkey&&(i.xkey=e.xkey),e.xname&&(i.name=e.xname),e.xslot&&(i.slot=e.xslot),e.xtype&&(e.xtype instanceof ee?i.xtype=e.xtype:i.type=e.xtype),e.events&&(i.events=e.events);var o,c={};for(o in e)!Ve[o]&&O.call(e,o)&&(c[o]=e[o]);i.attrs=c}return null!=n&&(3<arguments.length?n=E.call(arguments,2):Array.isArray(n)||(n=[n]),i.contents=n),i}function Re(){return{args:E.call(arguments,0),__extag_expr__:ee}}var Ue={node:Ge,expr:Re,parse:function(t,e){var n=t(Ge,Re);return n.__extag_node__!==d&&W("template root must be a tag node"),n.useExpr=!0,n.identifiers=["this"],Pe(n,e),ze(n,e),n.type&&(n.type===Ft?(n.tag="x:frag",n.type=null):W("component can not be used as root tag of another component template.")),(n.xif||n.xfor||n.xkey)&&W("`xif`, `xfor`, `xkey` can not be used on root tag of component template."),n}};Gt.parseJSX=Ue.parse;var Fe=/\s*\n\s*/g,Le=new RegExp(y.DATA+"\\"+"{}"[0]+"(\\s|.)*?\\"+"{}"[1]),Xe={like:function(t){return Le.test(t)},parse:function(e,t,n){for(var i,s,r,a,o,c,l=[],f=0,h=e.length,u=0,p=0;u<h;){switch(r=s,s=e.charCodeAt(u)){case 125:if(a&&0===--p){f<i&&(c=(c=e.slice(f,i)).replace(Fe," "))&&(c=P(c),l.push(c));try{123===e.charCodeAt(i+2)&&125===e.charCodeAt(u-1)?(o=Oe.parse(e.slice(i+3,u-1),t,n)).target="frag":(o=Oe.parse(e.slice(i+2,u),t,n)).target="text"}catch(t){e=e.slice(i,u+1),W(t,{code:1001,expr:e})}l.push(new ee("frag"===o.target?De:Bt,o)),f=i=u+1,a=!1}break;case 123:a?(64===r&&W("Unclosed @{ .",{code:1001,expr:e}),++p):64===r&&(i=u-1,a=!0,p=1);break;case 39:case 34:a&&(u=Ee.gotoEnding(s,e,u+1))===h&&W("Unclosed "+String.fromCharCode(s)+" .",{code:1001,expr:e});break;case 47:a&&Ee.regexStarts(e,u)&&(u=Ee.gotoEnding(s,e,u+1))===h&&W("Unclosed "+String.fromCharCode(s)+" .",{code:1001,expr:e})}++u}return a&&W("Unclosed @{ .",{code:1001,expr:e}),0<f&&f<h&&(c=(c=e.slice(f,h)).replace(Fe," "))&&(c=P(c),l.push(c)),l.length?l:null}},Qe=/;/g,qe=/^[a-z0-9\-_]+$/i,He={parse:function(t,e,n,i){var s,r,a,o,c,l,f,h,u={},p=t.split(Qe);for(l=0,c=p.length;l<c;++l)if((h=(r=p[l].trim()).indexOf(":"))<0){if(r=r.trim())for(o=r.split(b),f=0;f<o.length;++f)u[o[f]]=!0}else{a=r.slice(0,h).trim(),t=r.slice(h+1).trim(),a&&qe.test(a)||W("Illegal "+(i?"x:style":"x:class")+" expression.",{code:1001,expr:a||arguments[0]});try{if(!Xe.like(t)){u[a]=i?t:Ne.tryParse(t);continue}s=Xe.parse(t,e,n)}catch(t){throw 1001===t.code&&(t.expr="@{0}".replace("0",t.expr)),t}s?1===s.length?u[a]=s[0]:i?u[a]=new ee(ie,s):W("Illegal x:class expression.",{code:1001,expr:t}):u[a]=i?t:Ne.tryParse(t)}return u}},Ze=/^\(.+\)$/,Be=/\s+of\s+/,Je=/,/,Ke=/^[\w\$\_]+$/,tn=/[a-zA-Z]/,en=/[\s/>]/,nn=/[\s\/]+/,sn=/^x:/,rn={html:"http://www.w3.org/1999/xhtml",math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};var an={"!":!0,br:!0,hr:!0,area:!0,base:!0,img:!0,input:!0,link:!0,meta:!0,basefont:!0,param:!0,col:!0,frame:!0,embed:!0,keygen:!0,source:!0,command:!0,track:!0,wbr:!0},on={"x:ns":!0,"x:if":!0,"x:for":!0,"x:key":!0,"x:name":!0,"x:slot":!0,"x:type":!0,"x:class":!0,"x:style":!0};function cn(t,e){var n=t[e];return null==n&&(t[e]=n={}),n}function ln(t,e){var n=g.search(t,e.constructor.resources);if("function"==typeof n){if(n.__extag_component_class__)return n;var i=Ot.get(_);if(i&&"function"==typeof(n=i.getHookableComponentClass(n))&&n.__extag_component_class__)return n}}function fn(t,e,n,i,s){var r;if("x:class"===t)n.classes=He.parse(e,i,s,!1);else if("x:style"===t)n.style=He.parse(e,i,s,!0);else if("x:type"===t){var a=ln(e,i);a?n.type=a:(r=Oe.parse(e,i,s),n.xtype=new ee(Bt,r))}else if("x:name"===t)n.name=e;else if("x:slot"===t)n.slot=e;else if("x:key"===t)r=Oe.parse(e,i,s),n.xkey=new ee(Bt,r);else if("x:for"===t){var o=e.trim().split(Be);2!==o.length&&W('Illegal x:for="'+e+'".',{code:1001,expr:e}),r=o[1].trim(),o[0]=o[0].trim(),o=Ze.test(o[0])?o[0].slice(1,-1).split(Je):[o[0]];for(var c=0;c<o.length;++c)o[c]=o[c].trim(),Ke.test(o[c])||W('Illegal x:for="'+e+'".',{code:1001,expr:e});(r=r&&Oe.parse(r,i,s))?n.xfor=[o,new ee(Bt,r)]:W('Illegal x:for="'+e+'".',{code:1001,expr:e}),n.identifiers=s.slice(0),n.identifiers.push(o)}else"x:if"===t?(r=Oe.parse(e,i,s))?n.xif=new ee(Bt,r):W('Illegal x:if="'+e+'".',{code:1001,expr:e}):"x:ns"===t&&(n.ns=e)}function hn(t,e,n,i,s){var r,a,o,c=t[t.length-1];if(null!=e)if(c===y.EVENT)a=cn(n,"events"),o=t.slice(0,-1),r=Te.parse(e,i,s),a[o]=new ee(Jt,r);else switch(a=cn(n,"attrs"),c){case y.DATA:o=t.slice(0,-1),r=Ne.tryParse(e.trim()),a[o]=null!=r?r:new ee(Bt,r=Oe.parse(e,i,s));break;case y.TEXT:o=t.slice(0,-1);try{r=Xe.parse(e,i,s)}catch(t){throw t}r?1===r.length?a[o]=r[0]:a[o]=new ee(ie,r):a[o]=e;break;default:a[t]=e}else(a=cn(n,"attrs"))[t]=!0}function un(t,e,n){for(var i=e.length,s=n;s<i;){if(t.test(e[s]))return s;s+=1}return-1}function pn(t,e,n,i){for(var s,r,a,o,c=e,l=e,f=e,h=t.length;c<h;){if(s=t[c],r){if(!w.test(s)){if(f=0<(f='"'===s||"'"===s?(l=c+1,t.indexOf(s,l)):un(en,t,l=c))?f:h,n)try{120===(o=r).charCodeAt(0)&&o in on?fn(r,t.slice(l,f),n,i,n.identifiers):hn(r,t.slice(l,f),n,i,n.identifiers)}catch(t){throw t}if(">"===t[f])return f;r=null,l=f=c=f+1;continue}}else{if(">"===s){if(l<(f=c))for(a=t.slice(l,f).trim().split(nn);0<a.length;)(r=a.shift())&&n&&hn(r,null,n,i,n.identifiers);return f}if("="===s){if(l<(f=c)){for(a=t.slice(l,f).trim().split(nn);1<a.length;)(r=a.shift())&&n&&hn(r,null,n,i,n.identifiers);r=a.shift()}l=f=c=f+1;continue}}c+=1}}var gn=/^\s*\n\s*/,dn=/\s*\n\s*$/;function vn(t,e){return{__extag_node__:d,useExpr:!0,type:ee,expr:e instanceof ee?e:new ee(t,e)}}function _n(t,e,n,i,s,r){var a,o=i.contents||[],c=t.slice(e,n);if(c=c.replace(gn,"").replace(dn,"")){if(Xe.like(c)){try{a=Xe.parse(c,s,r)}catch(t){throw t}if(a)if(1===a.length&&a[0]instanceof ee)u=a[0],o.push(vn(a[0].binding,a[0]));else{for(var l=-1,f=0,h=a.length;f<h;++f){var u=a[f];u instanceof ee&&"frag"===u.pattern.target?(l<f&&(1<f-l?o.push(vn(ie,a.slice(l,f))):a[l]instanceof ee?o.push(vn(a[l].binding,a[l])):o.push(a[l])),o.push(vn(u.binding,u)),l=-1):l<0&&(l=f)}0<=l&&l<f&&(1<f-l?o.push(vn(ie,a.slice(l,f))):a[l]instanceof ee?o.push(vn(a[l].binding,a[l])):o.push(a[l]))}else o.push(P(c))}else o.push(P(c));i.contents=o}}var mn=function(t,e){var n=e.constructor,i=function(t,e){var n,i,s,r,a,o,c=0,l=0,f=[],h=0,u=(t=t.trim()).length;for(r={tag:"<>",contents:[],identifiers:["this"]},f.push(r);h<u;){if("<"===t[h]){if(n=t[h+1],tn.test(n)){if(c<h&&_n(t,c,h,r,e,r.identifiers),l=un(en,t,c=h+1),s=t.slice(c,l),(i={}).tag=s,i.useExpr=!0,i.__extag_node__=d,i.identifiers=r.identifiers,">"!==t[l]&&(l=pn(t,c=l+=1,i,e,i.identifiers)),i.ns||(i.attrs&&i.attrs.xmlns?i.ns=(o=i.attrs.xmlns)&&o!==rn.html?o===rn.svg?"svg":o===rn.math?"math":o===rn.xlink?"xlink":null:"":r.ns&&(i.ns=r.ns)),null==i.type&&null==i.xtype)if(sn.test(s))switch(s){case"x:slot":i.type=Ut;break;case"x:frag":i.type=Ft}else if(A.test(s)){var p=ln(s,e);p&&(i.type=p)}r&&(r.contents=r.contents||[],r.contents.push(i)),"/"===t[l-1]||(a=s,O.call(an,a))||(f.push(i),r=i),c=l=h=l+1;continue}if("/"===n&&tn.test(t[h+2])){if(c<h&&_n(t,c,h,r,e,r.identifiers),l=un(en,t,c=h+2),(s=t.slice(c,l))!==r.tag&&W("Unclosed tag "+r.tag),">"!==t[l]&&(l=pn(t,c=l+=1)),!(1<f.length))return f[0];f.pop(),0<f.length&&(r=f[f.length-1]),c=l=h=l+1;continue}if("!"===n&&"\x3c!--"===t.slice(h,h+4)){c<h&&_n(t,c,h,r,e,r.identifiers),c=h+4,c=l=h=(l=0<(l=t.indexOf("--\x3e",c))?l:t.length)+3;continue}}h+=1}return c<u&&_n(t,c,u,r,e,r.identifiers),f}(t,e)[0].contents,s=i[0];return 1!==i.length&&W("The template of component "+(n.fullname||n.name)+" must have only one root tag."),"!"!==s.tag&&"#"!==s.tag||W("Component template root tag must be a DOM element, instead of: "+t.slice(0,t.indexOf(">"))),"x:slot"!==s.tag&&"x:view"!==s.tag||W(s.tag+" can not be used as root tag of component template: "+t.slice(0,t.indexOf(">"))),s.type&&s.type.__extag_component_class__&&W("component can not be used as root tag of another component template: "+t.slice(0,t.indexOf(">"))),(s.xif||s.xfor||s.xkey)&&W("`x:if`, `x:for`, `x:key` can not be used on root tag of component template: "+t.slice(0,t.indexOf(">"))),s};return Gt.parseHTMX=mn,"undefined"!=typeof ExtagDOM&&Ot.set("view-engine",ExtagDOM),{anew:q.anew,inst:q.inst,node:Ue.node,expr:Ue.expr,conf:function(t,e){if(1===arguments.length)return Ot.get(t);Ot.set(t,e)},defineClass:I,setImmediate:mt.setImmediate,Validator:st,Watcher:j,Model:$t,Cache:Et,Text:zt,Slot:Ut,Portal:Lt,Element:Qt,Fragment:Ft,Component:Rt,version:"0.5.5"}});
