<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
  <link href="../stylesheets/codemirror.css" rel="stylesheet">
  <link href="../stylesheets/alicestyle.css" rel="stylesheet">
  <link href="../stylesheets/common.css" rel="stylesheet">

  <title>模板语法 - Extag</title>
</head>
<body>
  <div class="main">
    <aside class="side-bar"></aside>
    <article class="article">
      <h2>模板语法</h2>
      <p>在定义一个子组件类时，我们可以为其声明模板。模板中可添加事件处理器、数据绑定，访问外部资源和引用其他子组件。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code" role="presentation" style=""><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">SubComponent</span> <span class="cm-operator">=</span> <span class="cm-variable">Extag</span>.<span class="cm-property">defineClass</span>({</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">extends</span>: <span class="cm-variable">Extag</span>.<span class="cm-property">Component</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-comment">// 静态属性和方法</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">statics</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment">// fullname: 'SubComponent' // 给子组件起个全名，出现日志时便于识别</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">template</span>: <span class="cm-string">'&lt;div&gt;...&lt;/div&gt;'</span>, <span class="cm-comment">// 字符串模板，有且只有一个根标签</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">resources</span>: {<span class="cm-comment">/*...*/</span>},       <span class="cm-comment">// resources中添加子组件类等资源</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">attributes</span>: {<span class="cm-comment">/*...*/</span>}       <span class="cm-comment">// attributes中添加特性描述符</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-comment">// 实例属性和方法</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre></div></div></div>
      <p>模板中除了可以访问组件本身的<span class="expr">attributes</span>和方法外，还可以访问本地静态<span class="expr">resources</span>中注册的资源，包括其他子组件类、预定义的常量和方法。</p>
      <p>在创建这个子组件类的第一个实例时，模板将会被解析，之后就可用于该子组件所有实例的初始化，自动创建根元素和后代节点，自动监听事件等等。</p>
      <h3 id="event-listening">事件监听</h3>
      <p>在模板中，我们在click等事件后面使用<span class="expr">+=</span>来表示添加一个事件处理器，看起来有点像运算符重载。可以将一个函数作为事件处理器：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">click+</span>=<span class="cm-string">"onClick"</span><span class="cm-tag cm-bracket">&gt;</span>OK<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">x:type</span>=<span class="cm-string">"Ticker"</span> <span class="cm-attribute">tick+</span>=<span class="cm-string">"onTick"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <p>实际上就是使用<span class="expr">on</span>方法来监听事件，而组件、元素销毁之时则自动调用<span class="expr">off</span>移除所有的事件处理器。</p>
      <p>你很可能需要在组件<span class="expr">setup</span>的时候，手动地将一个函数绑定到<span class="expr">this</span>，像这样：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// setup发生在模板引擎开始工作之前</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">setup</span>() { </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-keyword">return</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">onClick</span>: <span class="cm-keyword">this</span>.<span class="cm-property">onClick</span>.<span class="cm-property">bind</span>(<span class="cm-keyword">this</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div>
      <p>或者在模板表达式中使用<span class="expr">::bind</span>加以修饰，模板引擎就会自动将这个事件处理函数绑定到<span class="expr">this</span>，像这样：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">click+</span>=<span class="cm-string">"onClick::bind"</span><span class="cm-tag cm-bracket">&gt;</span>OK<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <p>如果无需处理事件参数，则可以使用一小段JS表达式作为内联的事件处理器：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">click+</span>=<span class="cm-string">"close()"</span><span class="cm-tag cm-bracket">&gt;</span>Close<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <p>你还可以在表达式后面追加其他一些修饰器，以双冒号<span class="expr">::</span>来连接：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">click+</span>=<span class="cm-string">"close()::once::stop::prevent::capture"</span><span class="cm-tag cm-bracket">&gt;</span>Close<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <p><span class="expr">once</span>表示单次监听，<span class="expr">stop</span>的作用是<span class="expr">event.stopPropagation()</span>，<span class="expr">prevent</span>的作用是<span class="expr">event.preventDefault()</span>，<span class="expr">capture</span>表示监听捕获阶段的事件。</p>
      <h3 id="data-binding">数据绑定</h3>
      <p>Extag中的数据绑定是基于自定义属性更改事件而实现的。这意味着，即便不使用绑定，你也能完成数据的传递。很显然，在模板中使用数据绑定表达式更为简洁直观。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text"</span> <span class="cm-attribute">value@</span>=<span class="cm-string">"message"</span> <span class="cm-attribute">x:name</span>=<span class="cm-string">"msg"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <p>几乎等价于：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">this</span>.<span class="cm-property">on</span>(<span class="cm-string">'changed'</span>, (<span class="cm-keyword">function</span>(<span class="cm-def">key</span>, <span class="cm-def">value</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-keyword">if</span> (<span class="cm-variable-2">key</span> <span class="cm-operator">!==</span> <span class="cm-string">'message'</span>) { <span class="cm-keyword">return</span>; }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-keyword">this</span>.<span class="cm-property">msg</span>.<span class="cm-property">set</span>(<span class="cm-string">'value'</span>, <span class="cm-variable-2">value</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}).<span class="cm-property">bind</span>(<span class="cm-keyword">this</span>));</span></pre></div></div></div>
      <p>我们使用<span class="expr">@</span>符号表示等号后面是一个绑定表达式。表达式中可以只是一个特性名，也可以是一小段JS，可以包括多个属性名或属性路径。元素或组件属性绑定的语法，使用<span class="expr">@=</span>来连接对象属性和绑定表达式，看起来就像是运算符重载：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--&lt;对象属性名&gt;@="&lt;求值器表达式&gt;[|=转换器表达式][绑定模式符]"--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--单路单向绑定--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">class@</span>=<span class="cm-string">"className"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--单路单次绑定，以?结尾--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span> <span class="cm-attribute">style@</span>=<span class="cm-string">"styleString ?"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--单路单次赋值，以!结尾--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">img</span> <span class="cm-attribute">src@</span>=<span class="cm-string">"imgSrc !"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--单路单向绑定，连无参转换器--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">title@</span>=<span class="cm-string">"title |=upper"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--单路单向绑定，连带参转换器--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">value@</span>=<span class="cm-string">"date |=format('yyyy-MM-dd')"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--单路单向绑定，简单的JS表达式--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">span</span> <span class="cm-attribute">class@</span>=<span class="cm-string">"active ? 'active' : ''"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--多路单向绑定，当text、limit属性值改变后都会执行--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">span</span> <span class="cm-attribute">inner-html@</span>=<span class="cm-string">"encode(ellipsis(text, limit))"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--以^结尾，表示到了update阶段，无论如何都会执行一次--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">span</span> <span class="cm-attribute">inner-html@</span>=<span class="cm-string">"getCurrentTime() ^"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <div class="tip-box"><p>以<span class="expr">?</span>结尾的单次绑定是指赋完初始值后，还会监听一次该表达式中某个可绑定属性的更改，表达式还有可能再次执行，然后解除绑定。而以<span class="expr">!</span>结尾的表达式只会执行一次，不会监听属性更改事件。</p></div>
     
      <p>对于<a class="link" href="#using-child-component">子组件</a>的number、Object类型特性的字面量赋值，数据绑定也是必需的：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"checkbox"</span> <span class="cm-attribute">value</span>=<span class="cm-string">"1"</span> <span class="cm-attribute">checked</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">x:type</span>=<span class="cm-string">"Slider"</span> <span class="cm-attribute">min@</span>=<span class="cm-string">"0"</span> <span class="cm-attribute">max@</span>=<span class="cm-string">"100"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">x:type</span>=<span class="cm-string">"MapBox"</span> <span class="cm-attribute">map@</span>=<span class="cm-string">"{a:1,b:2,c:3}"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">x:type</span>=<span class="cm-string">"ListBox"</span> <span class="cm-attribute">list@</span>=<span class="cm-string">"[1,2,3,4,5]"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <p>这种情况下，数据绑定只会完成一次字面量赋值，没有什么需要监听的属性更改事件，也不必以<span class="expr">!</span>结尾。出现在标签中而没有赋值或绑定的特性，其特性值默认为<span class="expr">true</span>，不必使用<span class="expr">@=</span>。</p>
      <h3 id="two-way-data-binding">双向数据绑定</h3>
      <p>在模板中，组件与子组件、子组件与<a href="./model.html#model-for-object" class="link">Model</a>对象之间可以使用双向数据绑定。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--&lt;对象属性名&gt;@="&lt;双向绑定符@&gt;&lt;属性路径&gt;"--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--组件与组件之间的双向数据绑定--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">x:type</span>=<span class="cm-string">"TextInput"</span> <span class="cm-attribute">model@</span>=<span class="cm-string">"@text"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--组件与Model对象之间的双向数据绑定--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">x:type</span>=<span class="cm-string">"TextInput"</span> <span class="cm-attribute">model@</span>=<span class="cm-string">"@model.text"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <p>其中TextInput是对input[type=text]封装而成的组件，model是可绑定的。参见<a class="link" href="#using-child-component">使用子组件</a>。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">TextIput</span> <span class="cm-operator">=</span> <span class="cm-variable">Extag</span>.<span class="cm-property">defineClass</span>({</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">extends</span>: <span class="cm-variable">Extag</span>.<span class="cm-property">Component</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">statics</span>: {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-property">attributes</span>: [<span class="cm-string">'model'</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-property">template</span>: <span class="cm-string">'&lt;input type="text" value@="model" change+="onChange::bind"&gt;'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">onChange</span>: <span class="cm-keyword">function</span>(<span class="cm-def">event</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-keyword">this</span>.<span class="cm-property">model</span> <span class="cm-operator">=</span> <span class="cm-variable-2">event</span>.<span class="cm-property">target</span>.<span class="cm-property">value</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">});</span></pre></div></div></div>
      <div class="tip-box"><p>如果绑定对象不是组件，而是元素，或者绑定的对象属性是不可绑定的，则双向绑定只能单向有用。</p></div>
      <h3 id="txet-binding">文本插值绑定</h3>
      <p>上文中使用了<span class="expr">inner-html</span>，是Extag为元素特殊定义的特性，对应属性innerHTML。对于innerText或textContent，Extag则没有提供对应的特性，这时你可以在模板中使用文本插值绑定。模板中的文本插值绑定，由静态文本和以<span class="expr">@{ }</span>包裹的数据绑定表达式共同组成。基本语法如下：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--@{&lt;求值器表达式&gt;[|=转换器表达式][绑定模式符]}--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--单路单向绑定--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span>@{address}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--单路单次绑定，以?结尾--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>Tips: @{tips ?}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--单路单次赋值，以!结尾--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span>@{label !}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--单路单向绑定，连无参转换器--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>@{title |=upper}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--单路单向绑定，连有参转换器--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span>@{date |=format('yyyy-MM-dd')}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--单路单向绑定，简单的JS表达式--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span>Anwser: @{choice === 1 ? 'yes' : 'no'}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--多路单向绑定，JS表达式，当text、limit属性值改变后都会执行--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span>@{text.slice(0, limit}...<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--以^结尾，表示到了update阶段，无论如何都会执行一次--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span>@{getCurrentTime() ^}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <!-- <p><span class="expr">@{ }</span>一般返回的是文本内容，偶尔也可用来返回一个虚拟节点或数组，作用类似于JSX，参见<a class="link" href="#fragment-rendering">片段渲染</a>。</p> -->
      <p>文本插值绑定同样可用于元素或组件属性，使用<span class="expr">#=</span>来连接对象属性和文本插值绑定表达式：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--&lt;对象属性名&gt;#="穿插一个或多个@{&lt;求值器表达式&gt;[|=转换器表达式][绑定模式符]}"--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">href#</span>=<span class="cm-string">"https://www.xxx.com/@{module}/@{page}.html"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">   <span class="cm-attribute">class#</span>=<span class="cm-string">"btn btn-next @{page &gt;= total ? 'disabled' : ''}"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">   <span class="cm-attribute">style#</span>=<span class="cm-string">"margin: 5px; color: @{color}; font-size: @{fontSize}px;"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  下一页</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <h3 id="class-and-style-binding">class和style绑定</h3>
      <p>特别地，对于class和style的绑定，除了使用<span class="expr">@=</span>，<span class="expr">#=</span>外，Extag还提供了一种更优化的扩展语法，通过特性<span class="expr">x:class</span>和<span class="expr">x:style</span>来实现：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--&lt;静态类名&gt;; &lt;动态类名&gt;:@{&lt;求值器表达式&gt;[|=转换器表达式][绑定模式符]};--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">x:class</span>=<span class="cm-string">"btn btn-next; disabled: @{page &gt;= total};"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">   <span class="cm-attribute">x:style</span>=<span class="cm-string">"margin: 5px; color: @{color}; font-size: @{fontSize}px;"</span><span class="cm-tag cm-bracket">&gt;</span>下一页<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span>  </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--&lt;样式属性名&gt;:可穿插多个@{&lt;求值器表达式&gt;[|=转换器表达式][绑定模式符]};--&gt;</span></span></pre></div></div></div>
      <div class="tip-box">
        <p>注意这里有一个限制，由于我们使用分号<span class="expr">;</span>来分割多个表达式，因此各个表达式中不能再出现分号<span class="expr">;</span>。而通常来说，这不成问题。</p>
      </div>
      <p>模板中的<span class="expr">x:class</span>和<span class="expr">x:style</span>即对应着元素和组件的成员对象classes和style。<span class="expr">x:class</span>中静态class名可以直接列出来，如<span class="expr">btn btn-next;</span>。而动态class名，由<span class="expr">@{ }</span>表达式返回boolean类型的值，来决定保留与否。<span class="expr">x:style</span>中的样式属性值都为string类型，可插入必要的<span class="expr">@{ }</span>表达式。</p>
      <p>注意，最好不要在同一个标签上同时使用，<span class="expr">class@=</span>，<span class="expr">class#=</span>和<span class="expr">x:class=</span>，以及<span class="expr">style@=</span>，<span class="expr">style#=</span>和<span class="expr">x:style=</span>，因为容易发生冲突。</p>
      <h3 id="optional-converters">可选转换器</h3>
      <p>单向绑定表达式中以<span class="expr">|=</span>连接的转换器是可选的。注意，绑定表达式中<span class="expr">|=</span>的作用不同于JS中的运算符<span class="expr">|=</span>。这里，转换器就是一个函数，<span class="expr">|=</span>前面的结果值作为这个函数的第一个参数传入。我们可以在组件<span class="expr">resources</span>中或组件<span class="expr">prototype</span>上注册模板中需要使用的转换器。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text/template"</span> <span class="cm-attribute">id</span>=<span class="cm-string">"demo-template"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">class</span>=<span class="cm-string">"demo"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h2</span><span class="cm-tag cm-bracket">&gt;</span>@{title |=upper|=wrap('#')}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h2</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <br>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">Demo</span> <span class="cm-operator">=</span> <span class="cm-variable">Extag</span>.<span class="cm-property">defineClass</span>({</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">extends</span>: <span class="cm-variable">Extag</span>.<span class="cm-property">Component</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">statics</span>: {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-property">attributes</span>: {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-property">title</span>: <span class="cm-string">''</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-property">resources</span>: {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-property">upper</span>: <span class="cm-keyword">function</span>(<span class="cm-def">text</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-keyword">return</span> <span class="cm-variable-2">text</span>.<span class="cm-property">toUpperCase</span>();</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-property">wrap</span>: <span class="cm-keyword">function</span>(<span class="cm-def">text</span>, <span class="cm-def">char</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">          <span class="cm-keyword">return</span> <span class="cm-variable-2">char</span> <span class="cm-operator">+</span> <span class="cm-variable-2">text</span> <span class="cm-operator">+</span> <span class="cm-variable-2">char</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      },</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-property">template</span>: <span class="cm-variable">ExtagDOM</span>.<span class="cm-property">query</span>(<span class="cm-string">'#demo-template'</span>).<span class="cm-property">innerHTML</span>    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">});</span></pre></div></div></div>
      <p>模板中<span class="expr">title|=upper|=wrap('#')</span>等价于<span class="expr">wrap(upper(title), '#')</span>，相较而言前一种写法更清晰。</p>
      <div class="tip-box">
        <!--<p>注意，ES有一个双冒号运算符的提案，而Extag模板语法中<span class="expr">::</span>的作用与之不同，效果上其实更类似于ES的另一个提案，使用<span class="expr">|></span>作为管道符。</p>-->
        <p>绑定表达式中的字符串字面量不应含有<span class="expr">|=</span>，否则会解析错误，这通常不是问题。</p>
        <p>绑定表达式中的转换器不宜超过<span class="expr">2</span>个，多个转换器通常可以合为一个。</p>
      </div>
      <h3 id="using-child-component">使用子组件</h3>
      <!-- <p>在组件模板中，使用子组件的方法很简单，只需在已有HTML标签中添加x:type特性，以引用组件resources中注册的子组件类。</p> -->
      <p>在组件模板中，引用组件<span class="expr">resources</span>中注册的子组件类，有以下几种方式：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text/template"</span> <span class="cm-attribute">id</span>=<span class="cm-string">"my-button-template"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">class</span>=<span class="cm-string">"my-button"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">x:slot</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">x:slot</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text/template"</span> <span class="cm-attribute">id</span>=<span class="cm-string">"demo-template"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">class</span>=<span class="cm-string">"demo"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">Button</span><span class="cm-tag cm-bracket">&gt;</span>OK<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">Button</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">MY.Button</span><span class="cm-tag cm-bracket">&gt;</span>OK<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">MY.Button</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">x:type</span>=<span class="cm-string">"Button"</span><span class="cm-tag cm-bracket">&gt;</span>OK<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span> </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">x:type</span>=<span class="cm-string">"MY.Button"</span><span class="cm-tag cm-bracket">&gt;</span>OK<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <br>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">MY</span> <span class="cm-operator">=</span> {};</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">MY</span>.<span class="cm-property">Button</span> <span class="cm-operator">=</span> <span class="cm-variable">Extag</span>.<span class="cm-property">defineClass</span>({</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-property">extends</span>: <span class="cm-variable">Extag</span>.<span class="cm-property">Component</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-property">statics</span>: {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">template</span>: <span class="cm-variable">ExtagDOM</span>.<span class="cm-property">query</span>(<span class="cm-string">'#my-botton-template'</span>).<span class="cm-property">innerHTML</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">});</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">Demo</span> <span class="cm-operator">=</span> <span class="cm-variable">Extag</span>.<span class="cm-property">defineClass</span>({</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-property">extends</span>: <span class="cm-variable">Extag</span>.<span class="cm-property">Component</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-property">statics</span>: {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">template</span>: <span class="cm-variable">ExtagDOM</span>.<span class="cm-property">query</span>(<span class="cm-string">'#demo-template'</span>).<span class="cm-property">innerHTML</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">resources</span>: {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-property">Button</span>: <span class="cm-variable">MY</span>.<span class="cm-property">Button</span>, <span class="cm-comment">// 注册子组件类</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-property">MY</span>: <span class="cm-variable">MY</span> <span class="cm-comment">// 或者注册组件所在模块</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">});</span></pre></div></div></div>
      <p>使用字符串模板时，元素标签名统一小写，标签名首字母大写的元素被推测为组件，并从<span class="expr">resources</span>中查找。或者，只需在已有HTML标签中添加<span class="expr">x:type</span>特性，以引用组件<span class="expr">resources</span>中注册的子组件类。</p>
      <div class="tip-box">
        <p>Extag组件的字符串模板不同于html，语法上是大小写敏感的。一般元素标签名采用小写，组件名采用首字母大写。样式名和DOM属性名可保持同html中的写法一样，但也可使用camelCase，ExtagDOM负责兼容两种不同的写法。组件名则建议为camelCase。</p>
      </div>
      <p>使用<span class="expr">x:type</span>表达式，如果无法在静态resources中找到相应的组件类，那么Extag会认为此处是一个动态组件，一旦类型确定下来，就在对应位置即时地创建相应的组件实例。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">Demo</span> <span class="cm-operator">=</span> <span class="cm-variable">Extag</span>.<span class="cm-property">defineClass</span>({</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">extends</span>: <span class="cm-variable">Extag</span>.<span class="cm-property">Component</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">statics</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">template</span>: <span class="cm-string-2">`</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>  <span class="cm-string-2">&lt;div class="demo"&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-string-2">&lt;a x:type="state.button"&gt;OK&lt;/a&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>  <span class="cm-string-2">&lt;/div&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-string-2">`</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">setup</span>: <span class="cm-keyword">function</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">var</span> <span class="cm-def">state</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">Extag</span>.<span class="cm-property">Model</span>({</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-property">button</span>: <span class="cm-atom">null</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-variable">setTimeout</span>(<span class="cm-keyword">function</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-variable-2">state</span>.<span class="cm-property">button</span> <span class="cm-operator">=</span> <span class="cm-variable">MY</span>.<span class="cm-property">Button</span>; <span class="cm-comment">// 2秒后显示</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    }, <span class="cm-number">2000</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-property">state</span>: <span class="cm-variable-2">state</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre></div></div></div>

      <div class="tip-box"><p><span class="expr">x:type</span>的作用有点像input元素的type属性，不同type的input有着不同的外观和功能，组件亦是如此。</p></div>
      
      <!-- <h3 id="component-output">组件动态输出</h3>
      <p>大部分情况下，只需要使用静态类型的子组件。如果需要动态输出不同类型的子组件，则可以使用<span class="expr">&lt;x:output&gt;</span>标签。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">x:output</span> <span class="cm-attribute">x:type</span>=<span class="cm-string">"useRadio ? Radio : CheckBox"</span> <span class="cm-attribute">checked@</span>=<span class="cm-string">"checked"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">x:output</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <div class="tip-box">
        <p>&lt;x:output x:type="Button"/&gt;，类似与&lt;input type="button"&gt;，实际是Extag内置的以<span class="expr">&lt;x:frag&gt;</span>为根的特殊组件Extag.Output，修改了组件的默认行为。</p>
      </div>
      <p>并且，如果<span class="expr">x:type</span>接收到的是异步函数（返回Promise），那么<span class="expr">&lt;x:output&gt;</span>将会异步输出最终的子组件。</p> -->
      
      <h3 id="component-slots">组件slots</h3>
      <p>组件内部的slot被用来收集组件外部接收到的contents。上一节Button模板中使用了一个无名的<span class="expr">&lt;x:slot&gt;</span>标签，Button作为子组件被用在其他组件模板中，其接收的子节点就是contents。组件内部可以有多个不同名的slot，content上的特性<span class="expr">x:slot</span>指向组件内部某个具名slot，达成匹配关系。例如在一个Card组件模板</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">class</span>=<span class="cm-string">"card"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">x:slot</span> <span class="cm-attribute">name</span>=<span class="cm-string">"head"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h2</span><span class="cm-tag cm-bracket">&gt;</span>@{title}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h2</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">x:slot</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">x:slot</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">x:slot</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">x:slot</span> <span class="cm-attribute">name</span>=<span class="cm-string">"foot"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">x:slot</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <p>分别使用了三种不同复杂度的<span class="expr">&lt;x:slot&gt;</span>，</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">Card</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h2</span> <span class="cm-attribute">x:slot</span>=<span class="cm-string">"head"</span><span class="cm-tag cm-bracket">&gt;</span>head<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h2</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span> <span class="cm-attribute">x:slot</span>=<span class="cm-string">"foot"</span><span class="cm-tag cm-bracket">&gt;</span>foot<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>123<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>abc<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-error">&lt;/Card&gt;</span></span></pre></div></div></div>
      <p>得到</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">class</span>=<span class="cm-string">"card"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h2</span> <span class="cm-attribute">x:slot</span>=<span class="cm-string">"head"</span><span class="cm-tag cm-bracket">&gt;</span>head<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h2</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>123<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span>abc<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">p</span> <span class="cm-attribute">x:slot</span>=<span class="cm-string">"foot"</span><span class="cm-tag cm-bracket">&gt;</span>foot<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">p</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">card</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre></div></div></div>
      <p>名为head的<span class="expr">&lt;x:slot&gt;</span>内嵌了一个默认的模板（title是Card组件自定义特性），当未传入contents或contents中没有与之匹配的项时，即可用内嵌模板完成填充。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">Card</span> <span class="cm-attribute">title</span>=<span class="cm-string">"abc"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">Card</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <p>得到</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">class</span>=<span class="cm-string">"card"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h3</span><span class="cm-tag cm-bracket">&gt;</span>abc<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h2</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <div class="tip-box">
        <p>某个content指定了x:slot，而组件内部没有与之匹配的<span class="expr">&lt;x:slot&gt;</span>，那么这个content将被自动丢弃掉。</p>
        <p><span class="expr">&lt;x:slot&gt;</span>实际是Extag内置的以<span class="expr">&lt;x:frag&gt;</span>为根的特殊组件Extag.Slot，修改了组件的默认行为。</p>
      </div>
      <h3 id="part-reference">部件引用</h3>
      <p>一般来说，模板中使用了数据绑定和事件绑定后，就很少需要手动操作子元素或子组件了。否则的话，你可以在标签中添加<span class="expr">x:name</span>特性，以便引用对应的部件。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">class</span>=<span class="cm-string">"demo"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">x:name</span>=<span class="cm-string">"input"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">div</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre></div></div></div>
      <p>这样，在JavaScript代码中，你就可以通过<span class="expr">this.input</span>方便地访问到对应的部件，并根据需要手动地添加事件处理器等。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">setup</span>() {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-keyword">this</span>.<span class="cm-property">on</span>(<span class="cm-string">'created'</span>, <span class="cm-keyword">this</span>.<span class="cm-property">onCreated</span>.<span class="cm-property">bind</span>(<span class="cm-keyword">this</span>));</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">},</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">onCreated</span>() {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-keyword">this</span>.<span class="cm-property">input</span>.<span class="cm-property">on</span>(<span class="cm-string">'change'</span>, <span class="cm-keyword">this</span>.<span class="cm-property">onInputChange</span>.<span class="cm-property">bind</span>(<span class="cm-keyword">this</span>));</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">}</span></pre></div></div></div>
      <div class="tip-box"><p>注意，你所访问到的部件仍然是Extag的Element或Component对象，而非真实的DOM元素。如果需要的话，可以在组件渲染完成后，通过元素、组件的属性<span class="expr">$skin</span>访问到已经附着的DOM元素。</p></div>
      <p>模板引擎通过模板构建组件内容时，遇到<span class="expr">x:name</span>就会调用组件的<span class="expr">addNamedPart(name, part)</span>方法，默认令<span class="expr">this[name] = part</span>，你可以在继承Component时重写此方法。</p>
      <!-- <p>并且，可方便地为该部件添加CSS：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-qualifier">.demo</span> [<span class="cm-tag">x:name</span>=<span class="cm-string">"input"</span>] {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-property">color</span>: <span class="cm-atom">#222</span>;</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">}</span></pre></div></div></div> -->
      <h3 id="list-rendering">列表渲染</h3>
      <p>在模板中，使用控制特性<span class="expr">x:for</span>完成列表渲染。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--x:for="&lt;迭代器变量&gt; of &lt;求值器表达式&gt;[|=转换器表达式][绑定模式符]"--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">script</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text/template"</span> <span class="cm-attribute">id</span>=<span class="cm-string">"menu-list-template"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">ul</span> <span class="cm-attribute">class</span>=<span class="cm-string">"menu-list"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span> <span class="cm-attribute">x:for</span>=<span class="cm-string">"menu of menus"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">href@</span>=<span class="cm-string">"menu.url !"</span><span class="cm-tag cm-bracket">&gt;</span>@{menu.label !}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">ul</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">script</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <br>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">MenuList</span> <span class="cm-operator">=</span> <span class="cm-variable">Extag</span>.<span class="cm-property">defineClass</span>({</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-property">extends</span>: <span class="cm-variable">Extag</span>.<span class="cm-property">Component</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-property">statics</span>: {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">descriptors</span>: [<span class="cm-string">'menus'</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">template</span>: <span class="cm-variable">ExtagDOM</span>.<span class="cm-property">query</span>(<span class="cm-string">'#menu-list-template'</span>).<span class="cm-property">innerHTML</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">});</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">Extag</span>.<span class="cm-property">Component</span>.<span class="cm-property">create</span>(<span class="cm-variable">MenuList</span>, {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-property">menus</span>: [</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    {<span class="cm-property">label</span>: <span class="cm-string">'Examples'</span>, <span class="cm-property">url</span>: <span class="cm-string">'/examples/'</span>},</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    {<span class="cm-property">label</span>: <span class="cm-string">'Downloads'</span>, <span class="cm-property">url</span>: <span class="cm-string">'/downloads/'</span>},</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    {<span class="cm-property">label</span>: <span class="cm-string">'Documents'</span>, <span class="cm-property">url</span>: <span class="cm-string">'/documents/'</span>}</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  ]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">}).<span class="cm-property">attach</span>(<span class="cm-variable">ExactSkin</span>.<span class="cm-property">query</span>(<span class="cm-string">'#menu-list'</span>));</span></pre></div></div></div>
      <p>控制特性<span class="expr">x:for</span>的表达式中，关键字<span class="expr">of</span>的左边为迭代器变量，右边与数据绑定表达式是完全一致的。求值器部分一般就是一个数组或类数组对象，可以使用转换器对求值器求出的结果进行再加工，返回一个新的数组。例如，渲染时还需要一个索引值，</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">ul</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span> <span class="cm-attribute">x:for</span>=<span class="cm-string">"entry of values|=entryList"</span> <span class="cm-attribute">x:key</span>=<span class="cm-string">"entry.value"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span>@{entry.index !}. @{entry.value !}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">ul</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <br>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">entryList</span>(<span class="cm-def">values</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-keyword">return</span> <span class="cm-variable-2">values</span>.<span class="cm-property">map</span>(<span class="cm-keyword">function</span>(<span class="cm-def">value</span>, <span class="cm-def">index</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-keyword">return</span> {<span class="cm-property">value</span>: <span class="cm-variable-2">value</span>, <span class="cm-property">index</span>: <span class="cm-variable-2">index</span>};</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  });</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">}</span></pre></div></div></div>
      <div class="tip-box"><p>为了不浪费之前已经渲染过的条目，指定一个与迭代器变量关联的<span class="expr">x:key</span>可以复用已有的元素。</p></div>
      <h3 id="condition-rendering">条件渲染</h3>
      <p>在模板中，使用<span class="expr">x:if</span>指令完成条件渲染。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--x:if="&lt;求值器表达式&gt;[|=转换器表达式][绑定模式符]"--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">class</span>=<span class="cm-string">"button-bar"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span>OK<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> <span class="cm-attribute">x:if</span>=<span class="cm-string">"canCancel"</span><span class="cm-tag cm-bracket">&gt;</span>Cancel<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <p>当<span class="expr">canCancel</span>为<span class="expr">true</span>时才会添加Cancel按钮，为<span class="expr">false</span>又会删除它。</p>
      <p>如果希望一个组件或者一大块元素，一旦条件满足而渲染出来后，不再移除它，但又要隐藏它，则可以这样：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  ...</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-comment">&lt;!--x:if表达式以?结尾，即单次绑定--&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">x:if</span>=<span class="cm-string">"showPartB ?"</span> <span class="cm-attribute">x:style</span>=<span class="cm-string">"display:@{showPartB ? 'block' : 'none'};"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    ...</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  ...</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <p><span class="expr">x:if</span>可以配合<span class="expr">x:for</span>命令一起使用，提供更多的可能：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">ul</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span> <span class="cm-attribute">x:if</span>=<span class="cm-string">"items != null"</span> <span class="cm-attribute">x:for</span>=<span class="cm-string">"item of items"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">img</span> <span class="cm-attribute">x:if</span>=<span class="cm-string">"item.type === 'image'"</span> <span class="cm-attribute">src@</span>=<span class="cm-string">"item.image"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">span</span> <span class="cm-attribute">x:if</span>=<span class="cm-string">"item.type === 'text'"</span><span class="cm-tag cm-bracket">&gt;</span>@{ item.text }<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">span</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">li</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">ul</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre></div></div></div>
      <div class="tip-box"><p>注意，上面的模板中，li标签上的<span class="expr">x:if</span>命令优先于<span class="expr">x:for</span>执行，与先后出现无关，因而无法访问到<span class="expr">item</span>。如果希望选择性地渲染<span class="expr">items</span>中的内容，请在<span class="expr">x:for</span>指令中添加必要的转换器进行过滤。</p></div>
      <p><span class="expr">x:type</span>也可配合<span class="expr">x:for</span>命令一起使用，如果是动态组件，则当类型确定时，才会开始列表渲染。<span class="expr">x:type</span>也是优先于<span class="expr">x:for</span>执行的，因而无法访问到迭代变量。</p>
      <h3 id="fragment-rendering">片段渲染</h3>
      <p>通常，<span class="expr">@{ }</span>用来返回一段文本内容。而如果使用<span class="expr">@{{ }}</span>，则可返回一个虚拟节点或数组，Extag会将之渲染到片段当中。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span>Please Select: @{{ drawSelect(options) }}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <br>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">//...</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">drawSelect</span>(<span class="cm-def">options</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-keyword">return</span> <span class="cm-variable">Extag</span>.<span class="cm-property">node</span>(<span class="cm-string">'select'</span>, <span class="cm-atom">null</span>, <span class="cm-variable-2">options</span>.<span class="cm-property">map</span>(<span class="cm-keyword">function</span>(<span class="cm-def">option</span>) {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-keyword">return</span> <span class="cm-variable">Extag</span>.<span class="cm-property">node</span>(<span class="cm-string">'option'</span>, {<span class="cm-property">value</span>: <span class="cm-variable-2">option</span>.<span class="cm-property">value</span>}, <span class="cm-variable-2">option</span>.<span class="cm-property">label</span>);</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  }));</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">//...</span></span></pre></div></div></div>
      <p><span class="expr">Extag.node</span>方法返回的是一个虚拟节点，方法的第一个参数为html标签名或组件类，第二个参数是属性配置，后续参数是子节点或数组。更多API示例如下：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code" role="presentation" style=""><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">drawCard</span>(<span class="cm-def">card</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-comment">// 可以返回数组，嵌套的数组会被扁平化</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-keyword">return</span> [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment">// 没有属性配置时，第二个参数为null，后续是子节点</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-variable">Extag</span>.<span class="cm-property">node</span>(<span class="cm-string">'h'</span> <span class="cm-operator">+</span> <span class="cm-variable-2">card</span>.<span class="cm-property">level</span>, <span class="cm-atom">null</span>, <span class="cm-variable-2">card</span>.<span class="cm-property">title</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-variable">Extag</span>.<span class="cm-property">node</span>(<span class="cm-string">'p'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-property">title</span>: <span class="cm-variable-2">card</span>.<span class="cm-property">title</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-string cm-property">'data-sth'</span>: <span class="cm-string">'...'</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-property">style</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-property">fontSize</span>: <span class="cm-string">'15px'</span> <span class="cm-comment">// 样式名可采用camelCase写法</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      }, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-property">class</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-string cm-property">'card-abc'</span>: <span class="cm-atom">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    }, <span class="cm-variable-2">card</span>.<span class="cm-property">description</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment">// 组件类作为第一个参数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-variable">Extag</span>.<span class="cm-property">node</span>(<span class="cm-variable">ImageBox</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-property">imgSrc</span>: <span class="cm-variable-2">card</span>.<span class="cm-property">imgSrc</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-comment">// 事件监听，参考on方法</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-property">events</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-property">click</span>: <span class="cm-keyword">this</span>.<span class="cm-property">onClickImage</span>.<span class="cm-property">bind</span>(<span class="cm-keyword">this</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-property">dbclcik</span>: [<span class="cm-keyword">this</span>.<span class="cm-property">onDbclickImage</span>.<span class="cm-property">bind</span>(<span class="cm-keyword">this</span>), {<span class="cm-property">capture</span>: <span class="cm-atom">true</span>}]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      } </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    })</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div>
      <!-- <div class="tip-box">
        <p>使用<span class="expr">Extag.node</span>，组件特性名、元素属性名和样式名统一采用<span class="expr">camelCase</span>写法。</p>
        <p>对于data-*之类的自定义attribute，建议放到属性配置的<span class="expr">attrs</span>中，不使用<span class="expr">camelCase</span>写法。</p>
      </div> -->
      <div class="tip-box">
        <p>你或许已经意识到了，在这样的函数中，完全可以使用类JSX的语法来替代Extag.node。</p>
      </div>
      
      <h3>函数化模板</h3>
      <p>我们一直在介绍字符串模板的语法，而实际上静态template也可以是一个返回虚拟节点函数，类似于片段渲染函数，但额外地支持定义绑定表达式。函数化模板定义的虚拟节点是在组件初始化时，一次性转化到Shell层，而片段渲染函数则是每次组件更新时返回新的虚拟节点，通过差异比较更新到Shell层。字符串模板和函数化模板都会转化成语法一致的抽象语法树。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code" role="presentation" style=""><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">Demo</span> <span class="cm-operator">=</span> <span class="cm-variable">Extag</span>.<span class="cm-property">defineClass</span>({</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">extends</span>: <span class="cm-variable">Extag</span>.<span class="cm-property">Component</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">statics</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">template</span>: <span class="cm-keyword">function</span>(<span class="cm-def">node</span>, <span class="cm-def">expr</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-keyword">return</span> <span class="cm-variable-2">node</span>(<span class="cm-string">'div'</span>, {<span class="cm-property">class</span>: <span class="cm-string">'demo'</span>}, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-variable-2">node</span>(<span class="cm-string">'h1'</span>, <span class="cm-atom">null</span>, <span class="cm-variable-2">expr</span>(<span class="cm-string">'this.title'</span>))           </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div>

      <!-- <h3 id="camelCase-vs-kebab-case">camelCase v.s. kebab-case</h3>
      <p>解析字符串模板时，不带有命名空间的特性名都将由<span class="expr">kebab-case</span>转换为<span class="expr">camelCase</span>，已经是小写形式或<span class="expr">camelCase</span>的则无需转换。样式名亦如此，事件名亦如此。</p>
      <p>对于DOM元素原生的属性，大部分DOM属性名和特性名都统一为完全小写形式的。而有一些DOM属性名虽是<span class="expr">camelCase</span>的，但其对应特性名通常却是完全小写的，如readOnly。另有一些DOM属性，它们的属性名在HTML与JS之间，存在特别的转换关系。例如：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">// kebab-case &lt;=&gt; camelCase</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">'accept-charset'</span> <span class="cm-operator">&lt;=&gt;</span> <span class="cm-string">'acceptCharset'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">// lowercase &lt;=&gt; lowercase</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">'autocomplete'</span> <span class="cm-operator">&lt;=&gt;</span> <span class="cm-string">'autocomplete'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">'autofocus'</span> <span class="cm-operator">&lt;=&gt;</span> <span class="cm-string">'autofocus'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">// lowercase &lt;=&gt; camelCase</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">'readonly'</span> <span class="cm-operator">&lt;=&gt;</span> <span class="cm-string">'readOnly'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">'tabindex'</span> <span class="cm-operator">&lt;=&gt;</span> <span class="cm-string">'tabIndex'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">// specially</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">'for'</span> <span class="cm-operator">&lt;=&gt;</span> <span class="cm-string">'htmlFor'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">'float'</span> <span class="cm-operator">&lt;=&gt;</span> <span class="cm-string">'cssFloat'</span> <span class="cm-comment">// 样式属性</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">'class'</span> <span class="cm-operator">&lt;=&gt;</span> <span class="cm-string">'className'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-string">'inner-html'</span> <span class="cm-operator">=&gt;</span> <span class="cm-string">'innerHTML'</span></span></pre></div></div></div>
      <p>其中，<span class="expr">inner-html</span>不是DOM元素原生的特性，而是Extag为所有标签元素特别添加的自定义特性。</p> -->

      <h3 id="tag-namespace">标签命名空间</h3>
      <p>对于一般的html标签元素，如div、p等，不必特意标明其命名空间，默认即为html。而对于svg元素、math元素以及它们的子节点，则应当标明其所属的命令空间，以便实际渲染时使用<span class="expr">document.createElementNS</span>方法创建元素，否则它们就被当成html空间下的自定义标签元素。只需在根元素上使用<span class="expr">xmlns</span>或<span class="expr">x:ns</span>特性，即可标明它们及其子节点的命名空间。</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">svg</span> <span class="cm-attribute">xmlns</span>=<span class="cm-string">"http://www.w3.org/2000/svg"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">svg</span><span class="cm-tag cm-bracket">&gt;</span> <span class="cm-comment">&lt;!--简写为--&gt;</span> <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">svg</span> <span class="cm-attribute">x:ns</span>=<span class="cm-string">"svg"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">svg</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">math</span> <span class="cm-attribute">xmlns</span>=<span class="cm-string">"http://www.w3.org/1998/Math/MathML"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">math</span><span class="cm-tag cm-bracket">&gt;</span> <span class="cm-comment">&lt;!--简写为--&gt;</span> <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">math</span> <span class="cm-attribute">x:ns</span>=<span class="cm-string">"math"</span><span class="cm-tag cm-bracket">&gt;&lt;/</span><span class="cm-tag">math</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div>
      <p>如果以svg某个子元素作为自定义组件模板根标签的话，也应当在根标签上使用<span class="expr">xmlns</span>或<span class="expr">x:ns</span>特性标明其命名空间。例如：</p>
      <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">Extag</span>.<span class="cm-property">defineClass</span>({</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-property">extends</span>: <span class="cm-variable">Extag</span>.<span class="cm-property">Component</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  <span class="cm-property">statics</span>: {</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    <span class="cm-property">template</span>: <span class="cm-string">'&lt;g x:ns="svg"&gt;...&lt;/g&gt;'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">});</span></pre></div></div></div>
      <h3 id="variable-identifier">变量标识符</h3>
      <p>模板表达式除了可以访问组件本身的属性和方法外，还可以访问本地静态<span class="expr">resources</span>中注册的资源，包括其他子组件类、预定义的常量和方法。解析模板表达式时，当遇到一个变量标识符，如<span class="expr">foo</span>，如果它不是JS关键字（如<span class="expr">this</span>）和常用全局对象，也不是<span class="expr">x:for</span>表达式中迭代变量，则判断它是不是<span class="expr">resources</span>中注册的资源。
        如果是的，则令<span class="expr">var foo = this.constructor.resources.foo</span>；如果不是的，则认为是组件本身的属性或方法，并替换<span class="expr">foo</span>为<span class="expr">this.foo</span>。</p>
      
      <div class="tip-box">
        <p>模板表达式中可识别的JS常用全局对象：<span class="expr">Array, Date, Infinity, Math, NaN, Number, Object, String, Boolean, RegExp, JSON</span>。你可以通过<span class="expr">resources</span>向模板中引入其他需要的全局对象。</p>
      </div>
      <!-- <div class="tip-box">
        <p>模板表达式中对组件自身函数方法的调用，<span class="expr">this.</span>通常不可省略，除非<span class="expr">setup</span>的时候组件函数方法已绑定到<span class="expr">this</span>上。</p>
      </div> -->
      <p></p>
    </article>
    
  </div>
  <script src="../javascripts/extag-dom.js"></script>
  <script src="../javascripts/extag.js"></script>
  <script src="../javascripts/common.js"></script>
  
</body>