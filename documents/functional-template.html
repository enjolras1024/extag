<!DOCTYPE html>
<html>
  <head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
    <link href="../stylesheets/codemirror.css" rel="stylesheet">
    <link href="../stylesheets/alicestyle.css" rel="stylesheet">
    <link href="../stylesheets/common.css" rel="stylesheet">

    <title>函数化模板 - Extag</title>
  </head>
  <body>
    <aside class="side-bar"></aside>
    <div class="main">
      <article class="article">
        <h2>函数化模板</h2>
        <p>除了使用HTML字符串作为模板，我们也可使用一个返回虚拟节点树的函数来提供模板信息。类似与Diff渲染用的函数，但支持定义绑定表达式（通过传入的第二个参数<span class="expr">expr</span>）。无论是字符串模板，还是函数化模板，最终都会转化成一个树状结构的模板对象，且只在组件初次实例化时一次性完成转化。所有组件实例，初次更新后，静态内容不再改变，绑定表达式决定了后期变动的部分。</p>
        <div id="code-tabs-1"></div>
        <div class="tip-box">
          <p>对于几个特殊标签，<span class="expr">&lt;x:frag&gt;</span>可用Extag.Fragment替代，<span class="expr">&lt;x:slot&gt;</span>可用Extag.Slot替代。</p>
          <p>对于几个特殊属性，<span class="expr">x:slot</span>写成<span class="expr">xslot</span>，<span class="expr">x:name</span>写成<span class="expr">xname</span>，<span class="expr">x:key</span>写成<span class="expr">xkey</span>，<span class="expr">x:for</span>写成<span class="expr">xfor</span>，<span class="expr">x:if</span>写成<span class="expr">xif</span>，<span class="expr">x:ns</span>写成<span class="expr">xns</span>。</p> 
        </div>
        <h3><span class="expr">expr()</span>创建绑定表达式</h3>
        <p>字符模板中支持的绑定表达式，都可以通过<span class="expr">expr()</span>来等价地表示，</p>
        
        <div id="code-tabs-2"></div>
        
        <p><span class="expr">expr()</span>的第二个参数，字符串形式的表达式，可以直接写成等价的函数，</p>
        <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// title@="title |=upper !" 或 @{title |=upper !}在函数化模板中的以下写法，效果是相同的</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">expr</span>(<span class="cm-string">'@'</span>, <span class="cm-string">'title |=upper !'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">expr</span>(<span class="cm-string">'@'</span>, <span class="cm-def">$</span><span class="cm-operator">=&gt;</span><span class="cm-variable-2">$</span>.<span class="cm-property">title</span>, (<span class="cm-def">$</span>, <span class="cm-def">$value</span>)<span class="cm-operator">=&gt;</span><span class="cm-variable">upper</span>(<span class="cm-variable-2">$value</span>), <span class="cm-string">'!'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">expr</span>(<span class="cm-string">'@'</span>, <span class="cm-keyword">function</span>(<span class="cm-def">$</span>) {<span class="cm-keyword">return</span> <span class="cm-variable-2">$</span>.<span class="cm-property">title</span>}), <span class="cm-keyword">function</span>(<span class="cm-def">$</span>, <span class="cm-def">$value</span>) {<span class="cm-keyword">return</span> <span class="cm-variable">upper</span>(<span class="cm-variable-2">$value</span>)}, <span class="cm-string">'!'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">expr</span>(<span class="cm-string">'@'</span>, <span class="cm-keyword">function</span>() {<span class="cm-keyword">return</span> <span class="cm-keyword">this</span>.<span class="cm-property">title</span>}), <span class="cm-keyword">function</span>(<span class="cm-def">$</span>, <span class="cm-def">$value</span>) {<span class="cm-keyword">return</span> <span class="cm-variable">upper</span>(<span class="cm-variable-2">$value</span>)}, <span class="cm-string">'!'</span>);</span></pre></div></div></div>
        <br>
        <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// click+="close()::once::capture"在函数化模板中的以下写法，效果是相同的</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">expr</span>(<span class="cm-string">'+'</span>, <span class="cm-string">'close()::once::capture'</span>));</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">expr</span>(<span class="cm-string">'+'</span>, <span class="cm-def">$</span><span class="cm-operator">=&gt;</span><span class="cm-variable-2">$</span>.<span class="cm-property">close</span>(), <span class="cm-string">'once'</span>, <span class="cm-string">'capture'</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">expr</span>(<span class="cm-string">'+'</span>, <span class="cm-keyword">function</span>() {<span class="cm-keyword">this</span>.<span class="cm-property">close</span>()), <span class="cm-string">'once'</span>, <span class="cm-string">'capture'</span>);</span></pre></div></div></div>
        <div class="tip-box">
          <p>表达式写成函数的形式，可以不必通过<span class="expr">resources</span>来间接地提供静态资源，如一些组件类，常量和工具函数，可以直接引用。</p>
        </div>
        <p>双向绑定的等价形式如下，</p>
        <div class="code-box scroll"><div class="CodeMirror cm-s-alice"><div class="CodeMirror-code" role="presentation" ><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// count@="@state.count"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">expr</span>(<span class="cm-string">'@'</span>, <span class="cm-string">'@state.count'</span>);</span></pre></div></div></div>

        <p><span class="expr">x:if</span>和<span class="expr">x:for</span>的等价形式如下</p>
        <div id="code-tabs-3"></div>
        <p>
          <a class="link" href="https://codepen.io/enjolras1024/pen/ZEbRorW" target="_blank">在CodePen上尝试</a>
        </p>
      </article>
      <footer>
        <p>Copyright © 2017-2021 Enjolras Chen</p>
      </footer>
    </div>

    <script src="../javascripts/extag-dom.min.js"></script>
    <script src="../javascripts/extag.min.js"></script>
    <script src="../javascripts/common.js"></script>
    <script>
      new CodeTabs({
        attrs: {
          data: [
            {label: 'ES5', content: '<div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-def">Demo</span> <span class="cm-operator">=</span> <span class="cm-variable">Extag</span>.<span class="cm-property">defineClass</span>({</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">extends</span>: <span class="cm-variable">Extag</span>.<span class="cm-property">Component</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">statics</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">attributes</span>: [<span class="cm-string">\'title\'</span>],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment">// &lt;div class="demo" title@="title"&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment">//   &lt;h1&gt;@{title}&lt;/h1&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment">// &lt;/div&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">template</span>: <span class="cm-keyword">function</span>(<span class="cm-def">node</span>, <span class="cm-def">expr</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-comment">// 用node创建虚拟节点，用expr创建绑定表达式</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-keyword">return</span> (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        <span class="cm-variable-2">node</span>(<span class="cm-string">\'div\'</span>, {<span class="cm-property">class</span>: <span class="cm-string">\'demo\'</span>, <span class="cm-property">title</span>: <span class="cm-variable-2">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'title\'</span>)}, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span class="cm-variable-2">node</span>(<span class="cm-string">\'h1\'</span>, <span class="cm-atom">null</span>, <span class="cm-variable-2">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-keyword">function</span>(<span class="cm-def">$</span>) {<span class="cm-keyword">return</span> <span class="cm-variable-2">$</span>.<span class="cm-property">title</span>})) <span class="cm-comment">// $代表组件实例          </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">        )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      );</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div>'},
            {label: 'ES6+JSX', content: '<div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">Demo</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Extag</span>.<span class="cm-property">Component</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-keyword">static</span> <span class="cm-keyword">get</span> <span class="cm-property">attributes</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> [<span class="cm-string">\'title\'</span>];</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-comment">// &lt;div class="demo" title@="title"&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-comment">//   &lt;h1&gt;@{title}&lt;/h1&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-comment">// &lt;/div&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-keyword">static</span> <span class="cm-property">template</span>(<span class="cm-def">node</span>, <span class="cm-def">expr</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-keyword">return</span> (</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">div</span> <span class="cm-attribute">class</span>=<span class="cm-string">"demo"</span> <span class="cm-attribute">title</span>={<span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'title\'</span>)}<span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">          <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>{<span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-variable">$</span><span class="cm-operator">=&gt;</span><span class="cm-variable">$</span>.<span class="cm-property">titile</span>)}<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">div</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    )</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div>'},
          ]
        }
      }).attach(ExtagDOM.query('#code-tabs-1'));

      new CodeTabs({
        attrs: {
          data: [
            {label: 'ES5', content: '<div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// attributes: [\'active\', \'title\', \'color\', \'fontSize\', \'page\']</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">node</span>(<span class="cm-string">\'a\'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-comment">// x:class="button; active:@{active}"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">class</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">button</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">active</span>: <span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'active\'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-comment">// x:style="color:@{color}; font-size:@{fontsize}px;"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">style</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">color</span>: <span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'color\'</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">fontSize</span>: <span class="cm-variable">expr</span>(<span class="cm-string">\'#\'</span>, <span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'fontSize\'</span>), <span class="cm-string">\'px\'</span>); </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-comment">// click+="onClick" </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">events</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">click</span>: <span class="cm-variable">epxr</span>(<span class="cm-string">\'+\'</span>, <span class="cm-string">\'onClick\'</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-comment">// title@="title"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">title</span>: <span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'title\'</span>), <span class="cm-comment">// or expr(\'@\', $=&gt;$.title, \'!\')</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-comment">// href#="/list/@{page}.html"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">href</span>: <span class="cm-variable">expr</span>(<span class="cm-string">\'#\'</span>, <span class="cm-string">\'/list/\'</span>, <span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'page\'</span>), <span class="cm-string">\'.html\'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}, [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-comment">// @{{draw()}}</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-variable">expr</span>(<span class="cm-string">\'&lt;&gt;\'</span>, <span class="cm-string">\'draw()\'</span>) </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">])</span></pre></div>'},
            {label: 'ES6+JSX', content: '<div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-attribute">class</span>={{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-variable">button</span>:<span class="cm-atom">true</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-variable">active</span>: <span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'active\'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-attribute">style</span>={{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-variable">color</span>: <span class="cm-variable">epxr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'color\'</span>), </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-variable">fontSize</span>: <span class="cm-variable">expr</span>(<span class="cm-string">\'#\'</span>, <span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'fontSize\'</span>), <span class="cm-string">\'px\'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-attribute">events</span>={{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-variable">click</span>: <span class="cm-variable">epxr</span>(<span class="cm-string">\'+\'</span>, <span class="cm-string">\'onClick\'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-attribute">title</span>={<span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'title\'</span>)}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-attribute">href</span>={<span class="cm-variable">expr</span>(<span class="cm-string">\'#\'</span>, <span class="cm-string">\'/list/\'</span>, <span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'page\'</span>) <span class="cm-string">\'.html\'</span>)}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  {<span class="cm-variable">expr</span>(<span class="cm-string">\'&lt;&gt;\'</span>, <span class="cm-string">\'draw()\'</span>)}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div>'},
            {label: 'HTML', content: '<div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">a</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-attribute">x:class</span>=<span class="cm-string">"button; active:@{active};"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-attribute">x:style</span>=<span class="cm-string">"color:@{color}; font-size:@{fontSize}px;"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-attribute">click+</span>=<span class="cm-string">"onClik"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-attribute">title@</span>=<span class="cm-string">"title"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-attribute">href#</span>=<span class="cm-string">"/list/@{page}.html"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  @{{draw()}}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">a</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div>'}
          ]
        }
      }).attach(ExtagDOM.query('#code-tabs-2'));

      new CodeTabs({
        attrs: {
          data: [
            {label: 'ES5', content: '<div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">node</span>(<span class="cm-string">\'ul\'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-comment">// x:if="list"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-property">xif</span>: <span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'list\'</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}, [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-variable">node</span>(<span class="cm-string">\'li\'</span>, {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-comment">// x:for="(item, index) of list"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">xfor</span>: [<span class="cm-string">\'item, index\'</span>, <span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'list\'</span>)],</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-property">xkey</span>: <span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-keyword">function</span>(<span class="cm-def">$</span>, <span class="cm-def">$$</span>) {<span class="cm-keyword">return</span> <span class="cm-variable-2">$$</span>.<span class="cm-property">item</span>.<span class="cm-property">key</span>})</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }, [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    <span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-keyword">function</span>(<span class="cm-def">$</span>, <span class="cm-def">$$</span>) { <span class="cm-comment">// 注意这里的参数列表</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-keyword">return</span> <span class="cm-variable-2">$$</span>.<span class="cm-property">index</span> <span class="cm-operator">+</span> <span class="cm-string">\'. \'</span> <span class="cm-operator">+</span> <span class="cm-variable-2">$$</span>.<span class="cm-property">item</span>.<span class="cm-property">key</span> <span class="cm-operator">+</span> <span class="cm-string">\': \'</span> <span class="cm-operator">+</span> <span class="cm-variable-2">$$</span>.<span class="cm-property">item</span>.<span class="cm-property">value</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    })</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ])</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">])</span></pre></div>'},
            {label: 'ES6+JSX', content: '<div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">ul</span> <span class="cm-attribute">xif</span>={<span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'list\'</span>)}<span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span> <span class="cm-attribute">xfor</span>={[<span class="cm-string">\'item, index\'</span>, <span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, <span class="cm-string">\'list\'</span>)]} </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">      <span class="cm-attribute">xkey</span>={<span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, (<span class="cm-variable">$</span>, {<span class="cm-property">item</span>})<span class="cm-operator">=&gt;</span><span class="cm-variable">item</span>.<span class="cm-property">key</span>}<span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    {<span class="cm-variable">expr</span>(<span class="cm-string">\'@\'</span>, (<span class="cm-variable">$</span>, {<span class="cm-property">item</span>, <span class="cm-property">index</span>}) <span class="cm-operator">=&gt;</span> <span class="cm-variable">index</span> <span class="cm-operator">+</span> <span class="cm-string">\'. \'</span> <span class="cm-operator">+</span> <span class="cm-variable">item</span>.<span class="cm-property">key</span> <span class="cm-operator">+</span> <span class="cm-string">\': \'</span> <span class="cm-operator">+</span> <span class="cm-variable">item</span>.<span class="cm-property">value</span>)}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">ul</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div>'},
            {label: 'HTML', content: '<div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">ul</span> <span class="cm-attribute">x:if</span>=<span class="cm-string">"list"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">li</span> <span class="cm-attribute">x:for</span>=<span class="cm-string">"(item, index) of list"</span> <span class="cm-attribute">x:key</span>=<span class="cm-string">"item.key"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">    @{<span class="cm-variable">index</span> <span class="cm-operator">+</span> <span class="cm-string">\'. \'</span> <span class="cm-operator">+</span> <span class="cm-variable">item</span>.<span class="cm-property">key</span> <span class="cm-operator">+</span> <span class="cm-string">\': \'</span> <span class="cm-operator">+</span> <span class="cm-variable">item</span>.<span class="cm-property">value</span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">li</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">ul</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div>'}
          ]
        }
      }).attach(ExtagDOM.query('#code-tabs-3'));
      
    </script>
  </body>
</html>